/* linkurious.js - A Javascript toolkit to speed up the development of graph visualization and interaction applications. - Version: 1.1.0 - Author: Linkurious SAS - License: GPLv3 */

(function(a){"use strict";var b={},c=function(a){var d,e,f,g,h;c.classes.dispatcher.extend(this);var i=this,j=a||{};if("string"==typeof j||j instanceof HTMLElement?j={renderers:[j]}:"[object Array]"===Object.prototype.toString.call(j)&&(j={renderers:j}),g=j.renderers||j.renderer||j.container,j.renderers&&0!==j.renderers.length||("string"==typeof g||g instanceof HTMLElement||"object"==typeof g&&"container"in g)&&(j.renderers=[g]),j.id){if(b[j.id])throw'sigma: Instance "'+j.id+'" already exists.';Object.defineProperty(this,"id",{value:j.id})}else{for(h=0;b[h];)h++;Object.defineProperty(this,"id",{value:""+h})}for(b[this.id]=this,this.settings=new c.classes.configurable(c.settings,j.settings||{}),Object.defineProperty(this,"graph",{value:new c.classes.graph(this.settings),configurable:!0}),Object.defineProperty(this,"middlewares",{value:[],configurable:!0}),Object.defineProperty(this,"cameras",{value:{},configurable:!0}),Object.defineProperty(this,"renderers",{value:{},configurable:!0}),Object.defineProperty(this,"renderersPerCamera",{value:{},configurable:!0}),Object.defineProperty(this,"cameraFrames",{value:{},configurable:!0}),Object.defineProperty(this,"camera",{get:function(){return this.cameras[0]}}),Object.defineProperty(this,"events",{value:["click","rightClick","clickStage","doubleClickStage","rightClickStage","clickNode","clickNodes","doubleClickNode","doubleClickNodes","rightClickNode","rightClickNodes","hovers","downNode","downNodes","upNode","upNodes"],configurable:!0}),this._handler=function(a){var b,c={};for(b in a.data)c[b]=a.data[b];c.renderer=a.target,this.dispatchEvent(a.type,c)}.bind(this),f=j.renderers||[],d=0,e=f.length;e>d;d++)this.addRenderer(f[d]);for(f=j.middlewares||[],d=0,e=f.length;e>d;d++)this.middlewares.push("string"==typeof f[d]?c.middlewares[f[d]]:f[d]);"object"==typeof j.graph&&j.graph&&(this.graph.read(j.graph),this.refresh()),window.addEventListener("resize",function(){i.settings&&i.refresh()})};if(c.prototype.addCamera=function(b){var d,e=this;if(!arguments.length){for(b=0;this.cameras[""+b];)b++;b=""+b}if(this.cameras[b])throw'sigma.addCamera: The camera "'+b+'" already exists.';return d=new c.classes.camera(b,this.graph,this.settings),this.cameras[b]=d,d.quadtree=new c.classes.quad,c.classes.edgequad!==a&&(d.edgequadtree=new c.classes.edgequad),d.bind("coordinatesUpdated",function(a){e.renderCamera(d)}),this.renderersPerCamera[b]=[],d},c.prototype.killCamera=function(a){if(a="string"==typeof a?this.cameras[a]:a,!a)throw"sigma.killCamera: The camera is undefined.";var b,c,d=this.renderersPerCamera[a.id];for(c=d.length,b=c-1;b>=0;b--)this.killRenderer(d[b]);return delete this.renderersPerCamera[a.id],delete this.cameraFrames[a.id],delete this.cameras[a.id],a.kill&&a.kill(),this},c.prototype.addRenderer=function(a){var b,d,e,f,g=a||{};if("string"==typeof g?g={container:document.getElementById(g)}:g instanceof HTMLElement&&(g={container:g}),"string"==typeof g.container&&(g.container=document.getElementById(g.container)),"id"in g)b=g.id;else{for(b=0;this.renderers[""+b];)b++;b=""+b}if(this.renderers[b])throw'sigma.addRenderer: The renderer "'+b+'" already exists.';if(d="function"==typeof g.type?g.type:c.renderers[g.type],d=d||c.renderers.def,e="camera"in g?g.camera instanceof c.classes.camera?g.camera:this.cameras[g.camera]||this.addCamera(g.camera):this.addCamera(),this.cameras[e.id]!==e)throw"sigma.addRenderer: The camera is not properly referenced.";return f=new d(this.graph,e,this.settings,g),this.renderers[b]=f,Object.defineProperty(f,"id",{value:b}),f.bind&&f.bind(["click","rightClick","clickStage","doubleClickStage","rightClickStage","clickNode","clickNodes","clickEdge","clickEdges","doubleClickNode","doubleClickNodes","doubleClickEdge","doubleClickEdges","rightClickNode","rightClickNodes","rightClickEdge","rightClickEdges","hovers","downNode","downNodes","downEdge","downEdges","upNode","upNodes","upEdge","upEdges"],this._handler),this.renderersPerCamera[e.id].push(f),f},c.prototype.killRenderer=function(a){if(a="string"==typeof a?this.renderers[a]:a,!a)throw"sigma.killRenderer: The renderer is undefined.";var b=this.renderersPerCamera[a.camera.id],c=b.indexOf(a);return c>=0&&b.splice(c,1),a.kill&&a.kill(),delete this.renderers[a.id],this},c.prototype.refresh=function(b){var d,e,f,g,h,i,j=0;for(b=b||{},g=this.middlewares||[],d=0,e=g.length;e>d;d++)g[d].call(this,0===d?"":"tmp"+j+":",d===e-1?"ready:":"tmp"+ ++j+":");for(f in this.cameras)h=this.cameras[f],h.settings("autoRescale")&&this.renderersPerCamera[h.id]&&this.renderersPerCamera[h.id].length?c.middlewares.rescale.call(this,g.length?"ready:":"",h.readPrefix,{width:this.renderersPerCamera[h.id][0].width,height:this.renderersPerCamera[h.id][0].height}):c.middlewares.copy.call(this,g.length?"ready:":"",h.readPrefix),b.skipIndexation||(i=c.utils.getBoundaries(this.graph,h.readPrefix),h.quadtree.index(this.graph.nodes(),{prefix:h.readPrefix,maxLevel:h.settings("nodeQuadtreeMaxLevel"),bounds:{x:i.minX,y:i.minY,width:i.maxX-i.minX,height:i.maxY-i.minY}}),h.edgequadtree!==a&&h.settings("drawEdges")&&(h.settings("enableEdgeHovering")||h.settings("edgesClippingWithNodes"))&&h.edgequadtree.index(this.graph,{prefix:h.readPrefix,maxLevel:h.settings("edgeQuadtreeMaxLevel"),bounds:{x:i.minX,y:i.minY,width:i.maxX-i.minX,height:i.maxY-i.minY}}));for(g=Object.keys(this.renderers),d=0,e=g.length;e>d;d++)if(this.renderers[g[d]].process)if(this.settings("skipErrors"))try{this.renderers[g[d]].process()}catch(k){console.log('Warning: The renderer "'+g[d]+'" crashed on ".process()"')}else this.renderers[g[d]].process();return this.render(),this},c.prototype.render=function(){var a;for(a in this.renderers)if(this.settings("skipErrors"))try{this.renderers[a].render()}catch(b){this.settings("verbose")&&console.log('Warning: The renderer "'+this.renderers[a]+'" crashed on ".render()"')}else this.renderers[a].render();return this},c.prototype.renderCamera=function(a,b){var c,d,e,f,g=this;return f=function(){for(e=g.renderersPerCamera[a.id],c=0,d=e.length;d>c;c++)if(g.settings("skipErrors"))try{e[c].render()}catch(b){g.settings("verbose")&&console.log('Warning: The renderer "'+e[c].id+'" crashed on ".render()"')}else e[c].render()},b?f():(g.cameraFrames[a.id]=f,requestAnimationFrame(function(){g.cameraFrames[a.id]()})),this},c.prototype.kill=function(){var a;this.dispatchEvent("kill"),this.graph.kill(),delete this.middlewares;for(a in this.renderers)this.killRenderer(this.renderers[a]);for(a in this.cameras)this.killCamera(this.cameras[a]);delete this.renderers,delete this.cameras;for(a in this)this.hasOwnProperty(a)&&delete this[a];delete b[this.id]},c.instances=function(a){return arguments.length?b[a]:c.utils.extend({},b)},c.version="1.0.3","undefined"!=typeof this.sigma)throw"An object called sigma is already in the global scope.";this.sigma=c}).call(this),function(a){"use strict";function b(a,c){var d,e,f,g;if(arguments.length)if(1===arguments.length&&Object(arguments[0])===arguments[0])for(a in arguments[0])b(a,arguments[0][a]);else if(arguments.length>1)for(g=Array.isArray(a)?a:a.split(/ /),d=0,e=g.length;d!==e;d+=1)f=g[d],C[f]||(C[f]=[]),C[f].push({handler:c})}function c(a,b){var c,d,e,f,g,h,i=Array.isArray(a)?a:a.split(/ /);if(arguments.length)if(b)for(c=0,d=i.length;c!==d;c+=1){if(h=i[c],C[h]){for(g=[],e=0,f=C[h].length;e!==f;e+=1)C[h][e].handler!==b&&g.push(C[h][e]);C[h]=g}C[h]&&0===C[h].length&&delete C[h]}else for(c=0,d=i.length;c!==d;c+=1)delete C[i[c]];else C=Object.create(null)}function d(a,b){var c,d,e,f,g,h,i=Array.isArray(a)?a:a.split(/ /);for(b=void 0===b?{}:b,c=0,e=i.length;c!==e;c+=1)if(h=i[c],C[h])for(g={type:h,data:b||{}},d=0,f=C[h].length;d!==f;d+=1)try{C[h][d].handler(g)}catch(j){}}function e(){var a,b,c,d,e=!1,f=s(),g=x.shift();if(c=g.job(),f=s()-f,g.done++,g.time+=f,g.currentTime+=f,g.weightTime=g.currentTime/(g.weight||1),g.averageTime=g.time/g.done,d=g.count?g.count<=g.done:!c,!d){for(a=0,b=x.length;b>a;a++)if(x[a].weightTime>g.weightTime){x.splice(a,0,g),e=!0;break}e||x.push(g)}return d?g:null}function f(a){var b=x.length;w[a.id]=a,a.status="running",b&&(a.weightTime=x[b-1].weightTime,a.currentTime=a.weightTime*(a.weight||1)),a.startTime=s(),d("jobStarted",q(a)),x.push(a)}function g(){var a,b,c;for(a in v)b=v[a],b.after?y[a]=b:f(b),delete v[a];for(u=!!x.length;x.length&&s()-t<B.frameDuration;)if(c=e()){i(c.id);for(a in y)y[a].after===c.id&&(f(y[a]),delete y[a])}u?(t=s(),d("enterFrame"),setTimeout(g,0)):d("stop")}function h(a,b){var c,e,f;if(Array.isArray(a)){for(A=!0,c=0,e=a.length;e>c;c++)h(a[c].id,p(a[c],b));A=!1,u||(t=s(),d("start"),g())}else if("object"==typeof a)if("string"==typeof a.id)h(a.id,a);else{A=!0;for(c in a)"function"==typeof a[c]?h(c,p({job:a[c]},b)):h(c,p(a[c],b));A=!1,u||(t=s(),d("start"),g())}else{if("string"!=typeof a)throw new Error("[conrad.addJob] Wrong arguments.");if(k(a))throw new Error('[conrad.addJob] Job with id "'+a+'" already exists.');if("function"==typeof b)f={id:a,done:0,time:0,status:"waiting",currentTime:0,averageTime:0,weightTime:0,job:b};else{if("object"!=typeof b)throw new Error("[conrad.addJob] Wrong arguments.");f=p({id:a,done:0,time:0,status:"waiting",currentTime:0,averageTime:0,weightTime:0},b)}v[a]=f,d("jobAdded",q(f)),u||A||(t=s(),d("start"),g())}return this}function i(a){var b,c,e,f,g=!1;if(Array.isArray(a))for(b=0,c=a.length;c>b;b++)i(a[b]);else{if("string"!=typeof a)throw new Error("[conrad.killJob] Wrong arguments.");for(e=[w,y,v],b=0,c=e.length;c>b;b++)a in e[b]&&(f=e[b][a],B.history&&(f.status="done",z.push(f)),d("jobEnded",q(f)),delete e[b][a],"function"==typeof f.end&&f.end(),g=!0);for(e=x,b=0,c=e.length;c>b;b++)if(e[b].id===a){e.splice(b,1);break}if(!g)throw new Error('[conrad.killJob] Job "'+a+'" not found.')}return this}function j(){var a,b=p(v,w,y);if(B.history)for(a in b)b[a].status="done",z.push(b[a]),"function"==typeof b[a].end&&b[a].end();return v={},y={},w={},x=[],u=!1,this}function k(a){var b=v[a]||w[a]||y[a];return b?p(b):null}function l(a,b){var c;if("string"==typeof a1&&1===arguments.length)return B[a1];c="object"==typeof a1&&1===arguments.length?a1||{}:{},"string"==typeof a1&&(c[a1]=a2);for(var d in c)void 0!==c[d]?B[d]=c[d]:delete B[d];return this}function m(){return u}function n(){return z=[],this}function o(a,b){var c,d,e,f,g,h,i;if(!arguments.length){g=[];for(d in v)g.push(v[d]);for(d in y)g.push(y[d]);for(d in w)g.push(w[d]);g=g.concat(z)}if("string"==typeof a)switch(a){case"waiting":g=r(y);break;case"running":g=r(w);break;case"done":g=z;break;default:h=a}if(a instanceof RegExp&&(h=a),!h&&("string"==typeof b||b instanceof RegExp)&&(h=b),h){if(i="string"==typeof h,g instanceof Array)c=g;else if("object"==typeof g){c=[];for(d in g)c=c.concat(g[d])}else{c=[];for(d in v)c.push(v[d]);for(d in y)c.push(y[d]);for(d in w)c.push(w[d]);c=c.concat(z)}for(g=[],e=0,f=c.length;f>e;e++)(i?c[e].id===h:c[e].id.match(h))&&g.push(c[e])}return q(g)}function p(){var a,b,c={},d=arguments.length;for(a=d-1;a>=0;a--)for(b in arguments[a])c[b]=arguments[a][b];return c}function q(a){var b,c,d;if(!a)return a;if(Array.isArray(a))for(b=[],c=0,d=a.length;d>c;c++)b.push(q(a[c]));else if("object"==typeof a){b={};for(c in a)b[c]=q(a[c])}else b=a;return b}function r(a){var b,c=[];for(b in a)c.push(a[b]);return c}function s(){return Date.now?Date.now():(new Date).getTime()}if(a.conrad)throw new Error("conrad already exists");var t,u=!1,v={},w={},x=[],y={},z=[],A=!1,B={frameDuration:20,history:!0},C=Object.create(null);Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)});var D={hasJob:k,addJob:h,killJob:i,killAll:j,settings:l,getStats:o,isRunning:m,clearHistory:n,bind:b,unbind:c,version:"0.1.0"};"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(exports=module.exports=D),exports.conrad=D),a.conrad=D}(this),function(a){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";var b=this;sigma.utils=sigma.utils||{},sigma.utils.extend=function(){var a,b,c={},d=arguments.length;for(a=d-1;a>=0;a--)for(b in arguments[a])c[b]=arguments[a][b];return c},sigma.utils.dateNow=function(){return Date.now?Date.now():(new Date).getTime()},sigma.utils.pkg=function(a){return(a||"").split(".").reduce(function(a,b){return b in a?a[b]:a[b]={}},b)},sigma.utils.id=function(){var a=0;return function(){return++a}}(),sigma.utils.floatColor=function(a){var b=[0,0,0];return a.match(/^#/)?(a=(a||"").replace(/^#/,""),b=3===a.length?[parseInt(a.charAt(0)+a.charAt(0),16),parseInt(a.charAt(1)+a.charAt(1),16),parseInt(a.charAt(2)+a.charAt(2),16)]:[parseInt(a.charAt(0)+a.charAt(1),16),parseInt(a.charAt(2)+a.charAt(3),16),parseInt(a.charAt(4)+a.charAt(5),16)]):a.match(/^ *rgba? *\(/)&&(a=a.match(/^ *rgba? *\( *([0-9]*) *, *([0-9]*) *, *([0-9]*) *(,.*)?\) *$/),b=[+a[1],+a[2],+a[3]]),256*b[0]*256+256*b[1]+b[2]},sigma.utils.zoomTo=function(a,b,c,d,e){var f,g,h,i=a.settings;g=Math.max(i("zoomMin"),Math.min(i("zoomMax"),a.ratio*d)),g!==a.ratio&&(d=g/a.ratio,h={x:b*(1-d)+a.x,y:c*(1-d)+a.y,ratio:g},e&&e.duration?(f=sigma.misc.animation.killAll(a),e=sigma.utils.extend(e,{easing:f?"quadraticOut":"quadraticInOut"}),sigma.misc.animation.camera(a,h,e)):(a.goTo(h),e&&e.onComplete&&e.onComplete()))},sigma.utils.getQuadraticControlPoint=function(a,b,c,d){return{x:(a+c)/2+(d-b)/4,y:(b+d)/2+(a-c)/4}},sigma.utils.getPointOnQuadraticCurve=function(a,b,c,d,e,f,g){return{x:(1-a)*(1-a)*b+2*(1-a)*a*f+a*a*d,y:(1-a)*(1-a)*c+2*(1-a)*a*g+a*a*e}},sigma.utils.getPointOnBezierCurve=function(a,b,c,d,e,f,g,h,i){var j=(1-a)*(1-a)*(1-a),k=3*a*(1-a)*(1-a),l=3*a*a*(1-a),m=a*a*a;return{x:j*b+k*f+l*h+m*d,y:j*c+k*g+l*i+m*e}},sigma.utils.getSelfLoopControlPoints=function(a,b,c){return{x1:a-7*c,y1:b,x2:a,y2:b+7*c}},sigma.utils.getDistance=function(a,b,c,d){return Math.sqrt((c-a)*(c-a)+(d-b)*(d-b))},sigma.utils.getCircleIntersection=function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o;if(h=d-a,i=e-b,j=Math.sqrt(i*i+h*h),j>c+f)return!1;if(j<Math.abs(c-f))return!1;g=(c*c-f*f+j*j)/(2*j),n=a+h*g/j,o=b+i*g/j,k=Math.sqrt(c*c-g*g),l=-i*(k/j),m=h*(k/j);var p=n+l,q=n-l,r=o+m,s=o-m;return{xi:p,xi_prime:q,yi:r,yi_prime:s}},sigma.utils.isPointOnSegment=function(a,b,c,d,e,f,g){var h=Math.abs((b-d)*(e-c)-(a-c)*(f-d)),i=sigma.utils.getDistance(c,d,e,f),j=h/i;return g>j&&Math.min(c,e)<=a&&a<=Math.max(c,e)&&Math.min(d,f)<=b&&b<=Math.max(d,f)},sigma.utils.isPointOnQuadraticCurve=function(a,b,c,d,e,f,g,h,i){var j=sigma.utils.getDistance(c,d,e,f);if(Math.abs(a-c)>j||Math.abs(b-d)>j)return!1;for(var k,l=sigma.utils.getDistance(a,b,c,d),m=sigma.utils.getDistance(a,b,e,f),n=.5,o=m>l?-.01:.01,p=.001,q=100,r=sigma.utils.getPointOnQuadraticCurve(n,c,d,e,f,g,h),s=sigma.utils.getDistance(a,b,r.x,r.y);q-->0&&n>=0&&1>=n&&s>i&&(o>p||-p>o);)k=s,r=sigma.utils.getPointOnQuadraticCurve(n,c,d,e,f,g,h),s=sigma.utils.getDistance(a,b,r.x,r.y),s>k?(o=-o/2,n+=o):0>n+o||n+o>1?(o/=2,s=k):n+=o;return i>s},sigma.utils.isPointOnBezierCurve=function(a,b,c,d,e,f,g,h,i,j,k){var l=sigma.utils.getDistance(c,d,g,h);if(Math.abs(a-c)>l||Math.abs(b-d)>l)return!1;for(var m,n=sigma.utils.getDistance(a,b,c,d),o=sigma.utils.getDistance(a,b,e,f),p=.5,q=o>n?-.01:.01,r=.001,s=100,t=sigma.utils.getPointOnBezierCurve(p,c,d,e,f,g,h,i,j),u=sigma.utils.getDistance(a,b,t.x,t.y);s-->0&&p>=0&&1>=p&&u>k&&(q>r||-r>q);)m=u,t=sigma.utils.getPointOnBezierCurve(p,c,d,e,f,g,h,i,j),u=sigma.utils.getDistance(a,b,t.x,t.y),u>m?(q=-q/2,p+=q):0>p+q||p+q>1?(q/=2,u=m):p+=q;return k>u},sigma.utils.getX=function(b){return b.offsetX!==a&&b.offsetX||b.layerX!==a&&b.layerX||b.clientX!==a&&b.clientX},sigma.utils.getY=function(b){return b.offsetY!==a&&b.offsetY||b.layerY!==a&&b.layerY||b.clientY!==a&&b.clientY},sigma.utils.getPixelRatio=function(){var b=1;return window.screen.deviceXDPI!==a&&window.screen.logicalXDPI!==a&&window.screen.deviceXDPI>window.screen.logicalXDPI?b=window.screen.systemXDPI/window.screen.logicalXDPI:window.devicePixelRatio!==a&&(b=window.devicePixelRatio),b},sigma.utils.getWidth=function(b){var c=b.target.ownerSVGElement?b.target.ownerSVGElement.width:b.target.width;return"number"==typeof c&&c||c!==a&&c.baseVal!==a&&c.baseVal.value},sigma.utils.getCenter=function(a){var b="sigma-svg"==a.target.getAttribute("class")?1:sigma.utils.getPixelRatio();return{x:sigma.utils.getWidth(a)/(2*b),y:sigma.utils.getHeight(a)/(2*b)}},sigma.utils.mouseCoords=function(a,b,c){return b=b||sigma.utils.getX(a),c=c||sigma.utils.getY(a),{x:b-sigma.utils.getCenter(a).x,y:c-sigma.utils.getCenter(a).y,clientX:a.clientX,clientY:a.clientY,ctrlKey:a.ctrlKey,metaKey:a.metaKey,altKey:a.altKey,shiftKey:a.shiftKey}},sigma.utils.getHeight=function(b){var c=b.target.ownerSVGElement?b.target.ownerSVGElement.height:b.target.height;return"number"==typeof c&&c||c!==a&&c.baseVal!==a&&c.baseVal.value},sigma.utils.getDelta=function(b){return b.wheelDelta!==a&&b.wheelDelta||b.detail!==a&&-b.detail},sigma.utils.getOffset=function(a){for(var b=0,c=0;a;)c+=parseInt(a.offsetTop),b+=parseInt(a.offsetLeft),a=a.offsetParent;return{top:c,left:b}},sigma.utils.doubleClick=function(a,b,c){var d,e=0;a._doubleClickHandler=a._doubleClickHandler||{},a._doubleClickHandler[b]=a._doubleClickHandler[b]||[],d=a._doubleClickHandler[b],d.push(function(a){return e++,2===e?(e=0,c(a)):void(1===e&&setTimeout(function(){e=0},sigma.settings.doubleClickTimeout))}),a.addEventListener(b,d[d.length-1],!1)},sigma.utils.unbindDoubleClick=function(a,b){for(var c,d=(a._doubleClickHandler||{})[b]||[];c=d.pop();)a.removeEventListener(b,c);delete(a._doubleClickHandler||{})[b]},sigma.utils.easings=sigma.utils.easings||{},sigma.utils.easings.linearNone=function(a){return a},sigma.utils.easings.quadraticIn=function(a){return a*a},sigma.utils.easings.quadraticOut=function(a){return a*(2-a)},sigma.utils.easings.quadraticInOut=function(a){return(a*=2)<1?.5*a*a:-.5*(--a*(a-2)-1)},sigma.utils.easings.cubicIn=function(a){return a*a*a},sigma.utils.easings.cubicOut=function(a){return--a*a*a+1},sigma.utils.easings.cubicInOut=function(a){return(a*=2)<1?.5*a*a*a:.5*((a-=2)*a*a+2)},sigma.utils.isWebGLSupported=function(){var a,b=!!window.WebGLRenderingContext;if(b){a=document.createElement("canvas");try{return!(!a.getContext("webgl")&&!a.getContext("experimental-webgl"))}catch(c){}}return!1},sigma.utils.loadShader=function(a,b,c,d){var e,f=a.createShader(c);return a.shaderSource(f,b),a.compileShader(f),e=a.getShaderParameter(f,a.COMPILE_STATUS),e?f:(d&&d('Error compiling shader "'+f+'":'+a.getShaderInfoLog(f)),a.deleteShader(f),null)},sigma.utils.loadProgram=function(a,b,c,d,e){var f,g,h=a.createProgram();for(f=0;f<b.length;++f)a.attachShader(h,b[f]);if(c)for(f=0;f<c.length;++f)a.bindAttribLocation(h,locations?locations[f]:f,opt_attribs[f]);return a.linkProgram(h),g=a.getProgramParameter(h,a.LINK_STATUS),g?h:(e&&e("Error in program linking: "+a.getProgramInfoLog(h)),a.deleteProgram(h),null)},sigma.utils.pkg("sigma.utils.matrices"),sigma.utils.matrices.translation=function(a,b){return[1,0,0,0,1,0,a,b,1]},sigma.utils.matrices.rotation=function(a,b){var c=Math.cos(a),d=Math.sin(a);return b?[c,-d,d,c]:[c,-d,0,d,c,0,0,0,1]},sigma.utils.matrices.scale=function(a,b){return b?[a,0,0,a]:[a,0,0,0,a,0,0,0,1]},sigma.utils.matrices.multiply=function(a,b,c){var d=c?2:3,e=a[0*d+0],f=a[0*d+1],g=a[0*d+2],h=a[1*d+0],i=a[1*d+1],j=a[1*d+2],k=a[2*d+0],l=a[2*d+1],m=a[2*d+2],n=b[0*d+0],o=b[0*d+1],p=b[0*d+2],q=b[1*d+0],r=b[1*d+1],s=b[1*d+2],t=b[2*d+0],u=b[2*d+1],v=b[2*d+2];return c?[e*n+f*q,e*o+f*r,h*n+i*q,h*o+i*r]:[e*n+f*q+g*t,e*o+f*r+g*u,e*p+f*s+g*v,h*n+i*q+j*t,h*o+i*r+j*u,h*p+i*s+j*v,k*n+l*q+m*t,k*o+l*r+m*u,k*p+l*s+m*v]},sigma.utils.canvas={},sigma.utils.canvas.getTextWidth=function(a,b,c,d){return d?b?.6*d.length*c:a.measureText(d).width:0}}.call(this),function(a){"use strict";var b,c=0,d=["ms","moz","webkit","o"];for(b=0;b<d.length&&!a.requestAnimationFrame;b++)a.requestAnimationFrame=a[d[b]+"RequestAnimationFrame"],a.cancelAnimationFrame=a[d[b]+"CancelAnimationFrame"]||a[d[b]+"CancelRequestAnimationFrame"];a.requestAnimationFrame||(a.requestAnimationFrame=function(b,d){var e=(new Date).getTime(),f=Math.max(0,16-(e-c)),g=a.setTimeout(function(){b(e+f)},f);return c=e+f,g}),a.cancelAnimationFrame||(a.cancelAnimationFrame=function(a){clearTimeout(a)}),Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b,c,d=Array.prototype.slice.call(arguments,1),e=this;return b=function(){},c=function(){return e.apply(this instanceof b&&a?this:a,d.concat(Array.prototype.slice.call(arguments)))},b.prototype=this.prototype,c.prototype=new b,c})}(this),function(a){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.settings");var b={clone:!1,immutable:!0,verbose:!1,classPrefix:"sigma",defaultNodeType:"def",defaultEdgeType:"def",defaultLabelColor:"#000",defaultEdgeColor:"#000",defaultNodeColor:"#000",defaultLabelSize:14,labelAlignment:"right",edgeColor:"source",minArrowSize:0,font:"arial",fontStyle:"",labelColor:"default",labelSize:"fixed",labelSizeRatio:1,labelThreshold:8,webglOversamplingRatio:2,borderSize:0,defaultNodeBorderColor:"#000",hoverFont:"",singleHover:!0,hoverFontStyle:"",labelHoverShadow:"default",labelHoverShadowColor:"#000",nodeHoverColor:"node",defaultNodeHoverColor:"#000",labelHoverBGColor:"default",defaultHoverLabelBGColor:"#fff",labelHoverColor:"default",defaultLabelHoverColor:"#000",edgeHoverColor:"edge",edgeHoverSizeRatio:1,defaultEdgeHoverColor:"#000",edgeHoverExtremities:!1,drawEdges:!0,drawNodes:!0,drawLabels:!0,drawEdgeLabels:!1,batchEdgesDrawing:!1,hideEdgesOnMove:!1,canvasEdgesBatchSize:500,webglEdgesBatchSize:1e3,approximateLabelWidth:!0,edgesClippingWithNodes:!0,scalingMode:"inside",sideMargin:0,minEdgeSize:.5,maxEdgeSize:1,minNodeSize:1,maxNodeSize:8,touchEnabled:!0,mouseEnabled:!0,mouseWheelEnabled:!0,doubleClickEnabled:!0,eventsEnabled:!0,zoomingRatio:1.7,doubleClickZoomingRatio:2.2,zoomMin:.0625,zoomMax:2,mouseZoomDuration:200,doubleClickZoomDuration:200,mouseInertiaDuration:200,mouseInertiaRatio:3,touchInertiaDuration:200,touchInertiaRatio:3,doubleClickTimeout:300,doubleTapTimeout:300,dragTimeout:200,autoResize:!0,autoRescale:!0,enableCamera:!0,enableHovering:!0,enableEdgeHovering:!1,edgeHoverPrecision:5,rescaleIgnoreSize:!1,skipErrors:!1,nodeQuadtreeMaxLevel:4,edgeQuadtreeMaxLevel:4,nodesPowRatio:.5,edgesPowRatio:.5,animationsTime:200};sigma.settings=sigma.utils.extend(sigma.settings||{},b)}.call(this),function(){"use strict";var a=function(){Object.defineProperty(this,"_handlers",{value:{}})};a.prototype.bind=function(a,b){var c,d,e,f;if(1===arguments.length&&"object"==typeof arguments[0])for(a in arguments[0])this.bind(a,arguments[0][a]);else{if(2!==arguments.length||"function"!=typeof arguments[1])throw"bind: Wrong arguments.";for(f="string"==typeof a?a.split(" "):a,c=0,d=f.length;c!==d;c+=1)e=f[c],e&&(this._handlers[e]||(this._handlers[e]=[]),this._handlers[e].push({handler:b}))}return this},a.prototype.unbind=function(a,b){var c,d,e,f,g,h,i,j="string"==typeof a?a.split(" "):a;if(!arguments.length){for(g in this._handlers)delete this._handlers[g];return this}if(b)for(c=0,d=j.length;c!==d;c+=1){if(i=j[c],this._handlers[i]){for(h=[],e=0,f=this._handlers[i].length;e!==f;e+=1)this._handlers[i][e].handler!==b&&h.push(this._handlers[i][e]);this._handlers[i]=h}this._handlers[i]&&0===this._handlers[i].length&&delete this._handlers[i]}else for(c=0,d=j.length;c!==d;c+=1)delete this._handlers[j[c]];return this},a.prototype.dispatchEvent=function(a,b){var c,d,e,f,g,h,i,j=this,k="string"==typeof a?a.split(" "):a;for(b=void 0===b?{}:b,c=0,d=k.length;c!==d;c+=1)if(i=k[c],this._handlers[i]){for(h=j.getEvent(i,b),g=[],e=0,f=this._handlers[i].length;e!==f;e+=1)this._handlers[i][e].handler(h),this._handlers[i][e].one||g.push(this._handlers[i][e]);this._handlers[i]=g}return this},a.prototype.getEvent=function(a,b){return{type:a,data:b||{},target:this}},a.extend=function(b,c){var d;for(d in a.prototype)a.prototype.hasOwnProperty(d)&&(b[d]=a.prototype[d]);a.apply(b,c)},"undefined"!=typeof this.sigma?(this.sigma.classes=this.sigma.classes||{},this.sigma.classes.dispatcher=a):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=a),exports.dispatcher=a):this.dispatcher=a}.call(this),function(){"use strict";var a=function(){var b,c,d={},e=Array.prototype.slice.call(arguments,0),f=function(a,b){var c,g,h,i;if(1===arguments.length&&"string"==typeof a){if(void 0!==d[a])return d[a];for(g=0,h=e.length;h>g;g++)if(void 0!==e[g][a])return e[g][a];return void 0}if("object"==typeof a&&"string"==typeof b)return void 0!==(a||{})[b]?a[b]:f(b);for(c="object"==typeof a&&void 0===b?a:{},"string"==typeof a&&(c[a]=b),g=0,i=Object.keys(c),h=i.length;h>g;g++)d[i[g]]=c[i[g]];return this};for(f.embedObjects=function(){var b=e.concat(d).concat(Array.prototype.splice.call(arguments,0));return a.apply({},b)},b=0,c=arguments.length;c>b;b++)f(arguments[b]);return f};"undefined"!=typeof this.sigma?(this.sigma.classes=this.sigma.classes||{},this.sigma.classes.configurable=a):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=a),exports.configurable=a):this.configurable=a}.call(this),function(a){"use strict";function b(a,b,c){var d=function(){var d,e;for(d in h[a])h[a][d].apply(b,arguments);e=c.apply(b,arguments);for(d in g[a])g[a][d].apply(b,arguments);return e};return d}function c(a){var b;for(b in a)"hasOwnProperty"in a&&!a.hasOwnProperty(b)||delete a[b];return a}var d=Object.create(null),e=Object.create(null),f=Object.create(null),g=Object.create(null),h=Object.create(null),i={immutable:!0,clone:!0},j=function(a){return i[a]},k=function(a){var c,e,g;g={settings:a||j,nodesArray:[],edgesArray:[],nodesIndex:Object.create(null),edgesIndex:Object.create(null),inNeighborsIndex:Object.create(null),outNeighborsIndex:Object.create(null),allNeighborsIndex:Object.create(null),inNeighborsCount:Object.create(null),outNeighborsCount:Object.create(null),allNeighborsCount:Object.create(null)};for(c in f)f[c].call(g);for(c in d)e=b(c,g,d[c]),this[c]=e,g[c]=e};k.addMethod=function(a,b){if("string"!=typeof a||"function"!=typeof b||2!==arguments.length)throw"addMethod: Wrong arguments.";if(d[a]||k[a])throw'The method "'+a+'" already exists.';return d[a]=b,g[a]=Object.create(null),h[a]=Object.create(null),this},k.hasMethod=function(a){return!(!d[a]&&!k[a])},k.attach=function(a,b,c,d){if("string"!=typeof a||"string"!=typeof b||"function"!=typeof c||arguments.length<3||arguments.length>4)throw"attach: Wrong arguments.";var e;if("constructor"===a)e=f;else if(d){if(!h[a])throw'The method "'+a+'" does not exist.';e=h[a]}else{if(!g[a])throw'The method "'+a+'" does not exist.';e=g[a]}if(e[b])throw'A function "'+b+'" is already attached to the method "'+a+'".';return e[b]=c,this},k.attachBefore=function(a,b,c){return this.attach(a,b,c,!0)},k.addIndex=function(a,b){if("string"!=typeof a||Object(b)!==b||2!==arguments.length)throw"addIndex: Wrong arguments.";if(e[a])throw'The index "'+a+'" already exists.';var c;e[a]=b;for(c in b){if("function"!=typeof b[c])throw"The bindings must be functions.";k.attach(c,a,b[c])}return this},k.addMethod("addNode",function(a){if(Object(a)!==a||1!==arguments.length)throw"addNode: Wrong arguments.";if("string"!=typeof a.id&&"number"!=typeof a.id)throw"The node must have a string or number id.";if(this.nodesIndex[a.id])throw'The node "'+a.id+'" already exists.';var b,c=a.id,d=Object.create(null);if(this.settings("clone"))for(b in a)"id"!==b&&(d[b]=a[b]);else d=a;return this.settings("immutable")?Object.defineProperty(d,"id",{value:c,enumerable:!0}):d.id=c,this.inNeighborsIndex[c]=Object.create(null),this.outNeighborsIndex[c]=Object.create(null),this.allNeighborsIndex[c]=Object.create(null),this.inNeighborsCount[c]=0,this.outNeighborsCount[c]=0,this.allNeighborsCount[c]=0,this.nodesArray.push(d),this.nodesIndex[d.id]=d,this}),k.addMethod("addEdge",function(a){if(Object(a)!==a||1!==arguments.length)throw"addEdge: Wrong arguments.";if("string"!=typeof a.id&&"number"!=typeof a.id)throw"The edge must have a string or number id.";if("string"!=typeof a.source&&"number"!=typeof a.source||!this.nodesIndex[a.source])throw"The edge source must have an existing node id.";if("string"!=typeof a.target&&"number"!=typeof a.target||!this.nodesIndex[a.target])throw"The edge target must have an existing node id.";if(this.edgesIndex[a.id])throw'The edge "'+a.id+'" already exists.';var b,c=Object.create(null);if(this.settings("clone"))for(b in a)"id"!==b&&"source"!==b&&"target"!==b&&(c[b]=a[b]);else c=a;return this.settings("immutable")?(Object.defineProperty(c,"id",{value:a.id,enumerable:!0}),Object.defineProperty(c,"source",{value:a.source,enumerable:!0}),Object.defineProperty(c,"target",{value:a.target,enumerable:!0})):(c.id=a.id,c.source=a.source,c.target=a.target),this.edgesArray.push(c),this.edgesIndex[c.id]=c,this.inNeighborsIndex[c.target][c.source]||(this.inNeighborsIndex[c.target][c.source]=Object.create(null)),this.inNeighborsIndex[c.target][c.source][c.id]=c,this.outNeighborsIndex[c.source][c.target]||(this.outNeighborsIndex[c.source][c.target]=Object.create(null)),this.outNeighborsIndex[c.source][c.target][c.id]=c,this.allNeighborsIndex[c.source][c.target]||(this.allNeighborsIndex[c.source][c.target]=Object.create(null)),this.allNeighborsIndex[c.source][c.target][c.id]=c,c.target!==c.source&&(this.allNeighborsIndex[c.target][c.source]||(this.allNeighborsIndex[c.target][c.source]=Object.create(null)),this.allNeighborsIndex[c.target][c.source][c.id]=c),this.inNeighborsCount[c.target]++,this.outNeighborsCount[c.source]++,this.allNeighborsCount[c.target]++,this.allNeighborsCount[c.source]++,this}),k.addMethod("dropNode",function(a){if("string"!=typeof a&&"number"!=typeof a||1!==arguments.length)throw"dropNode: Wrong arguments.";if(!this.nodesIndex[a])throw'The node "'+a+'" does not exist.';var b,c,d;for(delete this.nodesIndex[a],b=0,d=this.nodesArray.length;d>b;b++)if(this.nodesArray[b].id===a){this.nodesArray.splice(b,1);break}for(b=this.edgesArray.length-1;b>=0;b--)(this.edgesArray[b].source===a||this.edgesArray[b].target===a)&&this.dropEdge(this.edgesArray[b].id);delete this.inNeighborsIndex[a],delete this.outNeighborsIndex[a],delete this.allNeighborsIndex[a],delete this.inNeighborsCount[a],delete this.outNeighborsCount[a],delete this.allNeighborsCount[a];for(c in this.nodesIndex)delete this.inNeighborsIndex[c][a],delete this.outNeighborsIndex[c][a],delete this.allNeighborsIndex[c][a];return this}),k.addMethod("dropEdge",function(a){if("string"!=typeof a&&"number"!=typeof a||1!==arguments.length)throw"dropEdge: Wrong arguments.";if(!this.edgesIndex[a])throw'The edge "'+a+'" does not exist.';var b,c,d;for(d=this.edgesIndex[a],delete this.edgesIndex[a],b=0,c=this.edgesArray.length;c>b;b++)if(this.edgesArray[b].id===a){this.edgesArray.splice(b,1);break}return delete this.inNeighborsIndex[d.target][d.source][d.id],Object.keys(this.inNeighborsIndex[d.target][d.source]).length||delete this.inNeighborsIndex[d.target][d.source],delete this.outNeighborsIndex[d.source][d.target][d.id],Object.keys(this.outNeighborsIndex[d.source][d.target]).length||delete this.outNeighborsIndex[d.source][d.target],delete this.allNeighborsIndex[d.source][d.target][d.id],Object.keys(this.allNeighborsIndex[d.source][d.target]).length||delete this.allNeighborsIndex[d.source][d.target],d.target!==d.source&&(delete this.allNeighborsIndex[d.target][d.source][d.id],Object.keys(this.allNeighborsIndex[d.target][d.source]).length||delete this.allNeighborsIndex[d.target][d.source]),this.inNeighborsCount[d.target]--,this.outNeighborsCount[d.source]--,this.allNeighborsCount[d.source]--,this.allNeighborsCount[d.target]--,this}),k.addMethod("kill",function(){this.nodesArray.length=0,this.edgesArray.length=0,delete this.nodesArray,delete this.edgesArray,delete this.nodesIndex,delete this.edgesIndex,delete this.inNeighborsIndex,delete this.outNeighborsIndex,delete this.allNeighborsIndex,
delete this.inNeighborsCount,delete this.outNeighborsCount,delete this.allNeighborsCount}),k.addMethod("clear",function(){return this.nodesArray.length=0,this.edgesArray.length=0,c(this.nodesIndex),c(this.edgesIndex),c(this.nodesIndex),c(this.inNeighborsIndex),c(this.outNeighborsIndex),c(this.allNeighborsIndex),c(this.inNeighborsCount),c(this.outNeighborsCount),c(this.allNeighborsCount),this}),k.addMethod("read",function(a){var b,c,d;for(c=a.nodes||[],b=0,d=c.length;d>b;b++)this.addNode(c[b]);for(c=a.edges||[],b=0,d=c.length;d>b;b++)this.addEdge(c[b]);return this}),k.addMethod("nodes",function(a){if(!arguments.length)return this.nodesArray.slice(0);if(1===arguments.length&&("string"==typeof a||"number"==typeof a))return this.nodesIndex[a];if(1===arguments.length&&"[object Array]"===Object.prototype.toString.call(a)){var b,c,d=[];for(b=0,c=a.length;c>b;b++){if("string"!=typeof a[b]&&"number"!=typeof a[b])throw"nodes: Wrong arguments.";d.push(this.nodesIndex[a[b]])}return d}throw"nodes: Wrong arguments."}),k.addMethod("degree",function(a,b){if(b={"in":this.inNeighborsCount,out:this.outNeighborsCount}[b||""]||this.allNeighborsCount,"string"==typeof a||"number"==typeof a)return b[a];if("[object Array]"===Object.prototype.toString.call(a)){var c,d,e=[];for(c=0,d=a.length;d>c;c++){if("string"!=typeof a[c]&&"number"!=typeof a[c])throw"degree: Wrong arguments.";e.push(b[a[c]])}return e}throw"degree: Wrong arguments."}),k.addMethod("edges",function(a){if(!arguments.length)return this.edgesArray.slice(0);if(1===arguments.length&&("string"==typeof a||"number"==typeof a))return this.edgesIndex[a];if(1===arguments.length&&"[object Array]"===Object.prototype.toString.call(a)){var b,c,d=[];for(b=0,c=a.length;c>b;b++){if("string"!=typeof a[b]&&"number"!=typeof a[b])throw"edges: Wrong arguments.";d.push(this.edgesIndex[a[b]])}return d}throw"edges: Wrong arguments."}),"undefined"!=typeof sigma?(sigma.classes=sigma.classes||Object.create(null),sigma.classes.graph=k):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=k),exports.graph=k):this.graph=k}.call(this),function(a){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.classes"),sigma.classes.camera=function(a,b,c,d){sigma.classes.dispatcher.extend(this),Object.defineProperty(this,"graph",{value:b}),Object.defineProperty(this,"id",{value:a}),Object.defineProperty(this,"readPrefix",{value:"read_cam"+a+":"}),Object.defineProperty(this,"prefix",{value:"cam"+a+":"}),this.x=0,this.y=0,this.ratio=1,this.angle=0,this.isAnimated=!1,this.settings="object"==typeof d&&d?c.embedObject(d):c},sigma.classes.camera.prototype.goTo=function(b){if(!this.settings("enableCamera"))return this;var c,d,e=b||{},f=["x","y","ratio","angle"];for(c=0,d=f.length;d>c;c++)if(e[f[c]]!==a){if("number"!=typeof e[f[c]]||isNaN(e[f[c]]))throw'Value for "'+f[c]+'" is not a number.';this[f[c]]=e[f[c]]}return this.dispatchEvent("coordinatesUpdated"),this},sigma.classes.camera.prototype.applyView=function(b,c,d){d=d||{},c=c!==a?c:this.prefix,b=b!==a?b:this.readPrefix;var e,f,g,h=d.nodes||this.graph.nodes(),i=d.edges||this.graph.edges(),j=Math.cos(this.angle),k=Math.sin(this.angle),l=Math.pow(this.ratio,this.settings("nodesPowRatio")),m=Math.pow(this.ratio,this.settings("edgesPowRatio"));for(e=0,f=h.length;f>e;e++)g=h[e],g[c+"x"]=(((g[b+"x"]||0)-this.x)*j+((g[b+"y"]||0)-this.y)*k)/this.ratio+(d.width||0)/2,g[c+"y"]=(((g[b+"y"]||0)-this.y)*j-((g[b+"x"]||0)-this.x)*k)/this.ratio+(d.height||0)/2,g[c+"size"]=(g[b+"size"]||0)/l;for(e=0,f=i.length;f>e;e++)i[e][c+"size"]=(i[e][b+"size"]||0)/m;return this},sigma.classes.camera.prototype.graphPosition=function(a,b,c){var d=0,e=0,f=Math.cos(this.angle),g=Math.sin(this.angle);return c||(d=-(this.x*f+this.y*g)/this.ratio,e=-(this.y*f-this.x*g)/this.ratio),{x:(a*f+b*g)/this.ratio+d,y:(b*f-a*g)/this.ratio+e}},sigma.classes.camera.prototype.cameraPosition=function(a,b,c){var d=0,e=0,f=Math.cos(this.angle),g=Math.sin(this.angle);return c||(d=-(this.x*f+this.y*g)/this.ratio,e=-(this.y*f-this.x*g)/this.ratio),{x:((a-d)*f-(b-e)*g)*this.ratio,y:((b-e)*f+(a-d)*g)*this.ratio}},sigma.classes.camera.prototype.getMatrix=function(){var a=sigma.utils.matrices.scale(1/this.ratio),b=sigma.utils.matrices.rotation(this.angle),c=sigma.utils.matrices.translation(-this.x,-this.y),d=sigma.utils.matrices.multiply(c,sigma.utils.matrices.multiply(b,a));return d},sigma.classes.camera.prototype.getRectangle=function(a,b){var c=this.cameraPosition(a,0,!0),d=this.cameraPosition(0,b,!0),e=this.cameraPosition(a/2,b/2,!0),f=this.cameraPosition(a/4,0,!0).x,g=this.cameraPosition(0,b/4,!0).y;return{x1:this.x-e.x-f,y1:this.y-e.y-g,x2:this.x-e.x+f+c.x,y2:this.y-e.y-g+c.y,height:Math.sqrt(Math.pow(d.x,2)+Math.pow(d.y+2*g,2))}}}.call(this),function(a){"use strict";function b(a,b){var c=b.x+b.width/2,d=b.y+b.height/2,e=a.y<d,f=a.x<c;return e?f?0:1:f?2:3}function c(a,b){for(var c=[],d=0;4>d;d++)a.x2>=b[d][0].x&&a.x1<=b[d][1].x&&a.y1+a.height>=b[d][0].y&&a.y1<=b[d][2].y&&c.push(d);return c}function d(a,b){for(var c=[],d=0;4>d;d++)j.collision(a,b[d])&&c.push(d);return c}function e(a,b){var c,d,e=b.level+1,f=Math.round(b.bounds.width/2),g=Math.round(b.bounds.height/2),h=Math.round(b.bounds.x),j=Math.round(b.bounds.y);switch(a){case 0:c=h,d=j;break;case 1:c=h+f,d=j;break;case 2:c=h,d=j+g;break;case 3:c=h+f,d=j+g}return i({x:c,y:d,width:f,height:g},e,b.maxElements,b.maxLevel)}function f(b,d,g){if(g.level<g.maxLevel)for(var h=c(d,g.corners),i=0,j=h.length;j>i;i++)g.nodes[h[i]]===a&&(g.nodes[h[i]]=e(h[i],g)),f(b,d,g.nodes[h[i]]);else g.elements.push(b)}function g(c,d){if(d.level<d.maxLevel){var e=b(c,d.bounds);return d.nodes[e]!==a?g(c,d.nodes[e]):[]}return d.elements}function h(b,c,d,e){if(e=e||{},c.level<c.maxLevel)for(var f=d(b,c.corners),g=0,i=f.length;i>g;g++)c.nodes[f[g]]!==a&&h(b,c.nodes[f[g]],d,e);else for(var j=0,k=c.elements.length;k>j;j++)e[c.elements[j].id]===a&&(e[c.elements[j].id]=c.elements[j]);return e}function i(a,b,c,d){return{level:b||0,bounds:a,corners:j.splitSquare(a),maxElements:c||20,maxLevel:d||4,elements:[],nodes:[]}}var j={pointToSquare:function(a){return{x1:a.x-a.size,y1:a.y-a.size,x2:a.x+a.size,y2:a.y-a.size,height:2*a.size}},isAxisAligned:function(a){return a.x1===a.x2||a.y1===a.y2},axisAlignedTopPoints:function(a){return a.y1===a.y2&&a.x1<a.x2?a:a.x1===a.x2&&a.y2>a.y1?{x1:a.x1-a.height,y1:a.y1,x2:a.x1,y2:a.y1,height:a.height}:a.x1===a.x2&&a.y2<a.y1?{x1:a.x1,y1:a.y2,x2:a.x2+a.height,y2:a.y2,height:a.height}:{x1:a.x2,y1:a.y1-a.height,x2:a.x1,y2:a.y1-a.height,height:a.height}},lowerLeftCoor:function(a){var b=Math.sqrt((a.x2-a.x1)*(a.x2-a.x1)+(a.y2-a.y1)*(a.y2-a.y1));return{x:a.x1-(a.y2-a.y1)*a.height/b,y:a.y1+(a.x2-a.x1)*a.height/b}},lowerRightCoor:function(a,b){return{x:b.x-a.x1+a.x2,y:b.y-a.y1+a.y2}},rectangleCorners:function(a){var b=this.lowerLeftCoor(a),c=this.lowerRightCoor(a,b);return[{x:a.x1,y:a.y1},{x:a.x2,y:a.y2},{x:b.x,y:b.y},{x:c.x,y:c.y}]},splitSquare:function(a){return[[{x:a.x,y:a.y},{x:a.x+a.width/2,y:a.y},{x:a.x,y:a.y+a.height/2},{x:a.x+a.width/2,y:a.y+a.height/2}],[{x:a.x+a.width/2,y:a.y},{x:a.x+a.width,y:a.y},{x:a.x+a.width/2,y:a.y+a.height/2},{x:a.x+a.width,y:a.y+a.height/2}],[{x:a.x,y:a.y+a.height/2},{x:a.x+a.width/2,y:a.y+a.height/2},{x:a.x,y:a.y+a.height},{x:a.x+a.width/2,y:a.y+a.height}],[{x:a.x+a.width/2,y:a.y+a.height/2},{x:a.x+a.width,y:a.y+a.height/2},{x:a.x+a.width/2,y:a.y+a.height},{x:a.x+a.width,y:a.y+a.height}]]},axis:function(a,b){return[{x:a[1].x-a[0].x,y:a[1].y-a[0].y},{x:a[1].x-a[3].x,y:a[1].y-a[3].y},{x:b[0].x-b[2].x,y:b[0].y-b[2].y},{x:b[0].x-b[1].x,y:b[0].y-b[1].y}]},projection:function(a,b){var c=(a.x*b.x+a.y*b.y)/(b.x*b.x+b.y*b.y);return{x:c*b.x,y:c*b.y}},axisCollision:function(a,b,c){for(var d=[],e=[],f=0;4>f;f++){var g=this.projection(b[f],a),h=this.projection(c[f],a);d.push(g.x*a.x+g.y*a.y),e.push(h.x*a.x+h.y*a.y)}var i=Math.max.apply(Math,d),j=Math.max.apply(Math,e),k=Math.min.apply(Math,d),l=Math.min.apply(Math,e);return i>=l&&j>=k},collision:function(a,b){for(var c=this.axis(a,b),d=!0,e=0;4>e;e++)d=d&&this.axisCollision(c[e],a,b);return d}},k=function(){this._geom=j,this._tree=null,this._cache={query:!1,result:!1}};k.prototype.index=function(a,b){if(!b.bounds)throw"sigma.classes.quad.index: bounds information not given.";var c=b.prefix||"";this._tree=i(b.bounds,0,b.maxElements,b.maxLevel);for(var d=0,e=a.length;e>d;d++)f(a[d],j.pointToSquare({x:a[d][c+"x"],y:a[d][c+"y"],size:a[d][c+"size"]}),this._tree);return this._cache={query:!1,result:!1},this._tree},k.prototype.point=function(a,b){return this._tree?g({x:a,y:b},this._tree)||[]:[]},k.prototype.area=function(a){var b,e,f=JSON.stringify(a);if(this._cache.query===f)return this._cache.result;j.isAxisAligned(a)?(b=c,e=j.axisAlignedTopPoints(a)):(b=d,e=j.rectangleCorners(a));var g=this._tree?h(e,this._tree,b):[],i=[];for(var k in g)i.push(g[k]);return this._cache.query=f,this._cache.result=i,i},"undefined"!=typeof this.sigma?(this.sigma.classes=this.sigma.classes||{},this.sigma.classes.quad=k):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=k),exports.quad=k):this.quad=k}.call(this),function(a){"use strict";function b(a,b){var c=b.x+b.width/2,d=b.y+b.height/2,e=a.y<d,f=a.x<c;return e?f?0:1:f?2:3}function c(a,b){for(var c=[],d=0;4>d;d++)a.x2>=b[d][0].x&&a.x1<=b[d][1].x&&a.y1+a.height>=b[d][0].y&&a.y1<=b[d][2].y&&c.push(d);return c}function d(a,b){for(var c=[],d=0;4>d;d++)j.collision(a,b[d])&&c.push(d);return c}function e(a,b){var c,d,e=b.level+1,f=Math.round(b.bounds.width/2),g=Math.round(b.bounds.height/2),h=Math.round(b.bounds.x),j=Math.round(b.bounds.y);switch(a){case 0:c=h,d=j;break;case 1:c=h+f,d=j;break;case 2:c=h,d=j+g;break;case 3:c=h+f,d=j+g}return i({x:c,y:d,width:f,height:g},e,b.maxElements,b.maxLevel)}function f(b,d,g){if(g.level<g.maxLevel)for(var h=c(d,g.corners),i=0,j=h.length;j>i;i++)g.nodes[h[i]]===a&&(g.nodes[h[i]]=e(h[i],g)),f(b,d,g.nodes[h[i]]);else g.elements.push(b)}function g(c,d){if(d.level<d.maxLevel){var e=b(c,d.bounds);return d.nodes[e]!==a?g(c,d.nodes[e]):[]}return d.elements}function h(b,c,d,e){if(e=e||{},c.level<c.maxLevel)for(var f=d(b,c.corners),g=0,i=f.length;i>g;g++)c.nodes[f[g]]!==a&&h(b,c.nodes[f[g]],d,e);else for(var j=0,k=c.elements.length;k>j;j++)e[c.elements[j].id]===a&&(e[c.elements[j].id]=c.elements[j]);return e}function i(a,b,c,d){return{level:b||0,bounds:a,corners:j.splitSquare(a),maxElements:c||40,maxLevel:d||8,elements:[],nodes:[]}}var j={pointToSquare:function(a){return{x1:a.x-a.size,y1:a.y-a.size,x2:a.x+a.size,y2:a.y-a.size,height:2*a.size}},lineToSquare:function(a){return a.y1<a.y2?a.x1<a.x2?{x1:a.x1-a.size,y1:a.y1-a.size,x2:a.x2+a.size,y2:a.y1-a.size,height:a.y2-a.y1+2*a.size}:{x1:a.x2-a.size,y1:a.y1-a.size,x2:a.x1+a.size,y2:a.y1-a.size,height:a.y2-a.y1+2*a.size}:a.x1<a.x2?{x1:a.x1-a.size,y1:a.y2-a.size,x2:a.x2+a.size,y2:a.y2-a.size,height:a.y1-a.y2+2*a.size}:{x1:a.x2-a.size,y1:a.y2-a.size,x2:a.x1+a.size,y2:a.y2-a.size,height:a.y1-a.y2+2*a.size}},quadraticCurveToSquare:function(a,b){var c=sigma.utils.getPointOnQuadraticCurve(.5,a.x1,a.y1,a.x2,a.y2,b.x,b.y),d=Math.min(a.x1,a.x2,c.x),e=Math.max(a.x1,a.x2,c.x),f=Math.min(a.y1,a.y2,c.y),g=Math.max(a.y1,a.y2,c.y);return{x1:d-a.size,y1:f-a.size,x2:e+a.size,y2:f-a.size,height:g-f+2*a.size}},selfLoopToSquare:function(a){var b=sigma.utils.getSelfLoopControlPoints(a.x,a.y,a.size),c=Math.min(a.x,b.x1,b.x2),d=Math.max(a.x,b.x1,b.x2),e=Math.min(a.y,b.y1,b.y2),f=Math.max(a.y,b.y1,b.y2);return{x1:c-a.size,y1:e-a.size,x2:d+a.size,y2:e-a.size,height:f-e+2*a.size}},isAxisAligned:function(a){return a.x1===a.x2||a.y1===a.y2},axisAlignedTopPoints:function(a){return a.y1===a.y2&&a.x1<a.x2?a:a.x1===a.x2&&a.y2>a.y1?{x1:a.x1-a.height,y1:a.y1,x2:a.x1,y2:a.y1,height:a.height}:a.x1===a.x2&&a.y2<a.y1?{x1:a.x1,y1:a.y2,x2:a.x2+a.height,y2:a.y2,height:a.height}:{x1:a.x2,y1:a.y1-a.height,x2:a.x1,y2:a.y1-a.height,height:a.height}},lowerLeftCoor:function(a){var b=Math.sqrt((a.x2-a.x1)*(a.x2-a.x1)+(a.y2-a.y1)*(a.y2-a.y1));return{x:a.x1-(a.y2-a.y1)*a.height/b,y:a.y1+(a.x2-a.x1)*a.height/b}},lowerRightCoor:function(a,b){return{x:b.x-a.x1+a.x2,y:b.y-a.y1+a.y2}},rectangleCorners:function(a){var b=this.lowerLeftCoor(a),c=this.lowerRightCoor(a,b);return[{x:a.x1,y:a.y1},{x:a.x2,y:a.y2},{x:b.x,y:b.y},{x:c.x,y:c.y}]},splitSquare:function(a){return[[{x:a.x,y:a.y},{x:a.x+a.width/2,y:a.y},{x:a.x,y:a.y+a.height/2},{x:a.x+a.width/2,y:a.y+a.height/2}],[{x:a.x+a.width/2,y:a.y},{x:a.x+a.width,y:a.y},{x:a.x+a.width/2,y:a.y+a.height/2},{x:a.x+a.width,y:a.y+a.height/2}],[{x:a.x,y:a.y+a.height/2},{x:a.x+a.width/2,y:a.y+a.height/2},{x:a.x,y:a.y+a.height},{x:a.x+a.width/2,y:a.y+a.height}],[{x:a.x+a.width/2,y:a.y+a.height/2},{x:a.x+a.width,y:a.y+a.height/2},{x:a.x+a.width/2,y:a.y+a.height},{x:a.x+a.width,y:a.y+a.height}]]},axis:function(a,b){return[{x:a[1].x-a[0].x,y:a[1].y-a[0].y},{x:a[1].x-a[3].x,y:a[1].y-a[3].y},{x:b[0].x-b[2].x,y:b[0].y-b[2].y},{x:b[0].x-b[1].x,y:b[0].y-b[1].y}]},projection:function(a,b){var c=(a.x*b.x+a.y*b.y)/(b.x*b.x+b.y*b.y);return{x:c*b.x,y:c*b.y}},axisCollision:function(a,b,c){for(var d=[],e=[],f=0;4>f;f++){var g=this.projection(b[f],a),h=this.projection(c[f],a);d.push(g.x*a.x+g.y*a.y),e.push(h.x*a.x+h.y*a.y)}var i=Math.max.apply(Math,d),j=Math.max.apply(Math,e),k=Math.min.apply(Math,d),l=Math.min.apply(Math,e);return i>=l&&j>=k},collision:function(a,b){for(var c=this.axis(a,b),d=!0,e=0;4>e;e++)d=d&&this.axisCollision(c[e],a,b);return d}},k=function(){this._geom=j,this._tree=null,this._cache={query:!1,result:!1},this._enabled=!0};k.prototype.index=function(a,b){if(!this._enabled)return this._tree;if(!b.bounds)throw"sigma.classes.edgequad.index: bounds information not given.";var c,d,e,g,h,k=b.prefix||"";this._tree=i(b.bounds,0,b.maxElements,b.maxLevel);for(var l=a.edges(),m=0,n=l.length;n>m;m++)d=a.nodes(l[m].source),e=a.nodes(l[m].target),h={x1:d[k+"x"],y1:d[k+"y"],x2:e[k+"x"],y2:e[k+"y"],size:l[m][k+"size"]||0},"curve"===l[m].type||"curvedArrow"===l[m].type?d.id===e.id?(g={x:d[k+"x"],y:d[k+"y"],size:d[k+"size"]||0},f(l[m],j.selfLoopToSquare(g),this._tree)):(c=sigma.utils.getQuadraticControlPoint(h.x1,h.y1,h.x2,h.y2),f(l[m],j.quadraticCurveToSquare(h,c),this._tree)):f(l[m],j.lineToSquare(h),this._tree);return this._cache={query:!1,result:!1},this._tree},k.prototype.point=function(a,b){return this._enabled&&this._tree?g({x:a,y:b},this._tree)||[]:[]},k.prototype.area=function(a){if(!this._enabled)return[];var b,e,f=JSON.stringify(a);if(this._cache.query===f)return this._cache.result;j.isAxisAligned(a)?(b=c,e=j.axisAlignedTopPoints(a)):(b=d,e=j.rectangleCorners(a));var g=this._tree?h(e,this._tree,b):[],i=[];for(var k in g)i.push(g[k]);return this._cache.query=f,this._cache.result=i,i},"undefined"!=typeof this.sigma?(this.sigma.classes=this.sigma.classes||{},this.sigma.classes.edgequad=k):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=k),exports.edgequad=k):this.edgequad=k}.call(this),function(a){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.captors"),sigma.captors.mouse=function(a,b,c){function d(a){var b,c,d;return y("mouseEnabled")&&(v.dispatchEvent("mousemove",sigma.utils.mouseCoords(a)),q)?(r=!0,s=!0,u&&clearTimeout(u),u=setTimeout(function(){r=!1},y("dragTimeout")),sigma.misc.animation.killAll(x),x.isMoving=!0,d=x.cameraPosition(sigma.utils.getX(a)-o,sigma.utils.getY(a)-p,!0),b=k-d.x,c=l-d.y,(b!==x.x||c!==x.y)&&(m=x.x,n=x.y,x.goTo({x:b,y:c})),a.preventDefault?a.preventDefault():a.returnValue=!1,a.stopPropagation(),!1):void 0}function e(a){if(y("mouseEnabled")&&q){q=!1,u&&clearTimeout(u),x.isMoving=!1;var b=sigma.utils.getX(a),c=sigma.utils.getY(a);r?(sigma.misc.animation.killAll(x),sigma.misc.animation.camera(x,{x:x.x+y("mouseInertiaRatio")*(x.x-m),y:x.y+y("mouseInertiaRatio")*(x.y-n)},{easing:"quadraticOut",duration:y("mouseInertiaDuration")})):(o!==b||p!==c)&&x.goTo({x:x.x,y:x.y}),v.dispatchEvent("mouseup",sigma.utils.mouseCoords(a)),r=!1}}function f(a){if(y("mouseEnabled"))switch(k=x.x,l=x.y,m=x.x,n=x.y,o=sigma.utils.getX(a),p=sigma.utils.getY(a),s=!1,t=(new Date).getTime(),a.which){case 2:break;case 3:v.dispatchEvent("rightclick",sigma.utils.mouseCoords(a,o,p));break;default:q=!0,v.dispatchEvent("mousedown",sigma.utils.mouseCoords(a,o,p))}}function g(a){y("mouseEnabled")&&v.dispatchEvent("mouseout")}function h(a){if(y("mouseEnabled")){var b=sigma.utils.mouseCoords(a);b.isDragging=(new Date).getTime()-t>100&&s,v.dispatchEvent("click",b)}return a.preventDefault?a.preventDefault():a.returnValue=!1,a.stopPropagation(),!1}function i(a){var b,c,d;return y("mouseEnabled")?(c=1/y("doubleClickZoomingRatio"),v.dispatchEvent("doubleclick",sigma.utils.mouseCoords(a,o,p)),y("doubleClickEnabled")&&(b=x.cameraPosition(sigma.utils.getX(a)-sigma.utils.getCenter(a).x,sigma.utils.getY(a)-sigma.utils.getCenter(a).y,!0),d={duration:y("doubleClickZoomDuration")},sigma.utils.zoomTo(x,b.x,b.y,c,d)),a.preventDefault?a.preventDefault():a.returnValue=!1,a.stopPropagation(),!1):void 0}function j(a){var b,c,d;return y("mouseEnabled")&&y("mouseWheelEnabled")?(c=sigma.utils.getDelta(a)>0?1/y("zoomingRatio"):y("zoomingRatio"),b=x.cameraPosition(sigma.utils.getX(a)-sigma.utils.getCenter(a).x,sigma.utils.getY(a)-sigma.utils.getCenter(a).y,!0),d={duration:y("mouseZoomDuration")},sigma.utils.zoomTo(x,b.x,b.y,c,d),a.preventDefault?a.preventDefault():a.returnValue=!1,a.stopPropagation(),!1):void 0}var k,l,m,n,o,p,q,r,s,t,u,v=this,w=a,x=b,y=c;sigma.classes.dispatcher.extend(this),sigma.utils.doubleClick(w,"click",i),w.addEventListener("DOMMouseScroll",j,!1),w.addEventListener("mousewheel",j,!1),w.addEventListener("mousemove",d,!1),w.addEventListener("mousedown",f,!1),w.addEventListener("click",h,!1),w.addEventListener("mouseout",g,!1),document.addEventListener("mouseup",e,!1),this.kill=function(){sigma.utils.unbindDoubleClick(w,"click"),w.removeEventListener("DOMMouseScroll",j),w.removeEventListener("mousewheel",j),w.removeEventListener("mousemove",d),w.removeEventListener("mousedown",f),w.removeEventListener("click",h),w.removeEventListener("mouseout",g),document.removeEventListener("mouseup",e)}}}.call(this),function(a){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.captors"),sigma.captors.touch=function(a,b,c){function d(a){var b=sigma.utils.getOffset(B);return{x:a.pageX-b.left,y:a.pageY-b.top}}function e(a){if(D("touchEnabled")){var b,c,e,f,g,h;switch(E=a.touches,E.length){case 1:C.isMoving=!0,w=1,i=C.x,j=C.y,m=C.x,n=C.y,g=d(E[0]),q=g.x,r=g.y;break;case 2:return C.isMoving=!0,w=2,g=d(E[0]),h=d(E[1]),b=g.x,e=g.y,c=h.x,f=h.y,m=C.x,n=C.y,k=C.angle,l=C.ratio,i=C.x,j=C.y,q=b,r=e,s=c,t=f,u=Math.atan2(t-r,s-q),v=Math.sqrt((t-r)*(t-r)+(s-q)*(s-q)),a.preventDefault(),!1}}}function f(a){if(D("touchEnabled")){E=a.touches;var b=D("touchInertiaRatio");switch(z&&(x=!1,clearTimeout(z)),w){case 2:if(1===a.touches.length){e(a),a.preventDefault();break}case 1:C.isMoving=!1,A.dispatchEvent("stopDrag"),x&&(y=!1,sigma.misc.animation.camera(C,{x:C.x+b*(C.x-m),y:C.y+b*(C.y-n)},{easing:"quadraticOut",duration:D("touchInertiaDuration")})),x=!1,w=0}}}function g(a){if(!y&&D("touchEnabled")){var b,c,e,f,g,h,B,F,G,H,I,J,K,L,M,N,O;switch(E=a.touches,x=!0,z&&clearTimeout(z),z=setTimeout(function(){x=!1},D("dragTimeout")),w){case 1:F=d(E[0]),b=F.x,e=F.y,H=C.cameraPosition(b-q,e-r,!0),L=i-H.x,M=j-H.y,(L!==C.x||M!==C.y)&&(m=C.x,n=C.y,C.goTo({x:L,y:M}),A.dispatchEvent("mousemove",sigma.utils.mouseCoords(a,F.x,F.y)),A.dispatchEvent("drag"));break;case 2:F=d(E[0]),G=d(E[1]),b=F.x,e=F.y,c=G.x,f=G.y,I=C.cameraPosition((q+s)/2-sigma.utils.getCenter(a).x,(r+t)/2-sigma.utils.getCenter(a).y,!0),B=C.cameraPosition((b+c)/2-sigma.utils.getCenter(a).x,(e+f)/2-sigma.utils.getCenter(a).y,!0),J=Math.atan2(f-e,c-b)-u,K=Math.sqrt((f-e)*(f-e)+(c-b)*(c-b))/v,b=I.x,e=I.y,N=l/K,b*=K,e*=K,O=k-J,g=Math.cos(-J),h=Math.sin(-J),c=b*g+e*h,f=e*g-b*h,b=c,e=f,L=b-B.x+i,M=e-B.y+j,(N!==C.ratio||O!==C.angle||L!==C.x||M!==C.y)&&(m=C.x,n=C.y,o=C.angle,p=C.ratio,C.goTo({x:L,y:M,angle:O,ratio:N}),A.dispatchEvent("drag"))}return a.preventDefault(),!1}}function h(a){var b,c,e;return a.touches&&1===a.touches.length&&D("touchEnabled")?(y=!0,c=1/D("doubleClickZoomingRatio"),b=d(a.touches[0]),A.dispatchEvent("doubleclick",sigma.utils.mouseCoords(a,b.x,b.y)),D("doubleClickEnabled")&&(b=C.cameraPosition(b.x-sigma.utils.getCenter(a).x,b.y-sigma.utils.getCenter(a).y,!0),e={duration:D("doubleClickZoomDuration"),onComplete:function(){y=!1}},sigma.utils.zoomTo(C,b.x,b.y,c,e)),a.preventDefault?a.preventDefault():a.returnValue=!1,a.stopPropagation(),!1):void 0}var i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A=this,B=a,C=b,D=c,E=[];sigma.classes.dispatcher.extend(this),sigma.utils.doubleClick(B,"touchstart",h),B.addEventListener("touchstart",e,!1),B.addEventListener("touchend",f,!1),B.addEventListener("touchcancel",f,!1),B.addEventListener("touchleave",f,!1),B.addEventListener("touchmove",g,!1),this.kill=function(){sigma.utils.unbindDoubleClick(B,"touchstart"),B.addEventListener("touchstart",e),B.addEventListener("touchend",f),B.addEventListener("touchcancel",f),B.addEventListener("touchleave",f),B.addEventListener("touchmove",g)}}}.call(this),function(a){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";if("undefined"==typeof conrad)throw"conrad is not declared";sigma.utils.pkg("sigma.renderers"),sigma.renderers.canvas=function(a,b,c,d){if("object"!=typeof d)throw"sigma.renderers.canvas: Wrong arguments.";if(!(d.container instanceof HTMLElement))throw"Container not found.";var e,f,g,h;for(sigma.classes.dispatcher.extend(this),Object.defineProperty(this,"conradId",{value:sigma.utils.id()}),this.graph=a,this.camera=b,this.contexts={},this.domElements={},this.options=d,this.container=this.options.container,this.settings="object"==typeof d.settings&&d.settings?c.embedObjects(d.settings):c,this.nodesOnScreen=[],this.edgesOnScreen=[],this.jobs={},this.options.prefix="renderer"+this.conradId+":",this.settings("batchEdgesDrawing")?(this.initDOM("canvas","edges"),this.initDOM("canvas","scene"),this.contexts.nodes=this.contexts.scene,this.contexts.labels=this.contexts.scene):(this.initDOM("canvas","scene"),this.contexts.edges=this.contexts.scene,this.contexts.nodes=this.contexts.scene,this.contexts.labels=this.contexts.scene),this.initDOM("canvas","mouse"),this.contexts.hover=this.contexts.mouse,this.captors=[],g=this.options.captors||[sigma.captors.mouse,sigma.captors.touch],e=0,f=g.length;f>e;e++)h="function"==typeof g[e]?g[e]:sigma.captors[g[e]],this.captors.push(new h(this.domElements.mouse,this.camera,this.settings));sigma.misc.bindEvents.call(this,this.options.prefix),sigma.misc.drawHovers.call(this,this.options.prefix),this.resize(!1)},sigma.renderers.canvas.applyRenderers=function(a){var b,c,d,e=a.elements,f={font:a.ctx.font},g=a.elements||"edges"==a.type?"defaultEdgeType":"defaultNodeType";for(a.start=a.start||0,a.end=a.end||a.elements.length,a.end=Math.min(a.elements.length,a.end),a.ctx.save(),b=a.start;b<a.end;b++)e[b].hidden||(c=a.renderers[e[b].type||a.settings(g)],d=c||a.renderers.def,"edges"==a.type?d(e[b],a.graph.nodes(e[b].source),a.graph.nodes(e[b].target),a.ctx,a.settings,{ctx:f}):d(e[b],a.ctx,a.settings,{ctx:f}));a.ctx.restore()},sigma.renderers.canvas.prototype.renderEdges=function(a,b,c){var d={renderers:sigma.canvas.edges,type:"edges",elements:this.edgesOnScreen,ctx:this.contexts.edges,start:a,end:b,graph:this.graph,settings:c};sigma.renderers.canvas.applyRenderers(d),c("drawEdgeLabels")&&(d.renderers=sigma.canvas.edges.labels,d.ctx=this.contexts.labels,sigma.renderers.canvas.applyRenderers(d))},sigma.renderers.canvas.prototype.render=function(b){b=b||{},this.dispatchEvent("beforeRender");var c,d,e,f,g,h,i,j,k,l,m,n,o={},p=this.graph,q=this.graph.nodes,r=(this.options.prefix||"",this.settings(b,"drawEdges")),s=this.settings(b,"drawNodes"),t=this.settings(b,"drawLabels"),u=this.settings.embedObjects(b,{prefix:this.options.prefix});this.resize(!1),this.settings(b,"hideEdgesOnMove")&&(this.camera.isAnimated||this.camera.isMoving)&&(r=!1),this.camera.applyView(a,this.options.prefix,{width:this.width,height:this.height}),this.clear();for(e in this.jobs)conrad.hasJob(e)&&conrad.killJob(e);for(this.nodesOnScreen=this.camera.quadtree.area(this.camera.getRectangle(this.width,this.height)),c=this.nodesOnScreen,d=0,f=c.length;f>d;d++)o[c[d].id]=c[d];if(r){if(this.edgesOnScreen=[],u("edgesClippingWithNodes"))for(c=p.edges(),d=0,f=c.length;f>d;d++)g=c[d],!o[g.source]&&!o[g.target]||g.hidden||q(g.source).hidden||q(g.target).hidden||this.edgesOnScreen.push(g);else this.edgesOnScreen=this.camera.edgequadtree.area(this.camera.getRectangle(this.width,this.height));u("batchEdgesDrawing")?(h="edges_"+this.conradId,m=u("canvasEdgesBatchSize"),l=this.edgesOnScreen,f=l.length,k=0,i=Math.min(l.length,k+m),j=function(){return n=this.contexts.edges.globalCompositeOperation,this.contexts.edges.globalCompositeOperation="destination-over",this.renderEdges(k,i,u),this.contexts.edges.globalCompositeOperation=n,i===l.length?(delete this.jobs[h],!1):(k=i+1,i=Math.min(l.length,k+m),!0)},this.jobs[h]=j,conrad.addJob(h,j.bind(this))):this.renderEdges(0,this.edgesOnScreen.length,u)}return s&&sigma.renderers.canvas.applyRenderers({renderers:sigma.canvas.nodes,type:"nodes",ctx:this.contexts.nodes,elements:this.nodesOnScreen,settings:u}),t&&sigma.renderers.canvas.applyRenderers({renderers:sigma.canvas.labels,type:"nodes",ctx:this.contexts.labels,elements:this.nodesOnScreen,settings:u}),this.dispatchEvent("render"),this},sigma.renderers.canvas.prototype.initDOM=function(a,b){var c=document.createElement(a);c.style.position="absolute",c.setAttribute("class","sigma-"+b),this.domElements[b]=c,this.container.appendChild(c),"canvas"===a.toLowerCase()&&(this.contexts[b]=c.getContext("2d"))},sigma.renderers.canvas.prototype.resize=function(b,c){var d,e=this.width,f=this.height,g=sigma.utils.getPixelRatio();if(b!==a&&c!==a?(this.width=b,this.height=c):(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,b=this.width,c=this.height),e!==this.width||f!==this.height)for(d in this.domElements)this.domElements[d].style.width=b+"px",this.domElements[d].style.height=c+"px","canvas"===this.domElements[d].tagName.toLowerCase()&&(this.domElements[d].setAttribute("width",b*g+"px"),this.domElements[d].setAttribute("height",c*g+"px"),1!==g&&this.contexts[d].scale(g,g));return this},sigma.renderers.canvas.prototype.clear=function(){for(var a in this.contexts)this.contexts[a].clearRect(0,0,this.width,this.height);return this},sigma.renderers.canvas.prototype.kill=function(){for(var a,b;b=this.captors.pop();)b.kill();delete this.captors;for(a in this.domElements)this.domElements[a].parentNode.removeChild(this.domElements[a]),delete this.domElements[a],delete this.contexts[a];delete this.domElements,delete this.contexts},sigma.utils.pkg("sigma.canvas.nodes"),sigma.utils.pkg("sigma.canvas.edges"),sigma.utils.pkg("sigma.canvas.labels")}.call(this),function(a){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.renderers"),sigma.renderers.webgl=function(a,b,c,d){if("object"!=typeof d)throw"sigma.renderers.webgl: Wrong arguments.";if(!(d.container instanceof HTMLElement))throw"Container not found.";sigma.utils.isWebGLSupported()||alert("WebGL is not supported by your browser");var e,f,g,h;for(sigma.classes.dispatcher.extend(this),this.jobs={},Object.defineProperty(this,"conradId",{value:sigma.utils.id()}),this.graph=a,this.camera=b,this.contexts={},this.domElements={},this.options=d,this.container=this.options.container,this.settings="object"==typeof d.settings&&d.settings?c.embedObjects(d.settings):c,this.options.prefix=this.camera.readPrefix,Object.defineProperty(this,"nodePrograms",{value:{}}),Object.defineProperty(this,"edgePrograms",{value:{}}),Object.defineProperty(this,"nodeFloatArrays",{value:{}}),Object.defineProperty(this,"edgeFloatArrays",{value:{}}),this.settings(d,"batchEdgesDrawing")?(this.initDOM("canvas","edges",!0),this.initDOM("canvas","nodes",!0)):(this.initDOM("canvas","scene",!0),this.contexts.nodes=this.contexts.scene,this.contexts.edges=this.contexts.scene),this.initDOM("canvas","labels"),this.initDOM("canvas","mouse"),this.contexts.hover=this.contexts.mouse,this.captors=[],g=this.options.captors||[sigma.captors.mouse,sigma.captors.touch],e=0,f=g.length;f>e;e++)h="function"==typeof g[e]?g[e]:sigma.captors[g[e]],this.captors.push(new h(this.domElements.mouse,this.camera,this.settings));sigma.misc.bindEvents.call(this,this.camera.prefix),sigma.misc.drawHovers.call(this,this.camera.prefix),this.resize()},sigma.renderers.webgl.prototype.process=function(){var a,b,c,d,e,f,g=this.graph,h=sigma.utils.extend(h,this.options);for(d in this.nodeFloatArrays)delete this.nodeFloatArrays[d];for(d in this.edgeFloatArrays)delete this.edgeFloatArrays[d];for(a=g.edges(),b=0,c=a.length;c>b;b++)e=a[b].type||this.settings(h,"defaultEdgeType"),d=e&&sigma.webgl.edges[e]?e:"def",this.edgeFloatArrays[d]||(this.edgeFloatArrays[d]={edges:[]}),this.edgeFloatArrays[d].edges.push(a[b]);for(a=g.nodes(),b=0,c=a.length;c>b;b++)e=a[b].type||this.settings(h,"defaultNodeType"),d=e&&sigma.webgl.nodes[e]?e:"def",this.nodeFloatArrays[d]||(this.nodeFloatArrays[d]={nodes:[]}),this.nodeFloatArrays[d].nodes.push(a[b]);for(d in this.edgeFloatArrays)for(f=sigma.webgl.edges[d],a=this.edgeFloatArrays[d].edges,b=0,c=a.length;c>b;b++)this.edgeFloatArrays[d].array||(this.edgeFloatArrays[d].array=new Float32Array(a.length*f.POINTS*f.ATTRIBUTES)),a[b].hidden||g.nodes(a[b].source).hidden||g.nodes(a[b].target).hidden||f.addEdge(a[b],g.nodes(a[b].source),g.nodes(a[b].target),this.edgeFloatArrays[d].array,b*f.POINTS*f.ATTRIBUTES,h.prefix,this.settings);for(d in this.nodeFloatArrays)for(f=sigma.webgl.nodes[d],a=this.nodeFloatArrays[d].nodes,b=0,c=a.length;c>b;b++)this.nodeFloatArrays[d].array||(this.nodeFloatArrays[d].array=new Float32Array(a.length*f.POINTS*f.ATTRIBUTES)),a[b].hidden||f.addNode(a[b],this.nodeFloatArrays[d].array,b*f.POINTS*f.ATTRIBUTES,h.prefix,this.settings);return this},sigma.renderers.webgl.prototype.render=function(b){var c,d,e,f,g=this,h=(this.graph,this.contexts.nodes),i=this.contexts.edges,j=this.camera.getMatrix(),k=sigma.utils.extend(b,this.options),l=this.settings(k,"drawLabels"),m=this.settings(k,"drawEdges"),n=this.settings(k,"drawNodes");this.dispatchEvent("beforeRender"),this.resize(!1),this.settings(k,"hideEdgesOnMove")&&(this.camera.isAnimated||this.camera.isMoving)&&(m=!1),this.clear(),j=sigma.utils.matrices.multiply(j,sigma.utils.matrices.translation(this.width/2,this.height/2));for(d in this.jobs)conrad.hasJob(d)&&conrad.killJob(d);if(m)if(this.settings(k,"batchEdgesDrawing"))(function(){var a,b,c,d,e,f,g,h,l;c="edges_"+this.conradId,l=this.settings(k,"webglEdgesBatchSize"),a=Object.keys(this.edgeFloatArrays),a.length&&(b=0,h=sigma.webgl.edges[a[b]],e=this.edgeFloatArrays[a[b]].array,g=0,f=Math.min(g+l*h.POINTS,e.length/h.ATTRIBUTES),d=function(){return this.edgePrograms[a[b]]||(this.edgePrograms[a[b]]=h.initProgram(i)),f>g&&(i.useProgram(this.edgePrograms[a[b]]),h.render(i,this.edgePrograms[a[b]],e,{settings:this.settings,matrix:j,width:this.width,height:this.height,ratio:this.camera.ratio,scalingRatio:this.settings(k,"webglOversamplingRatio"),start:g,count:f-g})),f>=e.length/h.ATTRIBUTES&&b===a.length-1?(delete this.jobs[c],!1):(f>=e.length/h.ATTRIBUTES?(b++,e=this.edgeFloatArrays[a[b]].array,h=sigma.webgl.edges[a[b]],g=0,f=Math.min(g+l*h.POINTS,e.length/h.ATTRIBUTES)):(g=f,f=Math.min(g+l*h.POINTS,e.length/h.ATTRIBUTES)),!0)},this.jobs[c]=d,conrad.addJob(c,d.bind(this)))}).call(this);else for(d in this.edgeFloatArrays)f=sigma.webgl.edges[d],this.edgePrograms[d]||(this.edgePrograms[d]=f.initProgram(i)),this.edgeFloatArrays[d]&&(i.useProgram(this.edgePrograms[d]),f.render(i,this.edgePrograms[d],this.edgeFloatArrays[d].array,{
settings:this.settings,matrix:j,width:this.width,height:this.height,ratio:this.camera.ratio,scalingRatio:this.settings(k,"webglOversamplingRatio")}));if(n){h.blendFunc(h.SRC_ALPHA,h.ONE_MINUS_SRC_ALPHA),h.enable(h.BLEND);for(d in this.nodeFloatArrays)f=sigma.webgl.nodes[d],this.nodePrograms[d]||(this.nodePrograms[d]=f.initProgram(h)),this.nodeFloatArrays[d]&&(h.useProgram(this.nodePrograms[d]),f.render(h,this.nodePrograms[d],this.nodeFloatArrays[d].array,{settings:this.settings,matrix:j,width:this.width,height:this.height,ratio:this.camera.ratio,scalingRatio:this.settings(k,"webglOversamplingRatio")}))}return l&&(c=this.camera.quadtree.area(this.camera.getRectangle(this.width,this.height)),this.camera.applyView(a,a,{nodes:c,edges:[],width:this.width,height:this.height}),e=function(a){return g.settings({prefix:g.camera.prefix},a)},sigma.renderers.canvas.applyRenderers({renderers:sigma.canvas.labels,type:"nodes",ctx:this.contexts.labels,elements:c,settings:e})),this.dispatchEvent("render"),this},sigma.renderers.webgl.prototype.initDOM=function(a,b,c){var d=document.createElement(a),e=this;d.style.position="absolute",d.setAttribute("class","sigma-"+b),this.domElements[b]=d,this.container.appendChild(d),"canvas"===a.toLowerCase()&&(this.contexts[b]=d.getContext(c?"experimental-webgl":"2d",{preserveDrawingBuffer:!0}),c&&(d.addEventListener("webglcontextlost",function(a){a.preventDefault()},!1),d.addEventListener("webglcontextrestored",function(a){e.render()},!1)))},sigma.renderers.webgl.prototype.resize=function(b,c){var d,e=this.width,f=this.height,g=sigma.utils.getPixelRatio();if(b!==a&&c!==a?(this.width=b,this.height=c):(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,b=this.width,c=this.height),e!==this.width||f!==this.height)for(d in this.domElements)this.domElements[d].style.width=b+"px",this.domElements[d].style.height=c+"px","canvas"===this.domElements[d].tagName.toLowerCase()&&(this.contexts[d]&&this.contexts[d].scale?(this.domElements[d].setAttribute("width",b*g+"px"),this.domElements[d].setAttribute("height",c*g+"px"),1!==g&&this.contexts[d].scale(g,g)):(this.domElements[d].setAttribute("width",b*this.settings("webglOversamplingRatio")+"px"),this.domElements[d].setAttribute("height",c*this.settings("webglOversamplingRatio")+"px")));for(d in this.contexts)this.contexts[d]&&this.contexts[d].viewport&&this.contexts[d].viewport(0,0,this.width*this.settings("webglOversamplingRatio"),this.height*this.settings("webglOversamplingRatio"));return this},sigma.renderers.webgl.prototype.clear=function(){return this.contexts.labels.clearRect(0,0,this.width,this.height),this.contexts.nodes.clear(this.contexts.nodes.COLOR_BUFFER_BIT),this.contexts.edges.clear(this.contexts.edges.COLOR_BUFFER_BIT),this},sigma.renderers.webgl.prototype.kill=function(){for(var a,b;b=this.captors.pop();)b.kill();delete this.captors;for(a in this.domElements)this.domElements[a].parentNode.removeChild(this.domElements[a]),delete this.domElements[a],delete this.contexts[a];delete this.domElements,delete this.contexts},sigma.utils.pkg("sigma.webgl.nodes"),sigma.utils.pkg("sigma.webgl.edges"),sigma.utils.pkg("sigma.canvas.labels")}.call(this),function(a){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";if("undefined"==typeof conrad)throw"conrad is not declared";sigma.utils.pkg("sigma.renderers"),sigma.renderers.svg=function(a,b,c,d){if("object"!=typeof d)throw"sigma.renderers.svg: Wrong arguments.";if(!(d.container instanceof HTMLElement))throw"Container not found.";var e,f,g,h,i=this;for(sigma.classes.dispatcher.extend(this),this.graph=a,this.camera=b,this.domElements={graph:null,groups:{},nodes:{},edges:{},labels:{},hovers:{}},this.measurementCanvas=null,this.options=d,this.container=this.options.container,this.settings="object"==typeof d.settings&&d.settings?c.embedObjects(d.settings):c,this.settings("freeStyle",!!this.options.freeStyle),this.settings("xmlns","http://www.w3.org/2000/svg"),this.nodesOnScreen=[],this.edgesOnScreen=[],this.options.prefix="renderer"+sigma.utils.id()+":",this.initDOM("svg"),this.captors=[],g=this.options.captors||[sigma.captors.mouse,sigma.captors.touch],e=0,f=g.length;f>e;e++)h="function"==typeof g[e]?g[e]:sigma.captors[g[e]],this.captors.push(new h(this.domElements.graph,this.camera,this.settings));window.addEventListener("resize",function(){i.resize()}),sigma.misc.bindDOMEvents.call(this,this.domElements.graph),this.bindHovers(this.options.prefix),this.resize(!1)},sigma.renderers.svg.prototype.render=function(b){b=b||{},this.dispatchEvent("beforeRender");var c,d,e,f,g,h,i,j,k,l={},m=this.graph,n=this.graph.nodes,o=(this.options.prefix||"",this.settings(b,"drawEdges")),p=this.settings(b,"drawNodes"),q=(this.settings(b,"drawLabels"),this.settings.embedObjects(b,{prefix:this.options.prefix,forceLabels:this.options.forceLabels}));for(this.settings(b,"hideEdgesOnMove")&&(this.camera.isAnimated||this.camera.isMoving)&&(o=!1),this.camera.applyView(a,this.options.prefix,{width:this.width,height:this.height}),this.hideDOMElements(this.domElements.nodes),this.hideDOMElements(this.domElements.edges),this.hideDOMElements(this.domElements.labels),this.edgesOnScreen=[],this.nodesOnScreen=this.camera.quadtree.area(this.camera.getRectangle(this.width,this.height)),c=this.nodesOnScreen,d=0,f=c.length;f>d;d++)l[c[d].id]=c[d];for(c=m.edges(),d=0,f=c.length;f>d;d++)g=c[d],!l[g.source]&&!l[g.target]||g.hidden||n(g.source).hidden||n(g.target).hidden||this.edgesOnScreen.push(g);if(j=sigma.svg.nodes,k=sigma.svg.labels,p)for(c=this.nodesOnScreen,d=0,f=c.length;f>d;d++)c[d].hidden||this.domElements.nodes[c[d].id]||(e=(j[c[d].type]||j.def).create(c[d],q),this.domElements.nodes[c[d].id]=e,this.domElements.groups.nodes.appendChild(e),e=(k[c[d].type]||k.def).create(c[d],q),this.domElements.labels[c[d].id]=e,this.domElements.groups.labels.appendChild(e));if(p)for(c=this.nodesOnScreen,d=0,f=c.length;f>d;d++)c[d].hidden||((j[c[d].type]||j.def).update(c[d],this.domElements.nodes[c[d].id],q),(k[c[d].type]||k.def).update(c[d],this.domElements.labels[c[d].id],q));if(j=sigma.svg.edges,o)for(c=this.edgesOnScreen,d=0,f=c.length;f>d;d++)this.domElements.edges[c[d].id]||(h=n(c[d].source),i=n(c[d].target),e=(j[c[d].type]||j.def).create(c[d],h,i,q),this.domElements.edges[c[d].id]=e,this.domElements.groups.edges.appendChild(e));if(o)for(c=this.edgesOnScreen,d=0,f=c.length;f>d;d++)h=n(c[d].source),i=n(c[d].target),(j[c[d].type]||j.def).update(c[d],this.domElements.edges[c[d].id],h,i,q);return this.dispatchEvent("render"),this},sigma.renderers.svg.prototype.initDOM=function(a){var b,c,d,e=document.createElementNS(this.settings("xmlns"),a),f=this.settings("classPrefix");e.style.position="absolute",e.setAttribute("class",f+"-svg"),e.setAttribute("xmlns",this.settings("xmlns")),e.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),e.setAttribute("version","1.1");var g=document.createElement("canvas");g.setAttribute("class",f+"-measurement-canvas"),this.domElements.graph=this.container.appendChild(e);var h=["edges","nodes","labels","hovers"];for(d=0,c=h.length;c>d;d++)b=document.createElementNS(this.settings("xmlns"),"g"),b.setAttributeNS(null,"id",f+"-group-"+h[d]),b.setAttributeNS(null,"class",f+"-group"),this.domElements.groups[h[d]]=this.domElements.graph.appendChild(b);this.container.appendChild(g),this.measurementCanvas=g.getContext("2d")},sigma.renderers.svg.prototype.hideDOMElements=function(a){var b,c;for(c in a)b=a[c],sigma.svg.utils.hide(b);return this},sigma.renderers.svg.prototype.bindHovers=function(a){function b(b){var c,g=f.settings.embedObjects({prefix:a});if(g("enableHovering"))if(b.data.enter.nodes.length>0){c=b.data.enter.nodes[0];var h=(e[c.type]||e.def).create(c,f.domElements.nodes[c.id],f.measurementCanvas,g);f.domElements.hovers[c.id]=h,f.domElements.groups.hovers.appendChild(h),d=c}else b.data.leave.nodes.length>0&&(c=b.data.leave.nodes[0],f.domElements.groups.hovers.removeChild(f.domElements.hovers[c.id]),d=null,delete f.domElements.hovers[c.id],f.domElements.groups.nodes.appendChild(f.domElements.nodes[c.id]))}function c(){if(d){var b=f.settings.embedObjects({prefix:a});f.domElements.groups.hovers.removeChild(f.domElements.hovers[d.id]),delete f.domElements.hovers[d.id];var c=(e[d.type]||e.def).create(d,f.domElements.nodes[d.id],f.measurementCanvas,b);f.domElements.hovers[d.id]=c,f.domElements.groups.hovers.appendChild(c)}}var d,e=sigma.svg.hovers,f=this;this.bind("hovers",b),this.bind("render",c)},sigma.renderers.svg.prototype.resize=function(){var a=this.width,b=this.height;return this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,(a!==this.width||b!==this.height)&&(this.domElements.graph.style.width=this.width+"px",this.domElements.graph.style.height=this.height+"px"),this},sigma.utils.pkg("sigma.svg.nodes"),sigma.utils.pkg("sigma.svg.edges"),sigma.utils.pkg("sigma.svg.labels")}.call(this),function(a){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.renderers"),sigma.renderers.def=sigma.utils.isWebGLSupported()?sigma.renderers.webgl:sigma.renderers.canvas}(this),function(){"use strict";sigma.utils.pkg("sigma.webgl.nodes"),sigma.webgl.nodes.def={POINTS:3,ATTRIBUTES:5,addNode:function(a,b,c,d,e){var f=sigma.utils.floatColor(a.color||e("defaultNodeColor"));b[c++]=a[d+"x"],b[c++]=a[d+"y"],b[c++]=a[d+"size"],b[c++]=f,b[c++]=0,b[c++]=a[d+"x"],b[c++]=a[d+"y"],b[c++]=a[d+"size"],b[c++]=f,b[c++]=2*Math.PI/3,b[c++]=a[d+"x"],b[c++]=a[d+"y"],b[c++]=a[d+"size"],b[c++]=f,b[c++]=4*Math.PI/3},render:function(a,b,c,d){var e,f=a.getAttribLocation(b,"a_position"),g=a.getAttribLocation(b,"a_size"),h=a.getAttribLocation(b,"a_color"),i=a.getAttribLocation(b,"a_angle"),j=a.getUniformLocation(b,"u_resolution"),k=a.getUniformLocation(b,"u_matrix"),l=a.getUniformLocation(b,"u_ratio"),m=a.getUniformLocation(b,"u_scale");e=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,e),a.bufferData(a.ARRAY_BUFFER,c,a.DYNAMIC_DRAW),a.uniform2f(j,d.width,d.height),a.uniform1f(l,1/Math.pow(d.ratio,d.settings("nodesPowRatio"))),a.uniform1f(m,d.scalingRatio),a.uniformMatrix3fv(k,!1,d.matrix),a.enableVertexAttribArray(f),a.enableVertexAttribArray(g),a.enableVertexAttribArray(h),a.enableVertexAttribArray(i),a.vertexAttribPointer(f,2,a.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),a.vertexAttribPointer(g,1,a.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),a.vertexAttribPointer(h,1,a.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,12),a.vertexAttribPointer(i,1,a.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,16),a.drawArrays(a.TRIANGLES,d.start||0,d.count||c.length/this.ATTRIBUTES)},initProgram:function(a){var b,c,d;return b=sigma.utils.loadShader(a,["attribute vec2 a_position;","attribute float a_size;","attribute float a_color;","attribute float a_angle;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform float u_scale;","uniform mat3 u_matrix;","varying vec4 color;","varying vec2 center;","varying float radius;","void main() {","radius = a_size * u_ratio;","vec2 position = (u_matrix * vec3(a_position, 1)).xy;","center = position * u_scale;","center = vec2(center.x, u_scale * u_resolution.y - center.y);","position = position +","2.0 * radius * vec2(cos(a_angle), sin(a_angle));","position = (position / u_resolution * 2.0 - 1.0) * vec2(1, -1);","radius = radius * u_scale;","gl_Position = vec4(position, 0, 1);","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),a.VERTEX_SHADER),c=sigma.utils.loadShader(a,["precision mediump float;","varying vec4 color;","varying vec2 center;","varying float radius;","void main(void) {","vec4 color0 = vec4(0.0, 0.0, 0.0, 0.0);","vec2 m = gl_FragCoord.xy - center;","float diff = radius - sqrt(m.x * m.x + m.y * m.y);","if (diff > 0.0)","gl_FragColor = color;","else","gl_FragColor = color0;","}"].join("\n"),a.FRAGMENT_SHADER),d=sigma.utils.loadProgram(a,[b,c])}}}(),function(){"use strict";sigma.utils.pkg("sigma.webgl.nodes"),sigma.webgl.nodes.fast={POINTS:1,ATTRIBUTES:4,addNode:function(a,b,c,d,e){b[c++]=a[d+"x"],b[c++]=a[d+"y"],b[c++]=a[d+"size"],b[c++]=sigma.utils.floatColor(a.color||e("defaultNodeColor"))},render:function(a,b,c,d){var e,f=a.getAttribLocation(b,"a_position"),g=a.getAttribLocation(b,"a_size"),h=a.getAttribLocation(b,"a_color"),i=a.getUniformLocation(b,"u_resolution"),j=a.getUniformLocation(b,"u_matrix"),k=a.getUniformLocation(b,"u_ratio"),l=a.getUniformLocation(b,"u_scale");e=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,e),a.bufferData(a.ARRAY_BUFFER,c,a.DYNAMIC_DRAW),a.uniform2f(i,d.width,d.height),a.uniform1f(k,1/Math.pow(d.ratio,d.settings("nodesPowRatio"))),a.uniform1f(l,d.scalingRatio),a.uniformMatrix3fv(j,!1,d.matrix),a.enableVertexAttribArray(f),a.enableVertexAttribArray(g),a.enableVertexAttribArray(h),a.vertexAttribPointer(f,2,a.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),a.vertexAttribPointer(g,1,a.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),a.vertexAttribPointer(h,1,a.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,12),a.drawArrays(a.POINTS,d.start||0,d.count||c.length/this.ATTRIBUTES)},initProgram:function(a){var b,c,d;return b=sigma.utils.loadShader(a,["attribute vec2 a_position;","attribute float a_size;","attribute float a_color;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform float u_scale;","uniform mat3 u_matrix;","varying vec4 color;","void main() {","gl_Position = vec4(","((u_matrix * vec3(a_position, 1)).xy /","u_resolution * 2.0 - 1.0) * vec2(1, -1),","0,","1",");","gl_PointSize = a_size * u_ratio * u_scale * 2.0;","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),a.VERTEX_SHADER),c=sigma.utils.loadShader(a,["precision mediump float;","varying vec4 color;","void main(void) {","gl_FragColor = color;","}"].join("\n"),a.FRAGMENT_SHADER),d=sigma.utils.loadProgram(a,[b,c])}}}(),function(){"use strict";sigma.utils.pkg("sigma.webgl.edges"),sigma.webgl.edges.def={POINTS:6,ATTRIBUTES:7,addEdge:function(a,b,c,d,e,f,g){var h=(a[f+"size"]||1)/2,i=b[f+"x"],j=b[f+"y"],k=c[f+"x"],l=c[f+"y"],m=a.color;if(!m)switch(g("edgeColor")){case"source":m=b.color||g("defaultNodeColor");break;case"target":m=c.color||g("defaultNodeColor");break;default:m=g("defaultEdgeColor")}m=sigma.utils.floatColor(m),d[e++]=i,d[e++]=j,d[e++]=k,d[e++]=l,d[e++]=h,d[e++]=0,d[e++]=m,d[e++]=k,d[e++]=l,d[e++]=i,d[e++]=j,d[e++]=h,d[e++]=1,d[e++]=m,d[e++]=k,d[e++]=l,d[e++]=i,d[e++]=j,d[e++]=h,d[e++]=0,d[e++]=m,d[e++]=k,d[e++]=l,d[e++]=i,d[e++]=j,d[e++]=h,d[e++]=0,d[e++]=m,d[e++]=i,d[e++]=j,d[e++]=k,d[e++]=l,d[e++]=h,d[e++]=1,d[e++]=m,d[e++]=i,d[e++]=j,d[e++]=k,d[e++]=l,d[e++]=h,d[e++]=0,d[e++]=m},render:function(a,b,c,d){var e,f=a.getAttribLocation(b,"a_color"),g=a.getAttribLocation(b,"a_position1"),h=a.getAttribLocation(b,"a_position2"),i=a.getAttribLocation(b,"a_thickness"),j=a.getAttribLocation(b,"a_minus"),k=a.getUniformLocation(b,"u_resolution"),l=a.getUniformLocation(b,"u_matrix"),m=a.getUniformLocation(b,"u_matrixHalfPi"),n=a.getUniformLocation(b,"u_matrixHalfPiMinus"),o=a.getUniformLocation(b,"u_ratio"),p=a.getUniformLocation(b,"u_scale");e=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,e),a.bufferData(a.ARRAY_BUFFER,c,a.STATIC_DRAW),a.uniform2f(k,d.width,d.height),a.uniform1f(o,d.ratio/Math.pow(d.ratio,d.settings("edgesPowRatio"))),a.uniform1f(p,d.scalingRatio),a.uniformMatrix3fv(l,!1,d.matrix),a.uniformMatrix2fv(m,!1,sigma.utils.matrices.rotation(Math.PI/2,!0)),a.uniformMatrix2fv(n,!1,sigma.utils.matrices.rotation(-Math.PI/2,!0)),a.enableVertexAttribArray(f),a.enableVertexAttribArray(g),a.enableVertexAttribArray(h),a.enableVertexAttribArray(i),a.enableVertexAttribArray(j),a.vertexAttribPointer(g,2,a.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),a.vertexAttribPointer(h,2,a.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),a.vertexAttribPointer(i,1,a.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,16),a.vertexAttribPointer(j,1,a.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,20),a.vertexAttribPointer(f,1,a.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,24),a.drawArrays(a.TRIANGLES,d.start||0,d.count||c.length/this.ATTRIBUTES)},initProgram:function(a){var b,c,d;return b=sigma.utils.loadShader(a,["attribute vec2 a_position1;","attribute vec2 a_position2;","attribute float a_thickness;","attribute float a_minus;","attribute float a_color;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform float u_scale;","uniform mat3 u_matrix;","uniform mat2 u_matrixHalfPi;","uniform mat2 u_matrixHalfPiMinus;","varying vec4 color;","void main() {","vec2 position = a_thickness * u_ratio *","normalize(a_position2 - a_position1);","mat2 matrix = a_minus * u_matrixHalfPiMinus +","(1.0 - a_minus) * u_matrixHalfPi;","position = matrix * position + a_position1;","gl_Position = vec4(","((u_matrix * vec3(position, 1)).xy /","u_resolution * 2.0 - 1.0) * vec2(1, -1),","0,","1",");","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),a.VERTEX_SHADER),c=sigma.utils.loadShader(a,["precision mediump float;","varying vec4 color;","void main(void) {","gl_FragColor = color;","}"].join("\n"),a.FRAGMENT_SHADER),d=sigma.utils.loadProgram(a,[b,c])}}}(),function(){"use strict";sigma.utils.pkg("sigma.webgl.edges"),sigma.webgl.edges.fast={POINTS:2,ATTRIBUTES:3,addEdge:function(a,b,c,d,e,f,g){var h=((a[f+"size"]||1)/2,b[f+"x"]),i=b[f+"y"],j=c[f+"x"],k=c[f+"y"],l=a.color;if(!l)switch(g("edgeColor")){case"source":l=b.color||g("defaultNodeColor");break;case"target":l=c.color||g("defaultNodeColor");break;default:l=g("defaultEdgeColor")}l=sigma.utils.floatColor(l),d[e++]=h,d[e++]=i,d[e++]=l,d[e++]=j,d[e++]=k,d[e++]=l},render:function(a,b,c,d){var e,f=a.getAttribLocation(b,"a_color"),g=a.getAttribLocation(b,"a_position"),h=a.getUniformLocation(b,"u_resolution"),i=a.getUniformLocation(b,"u_matrix");e=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,e),a.bufferData(a.ARRAY_BUFFER,c,a.DYNAMIC_DRAW),a.uniform2f(h,d.width,d.height),a.uniformMatrix3fv(i,!1,d.matrix),a.enableVertexAttribArray(g),a.enableVertexAttribArray(f),a.vertexAttribPointer(g,2,a.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),a.vertexAttribPointer(f,1,a.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),a.lineWidth(3),a.drawArrays(a.LINES,d.start||0,d.count||c.length/this.ATTRIBUTES)},initProgram:function(a){var b,c,d;return b=sigma.utils.loadShader(a,["attribute vec2 a_position;","attribute float a_color;","uniform vec2 u_resolution;","uniform mat3 u_matrix;","varying vec4 color;","void main() {","gl_Position = vec4(","((u_matrix * vec3(a_position, 1)).xy /","u_resolution * 2.0 - 1.0) * vec2(1, -1),","0,","1",");","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),a.VERTEX_SHADER),c=sigma.utils.loadShader(a,["precision mediump float;","varying vec4 color;","void main(void) {","gl_FragColor = color;","}"].join("\n"),a.FRAGMENT_SHADER),d=sigma.utils.loadProgram(a,[b,c])}}}(),function(){"use strict";sigma.utils.pkg("sigma.webgl.edges"),sigma.webgl.edges.arrow={POINTS:9,ATTRIBUTES:11,addEdge:function(a,b,c,d,e,f,g){var h=(a[f+"size"]||1)/2,i=b[f+"x"],j=b[f+"y"],k=c[f+"x"],l=c[f+"y"],m=c[f+"size"],n=a.color;if(!n)switch(g("edgeColor")){case"source":n=b.color||g("defaultNodeColor");break;case"target":n=c.color||g("defaultNodeColor");break;default:n=g("defaultEdgeColor")}n=sigma.utils.floatColor(n),d[e++]=i,d[e++]=j,d[e++]=k,d[e++]=l,d[e++]=h,d[e++]=m,d[e++]=0,d[e++]=0,d[e++]=0,d[e++]=0,d[e++]=n,d[e++]=k,d[e++]=l,d[e++]=i,d[e++]=j,d[e++]=h,d[e++]=m,d[e++]=1,d[e++]=1,d[e++]=0,d[e++]=0,d[e++]=n,d[e++]=k,d[e++]=l,d[e++]=i,d[e++]=j,d[e++]=h,d[e++]=m,d[e++]=1,d[e++]=0,d[e++]=0,d[e++]=0,d[e++]=n,d[e++]=k,d[e++]=l,d[e++]=i,d[e++]=j,d[e++]=h,d[e++]=m,d[e++]=1,d[e++]=0,d[e++]=0,d[e++]=0,d[e++]=n,d[e++]=i,d[e++]=j,d[e++]=k,d[e++]=l,d[e++]=h,d[e++]=m,d[e++]=0,d[e++]=1,d[e++]=0,d[e++]=0,d[e++]=n,d[e++]=i,d[e++]=j,d[e++]=k,d[e++]=l,d[e++]=h,d[e++]=m,d[e++]=0,d[e++]=0,d[e++]=0,d[e++]=0,d[e++]=n,d[e++]=k,d[e++]=l,d[e++]=i,d[e++]=j,d[e++]=h,d[e++]=m,d[e++]=1,d[e++]=0,d[e++]=1,d[e++]=-1,d[e++]=n,d[e++]=k,d[e++]=l,d[e++]=i,d[e++]=j,d[e++]=h,d[e++]=m,d[e++]=1,d[e++]=0,d[e++]=1,d[e++]=0,d[e++]=n,d[e++]=k,d[e++]=l,d[e++]=i,d[e++]=j,d[e++]=h,d[e++]=m,d[e++]=1,d[e++]=0,d[e++]=1,d[e++]=1,d[e++]=n},render:function(a,b,c,d){var e,f=a.getAttribLocation(b,"a_pos1"),g=a.getAttribLocation(b,"a_pos2"),h=a.getAttribLocation(b,"a_thickness"),i=a.getAttribLocation(b,"a_tSize"),j=a.getAttribLocation(b,"a_delay"),k=a.getAttribLocation(b,"a_minus"),l=a.getAttribLocation(b,"a_head"),m=a.getAttribLocation(b,"a_headPosition"),n=a.getAttribLocation(b,"a_color"),o=a.getUniformLocation(b,"u_resolution"),p=a.getUniformLocation(b,"u_matrix"),q=a.getUniformLocation(b,"u_matrixHalfPi"),r=a.getUniformLocation(b,"u_matrixHalfPiMinus"),s=a.getUniformLocation(b,"u_ratio"),t=a.getUniformLocation(b,"u_nodeRatio"),u=a.getUniformLocation(b,"u_arrowHead"),v=a.getUniformLocation(b,"u_scale");e=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,e),a.bufferData(a.ARRAY_BUFFER,c,a.STATIC_DRAW),a.uniform2f(o,d.width,d.height),a.uniform1f(s,d.ratio/Math.pow(d.ratio,d.settings("edgesPowRatio"))),a.uniform1f(t,Math.pow(d.ratio,d.settings("nodesPowRatio"))/d.ratio),a.uniform1f(u,5),a.uniform1f(v,d.scalingRatio),a.uniformMatrix3fv(p,!1,d.matrix),a.uniformMatrix2fv(q,!1,sigma.utils.matrices.rotation(Math.PI/2,!0)),a.uniformMatrix2fv(r,!1,sigma.utils.matrices.rotation(-Math.PI/2,!0)),a.enableVertexAttribArray(f),a.enableVertexAttribArray(g),a.enableVertexAttribArray(h),a.enableVertexAttribArray(i),a.enableVertexAttribArray(j),a.enableVertexAttribArray(k),a.enableVertexAttribArray(l),a.enableVertexAttribArray(m),a.enableVertexAttribArray(n),a.vertexAttribPointer(f,2,a.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),a.vertexAttribPointer(g,2,a.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),a.vertexAttribPointer(h,1,a.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,16),a.vertexAttribPointer(i,1,a.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,20),a.vertexAttribPointer(j,1,a.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,24),a.vertexAttribPointer(k,1,a.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,28),a.vertexAttribPointer(l,1,a.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,32),a.vertexAttribPointer(m,1,a.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,36),a.vertexAttribPointer(n,1,a.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,40),a.drawArrays(a.TRIANGLES,d.start||0,d.count||c.length/this.ATTRIBUTES)},initProgram:function(a){var b,c,d;return b=sigma.utils.loadShader(a,["attribute vec2 a_pos1;","attribute vec2 a_pos2;","attribute float a_thickness;","attribute float a_tSize;","attribute float a_delay;","attribute float a_minus;","attribute float a_head;","attribute float a_headPosition;","attribute float a_color;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform float u_nodeRatio;","uniform float u_arrowHead;","uniform float u_scale;","uniform mat3 u_matrix;","uniform mat2 u_matrixHalfPi;","uniform mat2 u_matrixHalfPiMinus;","varying vec4 color;","void main() {","vec2 pos = normalize(a_pos2 - a_pos1);","mat2 matrix = (1.0 - a_head) *","(","a_minus * u_matrixHalfPiMinus +","(1.0 - a_minus) * u_matrixHalfPi",") + a_head * (","a_headPosition * u_matrixHalfPiMinus * 0.6 +","(a_headPosition * a_headPosition - 1.0) * mat2(1.0)",");","pos = a_pos1 + (","(1.0 - a_head) * a_thickness * u_ratio * matrix * pos +","a_head * u_arrowHead * a_thickness * u_ratio * matrix * pos +","a_delay * pos * (","a_tSize / u_nodeRatio +","u_arrowHead * a_thickness * u_ratio",")",");","gl_Position = vec4(","((u_matrix * vec3(pos, 1)).xy /","u_resolution * 2.0 - 1.0) * vec2(1, -1),","0,","1",");","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),a.VERTEX_SHADER),c=sigma.utils.loadShader(a,["precision mediump float;","varying vec4 color;","void main(void) {","gl_FragColor = color;","}"].join("\n"),a.FRAGMENT_SHADER),d=sigma.utils.loadProgram(a,[b,c])}}}(),function(a){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.canvas.labels"),sigma.canvas.labels.def=function(a,b,c,d){var e,f,g,h,i=c("prefix")||"",j=a[i+"size"]||1,k=c("fontStyle"),l=c("borderSize"),m=c("labelAlignment");if(!(j<c("labelThreshold"))&&a.label&&"string"==typeof a.label){e="fixed"===c("labelSize")?c("defaultLabelSize"):c("labelSizeRatio")*j;var n=(k?k+" ":"")+e+"px "+(a.active?c("activeFont")||c("font"):c("font"));switch(d&&d.ctx.font!=n?(b.font=n,d.ctx.font=n):b.font=n,b.fillStyle="node"===c("labelColor")?a.color||c("defaultNodeColor"):c("defaultLabelColor"),g=0,h=e/3,b.textAlign="center",m){case"bottom":h=+j+4*e/3;break;case"center":break;case"left":b.textAlign="right",g=-j-l-3;break;case"top":h=-j-2*e/3;break;case"inside":if(f=sigma.utils.canvas.getTextWidth(b,c("approximateLabelWidth"),e,a.label),2*(j+e/3)>=f)break;case"right":default:g=j+l+3,b.textAlign="left"}b.fillText(a.label,Math.round(a[i+"x"]+g),Math.round(a[i+"y"]+h))}}}.call(this),function(a){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.canvas.hovers"),sigma.canvas.hovers.def=function(a,b,c){function d(a,b,d,f){var g=Math.round(f[h+"x"]),j=Math.round(f[h+"y"]),k=d+4,l=Math.round(i+d/4),m=sigma.utils.canvas.getTextWidth(b,c("approximateLabelWidth"),d,f.label),n=Math.round(m+i+1.5+d/3);if(f.label&&"string"==typeof f.label)switch(a){case"center":break;case"left":g=Math.round(f[h+"x"]+d/2+2),j=Math.round(f[h+"y"]-d/2-2),b.moveTo(g,j+l),b.arcTo(g,j,g-l,j,l),b.lineTo(g-n-e-l,j),b.lineTo(g-n-e-l,j+k),b.lineTo(g-l,j+k),b.arcTo(g,j+k,g,j+k-l,l),b.lineTo(g,j+l);break;case"top":b.rect(g-n/2,j-l-k,n,k);break;case"bottom":b.rect(g-n/2,j+l,n,k);break;case"inside":if(2*l>=m)break;case"right":default:g=Math.round(f[h+"x"]-d/2-2),j=Math.round(f[h+"y"]-d/2-2),b.moveTo(g,j+l),b.arcTo(g,j,g+l,j,l),b.lineTo(g+n+e+l,j),b.lineTo(g+n+e+l,j+k),b.lineTo(g+l,j+k),b.arcTo(g,j+k,g,j+k-l,l),b.lineTo(g,j+l)}b.closePath(),b.fill(),b.shadowOffsetX=0,b.shadowOffsetY=0,b.shadowBlur=0}var e=c("borderSize"),f=c("labelAlignment"),g=c("hoverFontStyle")||c("fontStyle"),h=c("prefix")||"",i=a[h+"size"],j="fixed"===c("labelSize")?c("defaultLabelSize"):c("labelSizeRatio")*i;b.font=(g?g+" ":"")+j+"px "+(c("hoverFont")||c("font")),b.beginPath(),b.fillStyle="node"===c("labelHoverBGColor")?a.color||c("defaultNodeColor"):c("defaultHoverLabelBGColor"),c("labelHoverShadow")&&(b.shadowOffsetX=0,b.shadowOffsetY=0,b.shadowBlur=8,b.shadowColor=c("labelHoverShadowColor")),d(f,b,j,a),e>0&&(b.beginPath(),b.fillStyle="node"===c("nodeBorderColor")?a.color||c("defaultNodeColor"):c("defaultNodeBorderColor"),b.arc(a[h+"x"],a[h+"y"],i+e,0,2*Math.PI,!0),b.closePath(),b.fill());var k=sigma.canvas.nodes[a.type]||sigma.canvas.nodes.def;if(k(a,b,c),a.label&&"string"==typeof a.label){b.fillStyle="node"===c("labelHoverColor")?a.color||c("defaultNodeColor"):c("defaultLabelHoverColor");var l=sigma.utils.canvas.getTextWidth(b,c("approximateLabelWidth"),j,a.label),m=-l/2,n=j/3;switch(f){case"bottom":n=+i+4*j/3;break;case"center":break;case"left":m=-i-e-3-l;break;case"top":n=-i-2*j/3;break;case"inside":if(2*(i+j/3)>=l)break;case"right":default:m=i+e+3}b.fillText(a.label,Math.round(a[h+"x"]+m),Math.round(a[h+"y"]+n))}}}.call(this),function(){"use strict";sigma.utils.pkg("sigma.canvas.nodes"),sigma.canvas.nodes.def=function(a,b,c){var d=c("prefix")||"";b.fillStyle=a.color||c("defaultNodeColor"),b.beginPath(),b.arc(a[d+"x"],a[d+"y"],a[d+"size"],0,2*Math.PI,!0),b.closePath(),b.fill()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.def=function(a,b,c,d,e){var f=a.color,g=e("prefix")||"",h=a[g+"size"]||1,i=e("edgeColor"),j=e("defaultNodeColor"),k=e("defaultEdgeColor");if(!f)switch(i){case"source":f=b.color||j;break;case"target":f=c.color||j;break;default:f=k}d.strokeStyle=f,d.lineWidth=h,d.beginPath(),d.moveTo(b[g+"x"],b[g+"y"]),d.lineTo(c[g+"x"],c[g+"y"]),d.stroke()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.curve=function(a,b,c,d,e){var f=a.color,g=e("prefix")||"",h=a[g+"size"]||1,i=e("edgeColor"),j=e("defaultNodeColor"),k=e("defaultEdgeColor"),l={},m=b[g+"size"],n=b[g+"x"],o=b[g+"y"],p=c[g+"x"],q=c[g+"y"];if(l=b.id===c.id?sigma.utils.getSelfLoopControlPoints(n,o,m):sigma.utils.getQuadraticControlPoint(n,o,p,q),!f)switch(i){case"source":f=b.color||j;break;case"target":f=c.color||j;break;default:f=k}d.strokeStyle=f,d.lineWidth=h,d.beginPath(),d.moveTo(n,o),b.id===c.id?d.bezierCurveTo(l.x1,l.y1,l.x2,l.y2,p,q):d.quadraticCurveTo(l.x,l.y,p,q),d.stroke()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.arrow=function(a,b,c,d,e){var f=a.color,g=e("prefix")||"",h=e("edgeColor"),i=e("defaultNodeColor"),j=e("defaultEdgeColor"),k=a[g+"size"]||1,l=c[g+"size"],m=b[g+"x"],n=b[g+"y"],o=c[g+"x"],p=c[g+"y"],q=Math.max(2.5*k,e("minArrowSize")),r=Math.sqrt((o-m)*(o-m)+(p-n)*(p-n)),s=m+(o-m)*(r-q-l)/r,t=n+(p-n)*(r-q-l)/r,u=(o-m)*q/r,v=(p-n)*q/r;if(!f)switch(h){case"source":f=b.color||i;break;case"target":f=c.color||i;break;default:f=j}d.strokeStyle=f,d.lineWidth=k,d.beginPath(),d.moveTo(m,n),d.lineTo(s,t),d.stroke(),d.fillStyle=f,d.beginPath(),d.moveTo(s+u,t+v),d.lineTo(s+.6*v,t-.6*u),d.lineTo(s-.6*v,t+.6*u),d.lineTo(s+u,t+v),d.closePath(),d.fill()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.curvedArrow=function(a,b,c,d,e){var f,g,h,i,j,k=a.color,l=e("prefix")||"",m=e("edgeColor"),n=e("defaultNodeColor"),o=e("defaultEdgeColor"),p={},q=a[l+"size"]||1,r=c[l+"size"],s=b[l+"x"],t=b[l+"y"],u=c[l+"x"],v=c[l+"y"],w=Math.max(2.5*q,e("minArrowSize"));if(p=b.id===c.id?sigma.utils.getSelfLoopControlPoints(s,t,r):sigma.utils.getQuadraticControlPoint(s,t,u,v),b.id===c.id?(f=Math.sqrt((u-p.x1)*(u-p.x1)+(v-p.y1)*(v-p.y1)),g=p.x1+(u-p.x1)*(f-w-r)/f,h=p.y1+(v-p.y1)*(f-w-r)/f,i=(u-p.x1)*w/f,j=(v-p.y1)*w/f):(f=Math.sqrt((u-p.x)*(u-p.x)+(v-p.y)*(v-p.y)),g=p.x+(u-p.x)*(f-w-r)/f,h=p.y+(v-p.y)*(f-w-r)/f,i=(u-p.x)*w/f,j=(v-p.y)*w/f),!k)switch(m){case"source":k=b.color||n;break;case"target":k=c.color||n;break;default:k=o}d.strokeStyle=k,d.lineWidth=q,d.beginPath(),d.moveTo(s,t),b.id===c.id?d.bezierCurveTo(p.x2,p.y2,p.x1,p.y1,g,h):d.quadraticCurveTo(p.x,p.y,g,h),d.stroke(),d.fillStyle=k,d.beginPath(),d.moveTo(g+i,h+j),d.lineTo(g+.6*j,h-.6*i),d.lineTo(g-.6*j,h+.6*i),d.lineTo(g+i,h+j),d.closePath(),d.fill()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.def=function(a,b,c,d,e){var f=a.color,g=e("prefix")||"",h=a[g+"size"]||1,i=e("edgeColor"),j=e("defaultNodeColor"),k=e("defaultEdgeColor");if(!f)switch(i){case"source":f=b.color||j;break;case"target":f=c.color||j;break;default:f=k}f="edge"===e("edgeHoverColor")?a.hover_color||f:a.hover_color||e("defaultEdgeHoverColor")||f,h*=e("edgeHoverSizeRatio"),d.strokeStyle=f,d.lineWidth=h,d.beginPath(),d.moveTo(b[g+"x"],b[g+"y"]),d.lineTo(c[g+"x"],c[g+"y"]),d.stroke()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.curve=function(a,b,c,d,e){var f=a.color,g=e("prefix")||"",h=e("edgeHoverSizeRatio")*(a[g+"size"]||1),i=e("edgeColor"),j=e("defaultNodeColor"),k=e("defaultEdgeColor"),l={},m=b[g+"size"],n=b[g+"x"],o=b[g+"y"],p=c[g+"x"],q=c[g+"y"];
if(l=b.id===c.id?sigma.utils.getSelfLoopControlPoints(n,o,m):sigma.utils.getQuadraticControlPoint(n,o,p,q),!f)switch(i){case"source":f=b.color||j;break;case"target":f=c.color||j;break;default:f=k}f="edge"===e("edgeHoverColor")?a.hover_color||f:a.hover_color||e("defaultEdgeHoverColor")||f,d.strokeStyle=f,d.lineWidth=h,d.beginPath(),d.moveTo(n,o),b.id===c.id?d.bezierCurveTo(l.x1,l.y1,l.x2,l.y2,p,q):d.quadraticCurveTo(l.x,l.y,p,q),d.stroke()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.arrow=function(a,b,c,d,e){var f=a.color,g=e("prefix")||"",h=e("edgeColor"),i=e("defaultNodeColor"),j=e("defaultEdgeColor"),k=a[g+"size"]||1,l=c[g+"size"],m=b[g+"x"],n=b[g+"y"],o=c[g+"x"],p=c[g+"y"];k=a.hover?e("edgeHoverSizeRatio")*k:k;var q=2.5*k,r=Math.sqrt((o-m)*(o-m)+(p-n)*(p-n)),s=m+(o-m)*(r-q-l)/r,t=n+(p-n)*(r-q-l)/r,u=(o-m)*q/r,v=(p-n)*q/r;if(!f)switch(h){case"source":f=b.color||i;break;case"target":f=c.color||i;break;default:f=j}f="edge"===e("edgeHoverColor")?a.hover_color||f:a.hover_color||e("defaultEdgeHoverColor")||f,d.strokeStyle=f,d.lineWidth=k,d.beginPath(),d.moveTo(m,n),d.lineTo(s,t),d.stroke(),d.fillStyle=f,d.beginPath(),d.moveTo(s+u,t+v),d.lineTo(s+.6*v,t-.6*u),d.lineTo(s-.6*v,t+.6*u),d.lineTo(s+u,t+v),d.closePath(),d.fill()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.curvedArrow=function(a,b,c,d,e){var f,g,h,i,j,k,l=a.color,m=e("prefix")||"",n=e("edgeColor"),o=e("defaultNodeColor"),p=e("defaultEdgeColor"),q={},r=e("edgeHoverSizeRatio")*(a[m+"size"]||1),s=c[m+"size"],t=b[m+"x"],u=b[m+"y"],v=c[m+"x"],w=c[m+"y"];if(q=b.id===c.id?sigma.utils.getSelfLoopControlPoints(t,u,s):sigma.utils.getQuadraticControlPoint(t,u,v,w),b.id===c.id?(f=Math.sqrt((v-q.x1)*(v-q.x1)+(w-q.y1)*(w-q.y1)),g=2.5*r,h=q.x1+(v-q.x1)*(f-g-s)/f,i=q.y1+(w-q.y1)*(f-g-s)/f,j=(v-q.x1)*g/f,k=(w-q.y1)*g/f):(f=Math.sqrt((v-q.x)*(v-q.x)+(w-q.y)*(w-q.y)),g=2.5*r,h=q.x+(v-q.x)*(f-g-s)/f,i=q.y+(w-q.y)*(f-g-s)/f,j=(v-q.x)*g/f,k=(w-q.y)*g/f),!l)switch(n){case"source":l=b.color||o;break;case"target":l=c.color||o;break;default:l=p}l="edge"===e("edgeHoverColor")?a.hover_color||l:a.hover_color||e("defaultEdgeHoverColor")||l,d.strokeStyle=l,d.lineWidth=r,d.beginPath(),d.moveTo(t,u),b.id===c.id?d.bezierCurveTo(q.x2,q.y2,q.x1,q.y1,h,i):d.quadraticCurveTo(q.x,q.y,h,i),d.stroke(),d.fillStyle=l,d.beginPath(),d.moveTo(h+j,i+k),d.lineTo(h+.6*k,i-.6*j),d.lineTo(h-.6*k,i+.6*j),d.lineTo(h+j,i+k),d.closePath(),d.fill()}}(),function(a){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.canvas.extremities"),sigma.canvas.extremities.def=function(a,b,c,d,e){(sigma.canvas.hovers[b.type]||sigma.canvas.hovers.def)(b,d,e),(sigma.canvas.hovers[c.type]||sigma.canvas.hovers.def)(c,d,e)}}.call(this),function(){"use strict";sigma.utils.pkg("sigma.svg.utils"),sigma.svg.utils={show:function(a){return a.style.display="",this},hide:function(a){return a.style.display="none",this}}}(),function(){"use strict";sigma.utils.pkg("sigma.svg.nodes"),sigma.svg.nodes.def={create:function(a,b){var c=(b("prefix")||"",document.createElementNS(b("xmlns"),"circle"));return c.setAttributeNS(null,"data-node-id",a.id),c.setAttributeNS(null,"class",b("classPrefix")+"-node"),c.setAttributeNS(null,"fill",a.color||b("defaultNodeColor")),c},update:function(a,b,c){var d=c("prefix")||"";return b.setAttributeNS(null,"cx",a[d+"x"]),b.setAttributeNS(null,"cy",a[d+"y"]),b.setAttributeNS(null,"r",a[d+"size"]),c("freeStyle")||b.setAttributeNS(null,"fill",a.color||c("defaultNodeColor")),b.style.display="",this}}}(),function(){"use strict";sigma.utils.pkg("sigma.svg.edges"),sigma.svg.edges.def={create:function(a,b,c,d){var e=a.color,f=(d("prefix")||"",d("edgeColor")),g=d("defaultNodeColor"),h=d("defaultEdgeColor");if(!e)switch(f){case"source":e=b.color||g;break;case"target":e=c.color||g;break;default:e=h}var i=document.createElementNS(d("xmlns"),"line");return i.setAttributeNS(null,"data-edge-id",a.id),i.setAttributeNS(null,"class",d("classPrefix")+"-edge"),i.setAttributeNS(null,"stroke",e),i},update:function(a,b,c,d,e){var f=e("prefix")||"";return b.setAttributeNS(null,"stroke-width",a[f+"size"]||1),b.setAttributeNS(null,"x1",c[f+"x"]),b.setAttributeNS(null,"y1",c[f+"y"]),b.setAttributeNS(null,"x2",d[f+"x"]),b.setAttributeNS(null,"y2",d[f+"y"]),b.style.display="",this}}}(),function(){"use strict";sigma.utils.pkg("sigma.svg.edges"),sigma.svg.edges.curve={create:function(a,b,c,d){var e=a.color,f=(d("prefix")||"",d("edgeColor")),g=d("defaultNodeColor"),h=d("defaultEdgeColor");if(!e)switch(f){case"source":e=b.color||g;break;case"target":e=c.color||g;break;default:e=h}var i=document.createElementNS(d("xmlns"),"path");return i.setAttributeNS(null,"data-edge-id",a.id),i.setAttributeNS(null,"class",d("classPrefix")+"-edge"),i.setAttributeNS(null,"stroke",e),i},update:function(a,b,c,d,e){var f=e("prefix")||"";b.setAttributeNS(null,"stroke-width",a[f+"size"]||1);var g=(c[f+"x"]+d[f+"x"])/2+(d[f+"y"]-c[f+"y"])/4,h=(c[f+"y"]+d[f+"y"])/2+(c[f+"x"]-d[f+"x"])/4,i="M"+c[f+"x"]+","+c[f+"y"]+" Q"+g+","+h+" "+d[f+"x"]+","+d[f+"y"];return b.setAttributeNS(null,"d",i),b.setAttributeNS(null,"fill","none"),b.style.display="",this}}}(),function(a){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.svg.labels"),sigma.svg.labels.def={create:function(a,b){var c=b("prefix")||"",d=a[c+"size"],e=document.createElementNS(b("xmlns"),"text"),f="fixed"===b("labelSize")?b("defaultLabelSize"):b("labelSizeRatio")*d,g="node"===b("labelColor")?a.color||b("defaultNodeColor"):b("defaultLabelColor");return e.setAttributeNS(null,"data-label-target",a.id),e.setAttributeNS(null,"class",b("classPrefix")+"-label"),e.setAttributeNS(null,"font-size",f),e.setAttributeNS(null,"font-family",b("font")),e.setAttributeNS(null,"fill",g),e.innerHTML=a.label,e.textContent=a.label,e},update:function(a,b,c){var d=c("prefix")||"",e=a[d+"size"],f="fixed"===c("labelSize")?c("defaultLabelSize"):c("labelSizeRatio")*e;return!c("forceLabels")&&e<c("labelThreshold")||"string"!=typeof a.label?void 0:(b.setAttributeNS(null,"x",Math.round(a[d+"x"]+e+3)),b.setAttributeNS(null,"y",Math.round(a[d+"y"]+f/3)),b.style.display="",this)}}}.call(this),function(a){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.svg.hovers"),sigma.svg.hovers.def={create:function(a,b,c,d){var e,f,g,h,i,j=(d("hoverFontStyle")||d("fontStyle"),d("prefix")||""),k=a[j+"size"],l="fixed"===d("labelSize")?d("defaultLabelSize"):d("labelSizeRatio")*k,m="node"===d("labelHoverColor")?a.color||d("defaultNodeColor"):d("defaultLabelHoverColor"),n=document.createElementNS(d("xmlns"),"g"),o=document.createElementNS(d("xmlns"),"rect"),p=document.createElementNS(d("xmlns"),"circle"),q=document.createElementNS(d("xmlns"),"text");return n.setAttributeNS(null,"class",d("classPrefix")+"-hover"),n.setAttributeNS(null,"data-node-id",a.id),"string"==typeof a.label&&(q.innerHTML=a.label,q.textContent=a.label,q.setAttributeNS(null,"class",d("classPrefix")+"-hover-label"),q.setAttributeNS(null,"font-size",l),q.setAttributeNS(null,"font-family",d("font")),q.setAttributeNS(null,"fill",m),q.setAttributeNS(null,"x",Math.round(a[j+"x"]+k+3)),q.setAttributeNS(null,"y",Math.round(a[j+"y"]+l/3)),e=Math.round(a[j+"x"]-l/2-2),f=Math.round(a[j+"y"]-l/2-2),g=Math.round(c.measureText(a.label).width+l/2+k+9),h=Math.round(l+4),i=Math.round(l/2+2),p.setAttributeNS(null,"class",d("classPrefix")+"-hover-area"),p.setAttributeNS(null,"fill","#fff"),p.setAttributeNS(null,"cx",a[j+"x"]),p.setAttributeNS(null,"cy",a[j+"y"]),p.setAttributeNS(null,"r",i),o.setAttributeNS(null,"class",d("classPrefix")+"-hover-area"),o.setAttributeNS(null,"fill","#fff"),o.setAttributeNS(null,"x",a[j+"x"]+i/4),o.setAttributeNS(null,"y",a[j+"y"]-i),o.setAttributeNS(null,"width",g),o.setAttributeNS(null,"height",h)),n.appendChild(p),n.appendChild(o),n.appendChild(q),n.appendChild(b),n}}}.call(this),function(a){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.middlewares"),sigma.utils.pkg("sigma.utils"),sigma.middlewares.rescale=function(a,b,c){var d,e,f,g,h,i,j,k,l=this.graph.nodes(),m=this.graph.edges(),n=this.settings.embedObjects(c||{}),o=n("bounds")||sigma.utils.getBoundaries(this.graph,a,!0),p=o.minX,q=o.minY,r=o.maxX,s=o.maxY,t=o.sizeMax,u=o.weightMax,v=n("width")||1,w=n("height")||1,x=n("autoRescale"),y={nodePosition:1,nodeSize:1,edgeSize:1};for(x instanceof Array||(x=["nodePosition","nodeSize","edgeSize"]),d=0,e=x.length;e>d;d++)if(!y[x[d]])throw new Error('The rescale setting "'+x[d]+'" is not recognized.');var z=~x.indexOf("nodePosition"),A=~x.indexOf("nodeSize"),B=~x.indexOf("edgeSize");for(j="outside"===n("scalingMode")?Math.max(v/Math.max(r-p,1),w/Math.max(s-q,1)):Math.min(v/Math.max(r-p,1),w/Math.max(s-q,1)),k=(n("rescaleIgnoreSize")?0:(n("maxNodeSize")||t)/j)+(n("sideMargin")||0),r+=k,p-=k,s+=k,q-=k,j="outside"===n("scalingMode")?Math.max(v/Math.max(r-p,1),w/Math.max(s-q,1)):Math.min(v/Math.max(r-p,1),w/Math.max(s-q,1)),n("maxNodeSize")||n("minNodeSize")?n("maxNodeSize")===n("minNodeSize")?(f=0,g=+n("maxNodeSize")):(f=(n("maxNodeSize")-n("minNodeSize"))/t,g=+n("minNodeSize")):(f=1,g=0),n("maxEdgeSize")||n("minEdgeSize")?n("maxEdgeSize")===n("minEdgeSize")?(h=0,i=+n("minEdgeSize")):(h=(n("maxEdgeSize")-n("minEdgeSize"))/u,i=+n("minEdgeSize")):(h=1,i=0),d=0,e=m.length;e>d;d++)m[d][b+"size"]=m[d][a+"size"]*(B?h:1)+(B?i:0);for(d=0,e=l.length;e>d;d++)l[d][b+"size"]=l[d][a+"size"]*(A?f:1)+(A?g:0),l[d][b+"x"]=(l[d][a+"x"]-(r+p)/2)*(z?j:1),l[d][b+"y"]=(l[d][a+"y"]-(s+q)/2)*(z?j:1)},sigma.utils.getBoundaries=function(a,b,c){var d,e,f=a.edges(),g=a.nodes(),h=-(1/0),i=-(1/0),j=1/0,k=1/0,l=-(1/0),m=-(1/0);if(c)for(d=0,e=f.length;e>d;d++)h=Math.max(f[d][b+"size"],h);for(d=0,e=g.length;e>d;d++)i=Math.max(g[d][b+"size"],i),l=Math.max(g[d][b+"x"],l),j=Math.min(g[d][b+"x"],j),m=Math.max(g[d][b+"y"],m),k=Math.min(g[d][b+"y"],k);return h=h||1,i=i||1,{weightMax:h,sizeMax:i,minX:j,minY:k,maxX:l,maxY:m}}}.call(this),function(a){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.middlewares"),sigma.middlewares.copy=function(a,b){var c,d,e;if(b+""!=a+""){for(e=this.graph.nodes(),c=0,d=e.length;d>c;c++)e[c][b+"x"]=e[c][a+"x"],e[c][b+"y"]=e[c][a+"y"],e[c][b+"size"]=e[c][a+"size"];for(e=this.graph.edges(),c=0,d=e.length;d>c;c++)e[c][b+"size"]=e[c][a+"size"]}}}.call(this),function(a){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.misc.animation.running");var b=function(){var a=0;return function(){return""+ ++a}}();sigma.misc.animation.camera=function(c,d,e){if(!(c instanceof sigma.classes.camera&&"object"==typeof d&&d))throw"animation.camera: Wrong arguments.";if("number"!=typeof d.x&&"number"!=typeof d.y&&"number"!=typeof d.ratio&&"number"!=typeof d.angle)throw"There must be at least one valid coordinate in the given val.";var f,g,h,i,j,k,l=e||{},m=sigma.utils.dateNow();return k={x:c.x,y:c.y,ratio:c.ratio,angle:c.angle},j=l.duration,i="function"!=typeof l.easing?sigma.utils.easings[l.easing||"quadraticInOut"]:l.easing,f=function(){var b,e=l.duration?(sigma.utils.dateNow()-m)/l.duration:1;e>=1?(c.isAnimated=!1,c.goTo({x:d.x!==a?d.x:k.x,y:d.y!==a?d.y:k.y,ratio:d.ratio!==a?d.ratio:k.ratio,angle:d.angle!==a?d.angle:k.angle}),cancelAnimationFrame(g),delete sigma.misc.animation.running[g],"function"==typeof l.onComplete&&l.onComplete()):(b=i(e),c.isAnimated=!0,c.goTo({x:d.x!==a?k.x+(d.x-k.x)*b:k.x,y:d.y!==a?k.y+(d.y-k.y)*b:k.y,ratio:d.ratio!==a?k.ratio+(d.ratio-k.ratio)*b:k.ratio,angle:d.angle!==a?k.angle+(d.angle-k.angle)*b:k.angle}),"function"==typeof l.onNewFrame&&l.onNewFrame(),h.frameId=requestAnimationFrame(f))},g=b(),h={frameId:requestAnimationFrame(f),target:c,type:"camera",options:l,fn:f},sigma.misc.animation.running[g]=h,g},sigma.misc.animation.kill=function(a){if(1!==arguments.length||"number"!=typeof a)throw"animation.kill: Wrong arguments.";var b=sigma.misc.animation.running[a];return b&&(cancelAnimationFrame(a),delete sigma.misc.animation.running[b.frameId],"camera"===b.type&&(b.target.isAnimated=!1),"function"==typeof(b.options||{}).onComplete&&b.options.onComplete()),this},sigma.misc.animation.killAll=function(a){var b,c,d=0,e="string"==typeof a?a:null,f="object"==typeof a?a:null,g=sigma.misc.animation.running;for(c in g)e&&g[c].type!==e||f&&g[c].target!==f||(b=sigma.misc.animation.running[c],cancelAnimationFrame(b.frameId),delete sigma.misc.animation.running[c],"camera"===b.type&&(b.target.isAnimated=!1),d++,"function"==typeof(b.options||{}).onComplete&&b.options.onComplete());return d},sigma.misc.animation.has=function(a){var b,c="string"==typeof a?a:null,d="object"==typeof a?a:null,e=sigma.misc.animation.running;for(b in e)if(!(c&&e[b].type!==c||d&&e[b].target!==d))return!0;return!1}}.call(this),function(a){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.misc"),sigma.misc.bindEvents=function(b){function c(a){a&&(h="x"in a.data?a.data.x:h,i="y"in a.data?a.data.y:i);var c,d,e,f,g,k,l,m,n=[],o=h+j.width/2,p=i+j.height/2,q=j.camera.cameraPosition(h,i),r=j.camera.quadtree.point(q.x,q.y);if(r.length)for(c=0,e=r.length;e>c;c++)if(f=r[c],g=f[b+"x"],k=f[b+"y"],l=f[b+"size"],!f.hidden&&o>g-l&&g+l>o&&p>k-l&&k+l>p&&Math.sqrt((o-g)*(o-g)+(p-k)*(p-k))<l){for(m=!1,d=0;d<n.length;d++)if(f.size>n[d].size){n.splice(d,0,f),m=!0;break}m||n.push(f)}return n}function d(c){function d(a,b){for(r=!1,g=0;g<a.length;g++)if(b.size>a[g].size){a.splice(g,0,b),r=!0;break}r||a.push(b)}if(!j.settings("enableEdgeHovering"))return[];var e=sigma.renderers.canvas&&j instanceof sigma.renderers.canvas;if(!e)throw new Error("The edge events feature is not compatible with the WebGL renderer");c&&(h="x"in c.data?c.data.x:h,i="y"in c.data?c.data.y:i);var f,g,k,l,m,n,o,p,q,r,s=j.settings("edgeHoverPrecision"),t={},u=[],v=h+j.width/2,w=i+j.height/2,x=j.camera.cameraPosition(h,i),y=[];if(e){var z=j.camera.quadtree.area(j.camera.getRectangle(j.width,j.height));for(l=z,f=0,k=l.length;k>f;f++)t[l[f].id]=l[f]}if(j.camera.edgequadtree!==a&&(y=j.camera.edgequadtree.point(x.x,x.y)),y.length)for(f=0,k=y.length;k>f;f++)m=y[f],o=j.graph.nodes(m.source),p=j.graph.nodes(m.target),n=m[b+"size"]||m["read_"+b+"size"],!m.hidden&&!o.hidden&&!p.hidden&&(!e||t[m.source]||t[m.target])&&sigma.utils.getDistance(o[b+"x"],o[b+"y"],v,w)>o[b+"size"]&&sigma.utils.getDistance(p[b+"x"],p[b+"y"],v,w)>p[b+"size"]&&("curve"==m.type||"curvedArrow"==m.type?o.id===p.id?(q=sigma.utils.getSelfLoopControlPoints(o[b+"x"],o[b+"y"],o[b+"size"]),sigma.utils.isPointOnBezierCurve(v,w,o[b+"x"],o[b+"y"],p[b+"x"],p[b+"y"],q.x1,q.y1,q.x2,q.y2,Math.max(n,s))&&d(u,m)):(q=sigma.utils.getQuadraticControlPoint(o[b+"x"],o[b+"y"],p[b+"x"],p[b+"y"]),sigma.utils.isPointOnQuadraticCurve(v,w,o[b+"x"],o[b+"y"],p[b+"x"],p[b+"y"],q.x,q.y,Math.max(n,s))&&d(u,m)):sigma.utils.isPointOnSegment(v,w,o[b+"x"],o[b+"y"],p[b+"x"],p[b+"y"],Math.max(n,s))&&d(u,m));return u}function e(a){function b(a){j.settings("eventsEnabled")&&(j.dispatchEvent("click",a.data),i=c(a),k=d(a),i.length?(j.dispatchEvent("clickNode",{node:i[0],captor:a.data}),j.dispatchEvent("clickNodes",{node:i,captor:a.data})):k.length?(j.dispatchEvent("clickEdge",{edge:k[0],captor:a.data}),j.dispatchEvent("clickEdges",{edge:k,captor:a.data})):j.dispatchEvent("clickStage",{captor:a.data}))}function e(a){j.settings("eventsEnabled")&&(j.dispatchEvent("doubleClick",a.data),i=c(a),k=d(a),i.length?(j.dispatchEvent("doubleClickNode",{node:i[0],captor:a.data}),j.dispatchEvent("doubleClickNodes",{node:i,captor:a.data})):k.length?(j.dispatchEvent("doubleClickEdge",{edge:k[0],captor:a.data}),j.dispatchEvent("doubleClickEdges",{edge:k,captor:a.data})):j.dispatchEvent("doubleClickStage",{captor:a.data}))}function f(a){j.settings("eventsEnabled")&&(j.dispatchEvent("rightClick",a.data),i=c(a),k=d(a),i.length?(j.dispatchEvent("rightClickNode",{node:i[0],captor:a.data}),j.dispatchEvent("rightClickNodes",{node:i,captor:a.data})):k.length?(j.dispatchEvent("rightClickEdge",{edge:k[0],captor:a.data}),j.dispatchEvent("rightClickEdges",{edge:k,captor:a.data})):j.dispatchEvent("rightClickStage",{captor:a.data}))}function g(a){if(j.settings("eventsEnabled")){var b,c={current:{nodes:[],edges:[]},enter:{nodes:[],edges:[]},leave:{nodes:[],edges:[]},captor:a.data},d=c.leave;for(b in l)d.nodes.push(l[b]);for(b in m)d.edges.push(m[b]);l={},m={},(d.nodes.length||d.edges.length)&&j.dispatchEvent("hovers",c)}}function h(a){if(j.settings("eventsEnabled")){i=c(a),k=d(a);var b,e,f,g,h=[],n=[],o={},p=[],q=[],r={};for(b=0;b<i.length;b++)f=i[b],o[f.id]=f,l[f.id]||(n.push(f),l[f.id]=f);for(e in l)o[e]||(h.push(l[e]),delete l[e]);for(b=0;b<k.length;b++)g=k[b],r[g.id]=g,m[g.id]||(q.push(g),m[g.id]=g);for(e in m)r[e]||(p.push(m[e]),delete m[e]);(p.length||q.length||h.length||n.length)&&j.dispatchEvent("hovers",{current:{nodes:i,edges:k},enter:{nodes:n,edges:q},leave:{nodes:h,edges:p},captor:a.data})}}var i,k,l={},m={};a.bind("click",b),a.bind("mousedown",h),a.bind("mouseup",h),a.bind("mousemove",h),a.bind("mouseout",g),a.bind("doubleclick",e),a.bind("rightclick",f)}var f,g,h,i,j=this;for(f=0,g=this.captors.length;g>f;f++)e(this.captors[f])}}.call(this),function(a){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.misc"),sigma.misc.bindDOMEvents=function(a){function b(a){this.attr=function(b){return a.getAttributeNS(null,b)},this.tag=a.tagName,this["class"]=this.attr("class"),this.id=this.attr("id"),this.isNode=function(){return!!~this["class"].indexOf(g.settings("classPrefix")+"-node")},this.isEdge=function(){return!!~this["class"].indexOf(g.settings("classPrefix")+"-edge")},this.isHover=function(){return!!~this["class"].indexOf(g.settings("classPrefix")+"-hover")}}function c(a){if(g.settings("eventsEnabled")){g.dispatchEvent("click",sigma.utils.mouseCoords(a));var c=new b(a.target);c.isNode()?g.dispatchEvent("clickNode",{node:h.nodes(c.attr("data-node-id"))}):g.dispatchEvent("clickStage"),a.preventDefault(),a.stopPropagation()}}function d(a){if(g.settings("eventsEnabled")){g.dispatchEvent("doubleClick",sigma.utils.mouseCoords(a));var c=new b(a.target);c.isNode()?g.dispatchEvent("doubleClickNode",{node:h.nodes(c.attr("data-node-id"))}):g.dispatchEvent("doubleClickStage"),a.preventDefault(),a.stopPropagation()}}function e(a){var c=a.toElement||a.target;if(g.settings("eventsEnabled")&&c){var d,e=new b(c),f={leave:{nodes:[],edges:[]},enter:{nodes:[],edges:[]},captor:sigma.utils.mouseCoords(a)};e.isNode()?(d=h.nodes(e.attr("data-node-id")),f.enter.nodes=[d],i.nodes.push(d)):e.isEdge()&&(d=h.edges(e.attr("data-edge-id")),f.enter.edges=[d],i.edges.push(d)),f.current=i,g.dispatchEvent("hovers",f)}}function f(a){var c=a.fromElement||a.originalTarget;if(g.settings("eventsEnabled")){var d,e=new b(c),f={leave:{nodes:[],edges:[]},enter:{nodes:[],edges:[]},captor:sigma.utils.mouseCoords(a)};if(e.isNode())d=h.nodes(e.attr("data-node-id")),f.leave.nodes=[d],i.nodes.push(d);else{if(!e.isEdge())return;d=h.edges(e.attr("data-edge-id")),f.leave.edges=[d],i.edges.push(d)}f.current=i,g.dispatchEvent("hovers",f)}}var g=this,h=this.graph,i={nodes:[],edges:[]};a.addEventListener("click",c,!1),sigma.utils.doubleClick(a,"click",d),a.addEventListener("touchstart",c,!1),sigma.utils.doubleClick(a,"touchstart",d),a.addEventListener("mouseover",e,!0),a.addEventListener("mouseout",f,!0)}}.call(this),function(a){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.misc"),sigma.misc.drawHovers=function(b){function c(){var c=d.contexts.hover.canvas,f=d.settings.embedObjects({prefix:b}),g=f("singleHover")?1:a,h={elements:e.nodes,renderers:sigma.canvas.hovers,type:"nodes",ctx:d.contexts.hover,end:g,graph:d.graph,settings:f};d.contexts.hover.clearRect(0,0,c.width,c.height),e.nodes.length>0&&f("enableHovering")&&sigma.renderers.canvas.applyRenderers(h),e.edges.length>0&&f("enableEdgeHovering")&&(h.renderers=sigma.canvas.edgehovers,h.elements=e.edges,h.type="edges",sigma.renderers.canvas.applyRenderers(h),f("edgeHoverExtremities")?(h.renderers=sigma.canvas.extremities,sigma.renderers.canvas.applyRenderers(h)):(h.ctx=d.contexts.nodes,h.type="nodes",h.renderers=sigma.canvas.nodes,h.elements=e.nodes,sigma.renderers.canvas.applyRenderers(h)))}var d=this,e={nodes:[],edges:[]};this.bind("hovers",function(a){e=a.data.current,c()}),this.bind("render",function(a){c()})}}.call(this);
//# sourceMappingURL=sigma.min.js.map
(function(undefined){"use strict";function Supervisor(sigInst,options){var _this=this,workerFn=sigInst.getForceAtlas2Worker&&sigInst.getForceAtlas2Worker();if(options=options||{},_root.URL=_root.URL||_root.webkitURL,this.sigInst=sigInst,this.graph=this.sigInst.graph,this.ppn=10,this.ppe=3,this.config={},this.shouldUseWorker=options.worker===!1?!1:webWorkers,this.workerUrl=options.workerUrl,this.started=!1,this.running=!1,this.shouldUseWorker){if(this.workerUrl)this.worker=new Worker(this.workerUrl);else{var blob=this.makeBlob(workerFn);this.worker=new Worker(URL.createObjectURL(blob))}this.worker.postMessage=this.worker.webkitPostMessage||this.worker.postMessage}else eval(workerFn);this.msgName=this.worker?"message":"newCoords",this.listener=function(a){_this.nodesByteArray=new Float32Array(a.data.nodes),_this.running&&(_this.applyLayoutChanges(),_this.sendByteArrayToWorker(),_this.sigInst.refresh())},(this.worker||document).addEventListener(this.msgName,this.listener),this.graphToByteArrays(),sigInst.bind("kill",function(){sigInst.killForceAtlas2()})}if("undefined"==typeof sigma)throw"sigma is not declared";var _root=this,webWorkers="Worker"in _root;Supervisor.prototype.makeBlob=function(a){var b;try{b=new Blob([a],{type:"application/javascript"})}catch(c){_root.BlobBuilder=_root.BlobBuilder||_root.WebKitBlobBuilder||_root.MozBlobBuilder,b=new BlobBuilder,b.append(a),b=b.getBlob()}return b},Supervisor.prototype.graphToByteArrays=function(){var a,b,c,d=this.graph.nodes(),e=this.graph.edges(),f=d.length*this.ppn,g=e.length*this.ppe,h={};for(this.nodesByteArray=new Float32Array(f),this.edgesByteArray=new Float32Array(g),a=b=0,c=d.length;c>a;a++)h[d[a].id]=b,this.nodesByteArray[b]=d[a].x,this.nodesByteArray[b+1]=d[a].y,this.nodesByteArray[b+2]=0,this.nodesByteArray[b+3]=0,this.nodesByteArray[b+4]=0,this.nodesByteArray[b+5]=0,this.nodesByteArray[b+6]=1+this.graph.degree(d[a].id),this.nodesByteArray[b+7]=1,this.nodesByteArray[b+8]=d[a].size,this.nodesByteArray[b+9]=0,b+=this.ppn;for(a=b=0,c=e.length;c>a;a++)this.edgesByteArray[b]=h[e[a].source],this.edgesByteArray[b+1]=h[e[a].target],this.edgesByteArray[b+2]=e[a].weight||0,b+=this.ppe},Supervisor.prototype.applyLayoutChanges=function(){for(var a=this.graph.nodes(),b=0,c=0,d=this.nodesByteArray.length;d>c;c+=this.ppn)a[b].x=this.nodesByteArray[c],a[b].y=this.nodesByteArray[c+1],b++},Supervisor.prototype.sendByteArrayToWorker=function(a){var b={action:a||"loop",nodes:this.nodesByteArray.buffer},c=[this.nodesByteArray.buffer];"start"===a&&(b.config=this.config||{},b.edges=this.edgesByteArray.buffer,c.push(this.edgesByteArray.buffer)),this.shouldUseWorker?this.worker.postMessage(b,c):_root.postMessage(b,"*")},Supervisor.prototype.start=function(){if(!this.running){this.running=!0;var a,b;for(a in this.sigInst.cameras)b=this.sigInst.cameras[a],b.edgequadtree._enabled=!1;this.started?this.sendByteArrayToWorker():(this.sendByteArrayToWorker("start"),this.started=!0)}},Supervisor.prototype.stop=function(){if(this.running){var a,b,c;for(a in this.sigInst.cameras)b=this.sigInst.cameras[a],b.edgequadtree._enabled=!0,c=sigma.utils.getBoundaries(this.graph,b.readPrefix),b.settings("drawEdges")&&b.settings("enableEdgeHovering")&&b.edgequadtree.index(this.sigInst.graph,{prefix:b.readPrefix,bounds:{x:c.minX,y:c.minY,width:c.maxX-c.minX,height:c.maxY-c.minY}});this.running=!1}},Supervisor.prototype.killWorker=function(){this.worker?this.worker.terminate():(_root.postMessage({action:"kill"},"*"),document.removeEventListener(this.msgName,this.listener))},Supervisor.prototype.configure=function(a){if(this.config=a,this.started){var b={action:"config",config:this.config};this.shouldUseWorker?this.worker.postMessage(b):_root.postMessage(b,"*")}},sigma.prototype.startForceAtlas2=function(a){return this.supervisor||(this.supervisor=new Supervisor(this,a)),a&&this.supervisor.configure(a),this.supervisor.start(),this},sigma.prototype.stopForceAtlas2=function(){return this.supervisor?(this.supervisor.stop(),this):this},sigma.prototype.killForceAtlas2=function(){return this.supervisor?(this.supervisor.stop(),this.supervisor.killWorker(),this.supervisor=null,this):this},sigma.prototype.configForceAtlas2=function(a){return this.supervisor||(this.supervisor=new Supervisor(this,a)),this.supervisor.configure(a),this},sigma.prototype.isForceAtlas2Running=function(a){return!!this.supervisor&&this.supervisor.running}}).call(this),function(undefined){"use strict";function crush(a){var b,c,d,e=["x","y","dx","dy","old_dx","old_dy","mass","convergence","size","fixed"],f=["source","target","weight"],g=["node","centerX","centerY","size","nextSibling","firstChild","mass","massCenterX","massCenterY"];for(c=0,d=g.length;d>c;c++)b=new RegExp("rp\\(([^,]*), '"+g[c]+"'\\)","g"),a=a.replace(b,0===c?"$1":"$1 + "+c);for(c=0,d=e.length;d>c;c++)b=new RegExp("np\\(([^,]*), '"+e[c]+"'\\)","g"),a=a.replace(b,0===c?"$1":"$1 + "+c);for(c=0,d=f.length;d>c;c++)b=new RegExp("ep\\(([^,]*), '"+f[c]+"'\\)","g"),a=a.replace(b,0===c?"$1":"$1 + "+c);return a}function getWorkerFn(){return";("+crush(Worker.toString())+").call(this);"}var _root=this,inWebWorker=!("document"in _root),Worker=function(a){function b(){var a,b,c={},d=arguments.length;for(a=d-1;a>=0;a--)for(b in arguments[a])c[b]=arguments[a][b];return c}function c(a){var b;for(b in a)"hasOwnProperty"in a&&!a.hasOwnProperty(b)||delete a[b];return a}function d(a,b){if(a%o.ppn!==0)throw"np: non correct ("+a+").";if(a!==parseInt(a))throw"np: non int.";if(b in p)return a+p[b];throw"ForceAtlas2.Worker - Inexistant node property given ("+b+")."}function e(a,b){if(a%o.ppe!==0)throw"ep: non correct ("+a+").";if(a!==parseInt(a))throw"ep: non int.";if(b in q)return a+q[b];throw"ForceAtlas2.Worker - Inexistant edge property given ("+b+")."}function f(a,b){if(a%o.ppr!==0)throw"rp: non correct ("+a+").";if(a!==parseInt(a))throw"rp: non int.";if(b in r)return a+r[b];throw"ForceAtlas2.Worker - Inexistant region property given ("+b+")."}function g(a,b,c){c=c||{};k=a,l=b,o.nodesLength=k.length,o.edgesLength=l.length,h(c)}function h(a){o.settings=b(a,o.settings)}function i(){var a,b,c,g,h,i,j,n,p,q,r,s,t,u,v;for(c=0;c<o.nodesLength;c+=o.ppn)k[d(c,"old_dx")]=k[d(c,"dx")],k[d(c,"old_dy")]=k[d(c,"dy")],k[d(c,"dx")]=0,k[d(c,"dy")]=0;if(o.settings.outboundAttractionDistribution){for(p=0,c=0;c<o.nodesLength;c+=o.ppn)p+=k[d(c,"mass")];p/=o.nodesLength}if(o.settings.barnesHutOptimize){var w,x,y=1/0,z=-(1/0),A=1/0,B=-(1/0);for(m=[],c=0;c<o.nodesLength;c+=o.ppn)y=Math.min(y,k[d(c,"x")]),z=Math.max(z,k[d(c,"x")]),A=Math.min(A,k[d(c,"y")]),B=Math.max(B,k[d(c,"y")]);for(m[f(0,"node")]=-1,m[f(0,"centerX")]=(y+z)/2,m[f(0,"centerY")]=(A+B)/2,m[f(0,"size")]=Math.max(z-y,B-A),m[f(0,"nextSibling")]=-1,m[f(0,"firstChild")]=-1,m[f(0,"mass")]=0,m[f(0,"massCenterX")]=0,m[f(0,"massCenterY")]=0,a=1,c=0;c<o.nodesLength;c+=o.ppn)for(b=0;;)if(m[f(b,"firstChild")]>=0)w=k[d(c,"x")]<m[f(b,"centerX")]?k[d(c,"y")]<m[f(b,"centerY")]?m[f(b,"firstChild")]:m[f(b,"firstChild")]+o.ppr:k[d(c,"y")]<m[f(b,"centerY")]?m[f(b,"firstChild")]+2*o.ppr:m[f(b,"firstChild")]+3*o.ppr,m[f(b,"massCenterX")]=(m[f(b,"massCenterX")]*m[f(b,"mass")]+k[d(c,"x")]*k[d(c,"mass")])/(m[f(b,"mass")]+k[d(c,"mass")]),m[f(b,"massCenterY")]=(m[f(b,"massCenterY")]*m[f(b,"mass")]+k[d(c,"y")]*k[d(c,"mass")])/(m[f(b,"mass")]+k[d(c,"mass")]),m[f(b,"mass")]+=k[d(c,"mass")],b=w;else{if(m[f(b,"node")]<0){m[f(b,"node")]=c;break}if(m[f(b,"firstChild")]=a*o.ppr,j=m[f(b,"size")]/2,n=m[f(b,"firstChild")],m[f(n,"node")]=-1,m[f(n,"centerX")]=m[f(b,"centerX")]-j,m[f(n,"centerY")]=m[f(b,"centerY")]-j,m[f(n,"size")]=j,m[f(n,"nextSibling")]=n+o.ppr,m[f(n,"firstChild")]=-1,m[f(n,"mass")]=0,m[f(n,"massCenterX")]=0,m[f(n,"massCenterY")]=0,n+=o.ppr,m[f(n,"node")]=-1,m[f(n,"centerX")]=m[f(b,"centerX")]-j,m[f(n,"centerY")]=m[f(b,"centerY")]+j,m[f(n,"size")]=j,m[f(n,"nextSibling")]=n+o.ppr,m[f(n,"firstChild")]=-1,m[f(n,"mass")]=0,m[f(n,"massCenterX")]=0,m[f(n,"massCenterY")]=0,n+=o.ppr,m[f(n,"node")]=-1,m[f(n,"centerX")]=m[f(b,"centerX")]+j,m[f(n,"centerY")]=m[f(b,"centerY")]-j,m[f(n,"size")]=j,m[f(n,"nextSibling")]=n+o.ppr,m[f(n,"firstChild")]=-1,m[f(n,"mass")]=0,m[f(n,"massCenterX")]=0,m[f(n,"massCenterY")]=0,n+=o.ppr,m[f(n,"node")]=-1,m[f(n,"centerX")]=m[f(b,"centerX")]+j,m[f(n,"centerY")]=m[f(b,"centerY")]+j,m[f(n,"size")]=j,m[f(n,"nextSibling")]=m[f(b,"nextSibling")],m[f(n,"firstChild")]=-1,m[f(n,"mass")]=0,m[f(n,"massCenterX")]=0,m[f(n,"massCenterY")]=0,a+=4,w=k[d(m[f(b,"node")],"x")]<m[f(b,"centerX")]?k[d(m[f(b,"node")],"y")]<m[f(b,"centerY")]?m[f(b,"firstChild")]:m[f(b,"firstChild")]+o.ppr:k[d(m[f(b,"node")],"y")]<m[f(b,"centerY")]?m[f(b,"firstChild")]+2*o.ppr:m[f(b,"firstChild")]+3*o.ppr,m[f(b,"mass")]=k[d(m[f(b,"node")],"mass")],m[f(b,"massCenterX")]=k[d(m[f(b,"node")],"x")],m[f(b,"massCenterY")]=k[d(m[f(b,"node")],"y")],m[f(w,"node")]=m[f(b,"node")],m[f(b,"node")]=-1,x=k[d(c,"x")]<m[f(b,"centerX")]?k[d(c,"y")]<m[f(b,"centerY")]?m[f(b,"firstChild")]:m[f(b,"firstChild")]+o.ppr:k[d(c,"y")]<m[f(b,"centerY")]?m[f(b,"firstChild")]+2*o.ppr:m[f(b,"firstChild")]+3*o.ppr,w!==x){m[f(x,"node")]=c;break}b=w}}if(o.settings.barnesHutOptimize)for(q=o.settings.scalingRatio,c=0;c<o.nodesLength;c+=o.ppn)for(b=0;;)if(m[f(b,"firstChild")]>=0){if(u=Math.sqrt(Math.pow(k[d(c,"x")]-m[f(b,"massCenterX")],2)+Math.pow(k[d(c,"y")]-m[f(b,"massCenterY")],2)),2*m[f(b,"size")]/u<o.settings.barnesHutTheta){if(r=k[d(c,"x")]-m[f(b,"massCenterX")],s=k[d(c,"y")]-m[f(b,"massCenterY")],o.settings.adjustSize?u>0?(v=q*k[d(c,"mass")]*m[f(b,"mass")]/u/u,k[d(c,"dx")]+=r*v,k[d(c,"dy")]+=s*v):0>u&&(v=-q*k[d(c,"mass")]*m[f(b,"mass")]/u,k[d(c,"dx")]+=r*v,k[d(c,"dy")]+=s*v):u>0&&(v=q*k[d(c,"mass")]*m[f(b,"mass")]/u/u,k[d(c,"dx")]+=r*v,k[d(c,"dy")]+=s*v),m[f(b,"nextSibling")]<0)break;b=m[f(b,"nextSibling")];continue}b=m[f(b,"firstChild")]}else{if(m[f(b,"node")]>=0&&m[f(b,"node")]!==c&&(r=k[d(c,"x")]-k[d(m[f(b,"node")],"x")],s=k[d(c,"y")]-k[d(m[f(b,"node")],"y")],u=Math.sqrt(r*r+s*s),o.settings.adjustSize?u>0?(v=q*k[d(c,"mass")]*k[d(m[f(b,"node")],"mass")]/u/u,k[d(c,"dx")]+=r*v,k[d(c,"dy")]+=s*v):0>u&&(v=-q*k[d(c,"mass")]*k[d(m[f(b,"node")],"mass")]/u,k[d(c,"dx")]+=r*v,k[d(c,"dy")]+=s*v):u>0&&(v=q*k[d(c,"mass")]*k[d(m[f(b,"node")],"mass")]/u/u,k[d(c,"dx")]+=r*v,k[d(c,"dy")]+=s*v)),m[f(b,"nextSibling")]<0)break;b=m[f(b,"nextSibling")]}else for(q=o.settings.scalingRatio,g=0;g<o.nodesLength;g+=o.ppn)for(h=0;g>h;h+=o.ppn)r=k[d(g,"x")]-k[d(h,"x")],s=k[d(g,"y")]-k[d(h,"y")],o.settings.adjustSize?(u=Math.sqrt(r*r+s*s)-k[d(g,"size")]-k[d(h,"size")],u>0?(v=q*k[d(g,"mass")]*k[d(h,"mass")]/u/u,k[d(g,"dx")]+=r*v,k[d(g,"dy")]+=s*v,k[d(h,"dx")]+=r*v,k[d(h,"dy")]+=s*v):0>u&&(v=100*q*k[d(g,"mass")]*k[d(h,"mass")],k[d(g,"dx")]+=r*v,k[d(g,"dy")]+=s*v,k[d(h,"dx")]-=r*v,k[d(h,"dy")]-=s*v)):(u=Math.sqrt(r*r+s*s),u>0&&(v=q*k[d(g,"mass")]*k[d(h,"mass")]/u/u,k[d(g,"dx")]+=r*v,k[d(g,"dy")]+=s*v,k[d(h,"dx")]-=r*v,k[d(h,"dy")]-=s*v));for(n=o.settings.gravity/o.settings.scalingRatio,q=o.settings.scalingRatio,c=0;c<o.nodesLength;c+=o.ppn)v=0,r=k[d(c,"x")],s=k[d(c,"y")],u=Math.sqrt(Math.pow(r,2)+Math.pow(s,2)),o.settings.strongGravityMode?u>0&&(v=q*k[d(c,"mass")]*n):u>0&&(v=q*k[d(c,"mass")]*n/u),k[d(c,"dx")]-=r*v,k[d(c,"dy")]-=s*v;for(q=1*(o.settings.outboundAttractionDistribution?p:1),i=0;i<o.edgesLength;i+=o.ppe)g=l[e(i,"source")],h=l[e(i,"target")],j=l[e(i,"weight")],t=Math.pow(j,o.settings.edgeWeightInfluence),r=k[d(g,"x")]-k[d(h,"x")],s=k[d(g,"y")]-k[d(h,"y")],o.settings.adjustSizes?(u=Math.sqrt(Math.pow(r,2)+Math.pow(s,2)-k[d(g,"size")]-k[d(h,"size")]),o.settings.linLogMode?o.settings.outboundAttractionDistribution?u>0&&(v=-q*t*Math.log(1+u)/u/k[d(g,"mass")]):u>0&&(v=-q*t*Math.log(1+u)/u):o.settings.outboundAttractionDistribution?u>0&&(v=-q*t/k[d(g,"mass")]):u>0&&(v=-q*t)):(u=Math.sqrt(Math.pow(r,2)+Math.pow(s,2)),o.settings.linLogMode?o.settings.outboundAttractionDistribution?u>0&&(v=-q*t*Math.log(1+u)/u/k[d(g,"mass")]):u>0&&(v=-q*t*Math.log(1+u)/u):o.settings.outboundAttractionDistribution?(u=1,v=-q*t/k[d(g,"mass")]):(u=1,v=-q*t)),u>0&&(k[d(g,"dx")]+=r*v,k[d(g,"dy")]+=s*v,k[d(h,"dx")]-=r*v,k[d(h,"dy")]-=s*v);var C,D,E,F;if(o.settings.adjustSizes)for(c=0;c<o.nodesLength;c+=o.ppn)k[d(c,"fixed")]||(C=Math.sqrt(Math.pow(k[d(c,"dx")],2)+Math.pow(k[d(c,"dy")],2)),C>o.maxForce&&(k[d(c,"dx")]=k[d(c,"dx")]*o.maxForce/C,k[d(c,"dy")]=k[d(c,"dy")]*o.maxForce/C),D=k[d(c,"mass")]*Math.sqrt((k[d(c,"old_dx")]-k[d(c,"dx")])*(k[d(c,"old_dx")]-k[d(c,"dx")])+(k[d(c,"old_dy")]-k[d(c,"dy")])*(k[d(c,"old_dy")]-k[d(c,"dy")])),E=Math.sqrt((k[d(c,"old_dx")]+k[d(c,"dx")])*(k[d(c,"old_dx")]+k[d(c,"dx")])+(k[d(c,"old_dy")]+k[d(c,"dy")])*(k[d(c,"old_dy")]+k[d(c,"dy")]))/2,F=.1*Math.log(1+E)/(1+Math.sqrt(D)),k[d(c,"x")]=k[d(c,"x")]+k[d(c,"dx")]*(F/o.settings.slowDown),k[d(c,"y")]=k[d(c,"y")]+k[d(c,"dy")]*(F/o.settings.slowDown));else for(c=0;c<o.nodesLength;c+=o.ppn)k[d(c,"fixed")]||(D=k[d(c,"mass")]*Math.sqrt((k[d(c,"old_dx")]-k[d(c,"dx")])*(k[d(c,"old_dx")]-k[d(c,"dx")])+(k[d(c,"old_dy")]-k[d(c,"dy")])*(k[d(c,"old_dy")]-k[d(c,"dy")])),E=Math.sqrt((k[d(c,"old_dx")]+k[d(c,"dx")])*(k[d(c,"old_dx")]+k[d(c,"dx")])+(k[d(c,"old_dy")]+k[d(c,"dy")])*(k[d(c,"old_dy")]+k[d(c,"dy")]))/2,F=k[d(c,"convergence")]*Math.log(1+E)/(1+Math.sqrt(D)),k[d(c,"convergence")]=Math.min(1,Math.sqrt(F*(Math.pow(k[d(c,"dx")],2)+Math.pow(k[d(c,"dy")],2))/(1+Math.sqrt(D)))),k[d(c,"x")]=k[d(c,"x")]+k[d(c,"dx")]*(F/o.settings.slowDown),k[d(c,"y")]=k[d(c,"y")]+k[d(c,"dy")]*(F/o.settings.slowDown));o.iterations++}function j(a){for(var b=0;a>b;b++)i();n()}var k,l,m,n,o={ppn:10,ppe:3,ppr:9,maxForce:10,iterations:0,converged:!1,settings:{linLogMode:!1,outboundAttractionDistribution:!1,adjustSizes:!1,edgeWeightInfluence:0,scalingRatio:1,strongGravityMode:!1,gravity:1,slowDown:1,barnesHutOptimize:!1,barnesHutTheta:.5,startingIterations:1,iterationsPerRender:1}},p={x:0,y:1,dx:2,dy:3,old_dx:4,old_dy:5,mass:6,convergence:7,size:8,fixed:9},q={source:0,target:1,weight:2},r={node:0,centerX:1,centerY:2,size:3,nextSibling:4,firstChild:5,mass:6,massCenterX:7,massCenterY:8};n="undefined"!=typeof window&&window.document?function(){var a;document.createEvent?(a=document.createEvent("Event"),a.initEvent("newCoords",!0,!1)):(a=document.createEventObject(),a.eventType="newCoords"),a.eventName="newCoords",a.data={nodes:k.buffer},requestAnimationFrame(function(){document.dispatchEvent(a)})}:function(){self.postMessage({nodes:k.buffer},[k.buffer])};var s=function(a){switch(a.data.action){case"start":g(new Float32Array(a.data.nodes),new Float32Array(a.data.edges),a.data.config),j(o.settings.startingIterations);break;case"loop":k=new Float32Array(a.data.nodes),j(o.settings.iterationsPerRender);break;case"config":h(a.data.config);break;case"kill":c(o),k=null,l=null,m=null,self.removeEventListener("message",s)}};self.addEventListener("message",s)};if(inWebWorker)eval(getWorkerFn());else{if("undefined"==typeof sigma)throw"sigma is not declared";sigma.prototype.getForceAtlas2Worker=getWorkerFn}}.call(this);
//# sourceMappingURL=sigma.layout.forceAtlas2.min.js.map
(function(undefined){"use strict";function Supervisor(a,b){_root.URL=_root.URL||_root.webkitURL,b=b||{},this.sigInst=a,this.graph=this.sigInst.graph,this.ppn=10,this.ppe=3,this.config={},this.worker=null,this.shouldUseWorker=null,this.workerUrl=null,this.runOnBackground=null,this.easing=null,this.randomize=null,this.configure(b),this.started=!1,this.running=!1,this.initWorker()}if("undefined"==typeof sigma)throw new Error("sigma is not declared");sigma.utils.pkg("sigma.layouts");var _root=this,webWorkers="Worker"in _root,eventEmitter={};sigma.classes.dispatcher.extend(eventEmitter),Supervisor.prototype.makeBlob=function(a){var b;try{b=new Blob([a],{type:"application/javascript"})}catch(c){_root.BlobBuilder=_root.BlobBuilder||_root.WebKitBlobBuilder||_root.MozBlobBuilder,b=new BlobBuilder,b.append(a),b=b.getBlob()}return b},Supervisor.prototype.graphToByteArrays=function(){var a,b,c,d=this.graph.nodes(),e=this.graph.edges(),f=d.length*this.ppn,g=e.length*this.ppe,h={};for(this.nodesByteArray=new Float32Array(f),this.edgesByteArray=new Float32Array(g),a=b=0,c=d.length;c>a;a++)h[d[a].id]=b,this.nodesByteArray[b]=this.randomize(d[a].x),this.nodesByteArray[b+1]=this.randomize(d[a].y),this.nodesByteArray[b+2]=0,this.nodesByteArray[b+3]=0,this.nodesByteArray[b+4]=0,this.nodesByteArray[b+5]=0,this.nodesByteArray[b+6]=1+this.graph.degree(d[a].id),this.nodesByteArray[b+7]=1,this.nodesByteArray[b+8]=d[a].size,this.nodesByteArray[b+9]=d[a].fixed||0,b+=this.ppn;for(a=b=0,c=e.length;c>a;a++)this.edgesByteArray[b]=h[e[a].source],this.edgesByteArray[b+1]=h[e[a].target],this.edgesByteArray[b+2]=e[a].weight||0,b+=this.ppe},Supervisor.prototype.applyLayoutChanges=function(a){for(var b=this.graph.nodes(),c=0,d=0,e=this.nodesByteArray.length;e>d;d+=this.ppn)a?(b[c].fa2_x=this.nodesByteArray[d],b[c].fa2_y=this.nodesByteArray[d+1]):(b[c].x=this.nodesByteArray[d],b[c].y=this.nodesByteArray[d+1]),c++},Supervisor.prototype.sendByteArrayToWorker=function(a){var b={action:a||"loop",nodes:this.nodesByteArray.buffer},c=[this.nodesByteArray.buffer];"start"===a&&(b.config=this.config||{},b.edges=this.edgesByteArray.buffer,c.push(this.edgesByteArray.buffer)),this.shouldUseWorker?this.worker.postMessage(b,c):_root.postMessage(b,"*")},Supervisor.prototype.start=function(){this.running||(this.running=!0,this.started?this.sendByteArrayToWorker():(this.sendByteArrayToWorker("start"),this.started=!0,eventEmitter.dispatchEvent("start")))},Supervisor.prototype.stop=function(){this.running&&(this.running=!1,eventEmitter.dispatchEvent("stop"))},Supervisor.prototype.initWorker=function(){var _this=this,workerFn=sigma.layouts.getForceLinkWorker();if(this.shouldUseWorker){if(this.workerUrl)this.worker=new Worker(this.workerUrl);else{var blob=this.makeBlob(workerFn);this.worker=new Worker(URL.createObjectURL(blob))}this.worker.postMessage=this.worker.webkitPostMessage||this.worker.postMessage}else eval(workerFn);this.msgName=this.worker?"message":"newCoords",this.listener=function(a){_this.nodesByteArray=new Float32Array(a.data.nodes),_this.running&&(_this.applyLayoutChanges(_this.runOnBackground),_this.sendByteArrayToWorker(),_this.runOnBackground||_this.sigInst.refresh({skipIndexation:!0})),a.data.converged&&(_this.running=!1),_this.running||(_this.killWorker(),_this.runOnBackground&&_this.easing?(_this.applyLayoutChanges(!0),eventEmitter.dispatchEvent("interpolate"),sigma.plugins.animate(_this.sigInst,{x:"fa2_x",y:"fa2_y"},{easing:_this.easing,onComplete:function(){_this.sigInst.refresh(),eventEmitter.dispatchEvent("stop")}})):(_this.applyLayoutChanges(!1),_this.sigInst.refresh(),eventEmitter.dispatchEvent("stop")))},(this.worker||document).addEventListener(this.msgName,this.listener),this.graphToByteArrays(),_this.sigInst.bind("kill",function(){sigma.layouts.killForceLink()})},Supervisor.prototype.killWorker=function(){this.worker?this.worker.terminate():(_root.postMessage({action:"kill"},"*"),document.removeEventListener(this.msgName,this.listener))},Supervisor.prototype.configure=function(a){switch(this.config=a,this.shouldUseWorker=a.worker===!1?!1:webWorkers,this.workerUrl=a.workerUrl,this.runOnBackground=a.background?!0:!1,this.easing=a.easing,a.randomize){case"globally":this.randomize=function(b){return Math.random()*(a.randomizeFactor||1)};break;case"locally":this.randomize=function(b){return b+Math.random()*(a.randomizeFactor||1)};break;default:this.randomize=function(a){return a}}if(this.started){var b={action:"config",config:this.config};this.shouldUseWorker?this.worker.postMessage(b):_root.postMessage(b,"*")}};var supervisor=null;sigma.layouts.startForceLink=function(a,b){return supervisor?supervisor.running||(supervisor.killWorker(),supervisor.initWorker(),supervisor.started=!1):supervisor=new Supervisor(a,b),b&&supervisor.configure(b),supervisor.start(),eventEmitter},sigma.layouts.stopForceLink=function(){return supervisor?(supervisor.stop(),supervisor):void 0},sigma.layouts.killForceLink=function(){supervisor&&(supervisor.stop(),supervisor.killWorker(),supervisor=null,eventEmitter={},sigma.classes.dispatcher.extend(eventEmitter))},sigma.layouts.configForceLink=function(a,b){return supervisor?supervisor.running||(supervisor.killWorker(),supervisor.initWorker(),supervisor.started=!1):supervisor=new Supervisor(a,b),supervisor.configure(b),eventEmitter},sigma.layouts.isForceLinkRunning=function(){return!!supervisor&&supervisor.running}}).call(this),function(undefined){"use strict";function crush(a){var b,c,d,e=["x","y","dx","dy","old_dx","old_dy","mass","convergence","size","fixed"],f=["source","target","weight"],g=["node","centerX","centerY","size","nextSibling","firstChild","mass","massCenterX","massCenterY"];for(c=0,d=g.length;d>c;c++)b=new RegExp("rp\\(([^,]*), '"+g[c]+"'\\)","g"),a=a.replace(b,0===c?"$1":"$1 + "+c);for(c=0,d=e.length;d>c;c++)b=new RegExp("np\\(([^,]*), '"+e[c]+"'\\)","g"),a=a.replace(b,0===c?"$1":"$1 + "+c);for(c=0,d=f.length;d>c;c++)b=new RegExp("ep\\(([^,]*), '"+f[c]+"'\\)","g"),a=a.replace(b,0===c?"$1":"$1 + "+c);return a}function getWorkerFn(){return";("+crush(Worker.toString())+").call(this);"}if("undefined"==typeof sigma)throw new Error("sigma is not declared");sigma.utils.pkg("sigma.layouts");var _root=this,inWebWorker=!("document"in _root),Worker=function(a){function b(){var a,b,c={},d=arguments.length;for(a=d-1;a>=0;a--)for(b in arguments[a])c[b]=arguments[a][b];return c}function c(a){var b;for(b in a)"hasOwnProperty"in a&&!a.hasOwnProperty(b)||delete a[b];return a}function d(a,b,c,d){return Math.sqrt((c-a)*(c-a)+(d-b)*(d-b))}function e(a,b,c,d,e){return(e-d)*(a-b)/(c-b)+d}function f(a){return Math.acos(a.x/Math.sqrt(a.x*a.x+a.y*a.y))}function g(a,b,c,d){return{xi:-(d-b),yi:c-a,xi_prime:d-b,yi_prime:-(c-a)}}function h(a,b){return{x:(a.xi_prime-a.xi)/b,y:(a.yi_prime-a.yi)/b}}function i(a,b,c,d,e){return{x:a+(c-a)*e,y:b+(d-b)*e}}function j(a,b){if(a%u.ppn!==0)throw new Error('Invalid argument in np: "i" is not correct ('+a+").");if(a!==parseInt(a))throw new TypeError('Invalid argument in np: "i" is not an integer.');if(b in v)return a+v[b];throw new Error("ForceLink.Worker - Inexistant node property given ("+b+").")}function k(a,b){if(a%u.ppe!==0)throw new Error('Invalid argument in ep: "i" is not correct ('+a+").");if(a!==parseInt(a))throw new TypeError('Invalid argument in ep: "i" is not an integer.');if(b in w)return a+w[b];throw new Error("ForceLink.Worker - Inexistant edge property given ("+b+").")}function l(a,b){if(a%u.ppr!==0)throw new Error('Invalid argument in rp: "i" is not correct ('+a+").");if(a!==parseInt(a))throw new TypeError('Invalid argument in rp: "i" is not an integer.');if(b in x)return a+x[b];throw new Error("ForceLink.Worker - Inexistant region property given ("+b+").")}function m(a,b,c){c=c||{};q=a,r=b,u.nodesLength=q.length,u.edgesLength=r.length,n(c)}function n(a){u.settings=b(a,u.settings)}function o(){var a,b,c,m,n,o,p,t,v,w,x,y,z,A,B,C,D;for(c=0;c<u.nodesLength;c+=u.ppn)q[j(c,"old_dx")]=q[j(c,"dx")],q[j(c,"old_dy")]=q[j(c,"dy")],q[j(c,"dx")]=0,q[j(c,"dy")]=0;if(u.settings.outboundAttractionDistribution){for(v=0,c=0;c<u.nodesLength;c+=u.ppn)v+=q[j(c,"mass")];v/=u.nodesLength}if(u.settings.barnesHutOptimize){var E,F,G=1/0,H=-(1/0),I=1/0,J=-(1/0);for(s=[],c=0;c<u.nodesLength;c+=u.ppn)G=Math.min(G,q[j(c,"x")]),H=Math.max(H,q[j(c,"x")]),I=Math.min(I,q[j(c,"y")]),J=Math.max(J,q[j(c,"y")]);for(s[l(0,"node")]=-1,s[l(0,"centerX")]=(G+H)/2,s[l(0,"centerY")]=(I+J)/2,s[l(0,"size")]=Math.max(H-G,J-I),s[l(0,"nextSibling")]=-1,s[l(0,"firstChild")]=-1,s[l(0,"mass")]=0,s[l(0,"massCenterX")]=0,s[l(0,"massCenterY")]=0,a=1,c=0;c<u.nodesLength;c+=u.ppn)for(b=0;;)if(s[l(b,"firstChild")]>=0)E=q[j(c,"x")]<s[l(b,"centerX")]?q[j(c,"y")]<s[l(b,"centerY")]?s[l(b,"firstChild")]:s[l(b,"firstChild")]+u.ppr:q[j(c,"y")]<s[l(b,"centerY")]?s[l(b,"firstChild")]+2*u.ppr:s[l(b,"firstChild")]+3*u.ppr,s[l(b,"massCenterX")]=(s[l(b,"massCenterX")]*s[l(b,"mass")]+q[j(c,"x")]*q[j(c,"mass")])/(s[l(b,"mass")]+q[j(c,"mass")]),s[l(b,"massCenterY")]=(s[l(b,"massCenterY")]*s[l(b,"mass")]+q[j(c,"y")]*q[j(c,"mass")])/(s[l(b,"mass")]+q[j(c,"mass")]),s[l(b,"mass")]+=q[j(c,"mass")],b=E;else{if(s[l(b,"node")]<0){s[l(b,"node")]=c;break}if(s[l(b,"firstChild")]=a*u.ppr,p=s[l(b,"size")]/2,t=s[l(b,"firstChild")],s[l(t,"node")]=-1,s[l(t,"centerX")]=s[l(b,"centerX")]-p,s[l(t,"centerY")]=s[l(b,"centerY")]-p,s[l(t,"size")]=p,s[l(t,"nextSibling")]=t+u.ppr,s[l(t,"firstChild")]=-1,s[l(t,"mass")]=0,s[l(t,"massCenterX")]=0,s[l(t,"massCenterY")]=0,t+=u.ppr,s[l(t,"node")]=-1,s[l(t,"centerX")]=s[l(b,"centerX")]-p,s[l(t,"centerY")]=s[l(b,"centerY")]+p,s[l(t,"size")]=p,s[l(t,"nextSibling")]=t+u.ppr,s[l(t,"firstChild")]=-1,s[l(t,"mass")]=0,s[l(t,"massCenterX")]=0,s[l(t,"massCenterY")]=0,t+=u.ppr,s[l(t,"node")]=-1,s[l(t,"centerX")]=s[l(b,"centerX")]+p,s[l(t,"centerY")]=s[l(b,"centerY")]-p,s[l(t,"size")]=p,s[l(t,"nextSibling")]=t+u.ppr,s[l(t,"firstChild")]=-1,s[l(t,"mass")]=0,s[l(t,"massCenterX")]=0,s[l(t,"massCenterY")]=0,t+=u.ppr,s[l(t,"node")]=-1,s[l(t,"centerX")]=s[l(b,"centerX")]+p,s[l(t,"centerY")]=s[l(b,"centerY")]+p,s[l(t,"size")]=p,s[l(t,"nextSibling")]=s[l(b,"nextSibling")],s[l(t,"firstChild")]=-1,s[l(t,"mass")]=0,s[l(t,"massCenterX")]=0,s[l(t,"massCenterY")]=0,a+=4,E=q[j(s[l(b,"node")],"x")]<s[l(b,"centerX")]?q[j(s[l(b,"node")],"y")]<s[l(b,"centerY")]?s[l(b,"firstChild")]:s[l(b,"firstChild")]+u.ppr:q[j(s[l(b,"node")],"y")]<s[l(b,"centerY")]?s[l(b,"firstChild")]+2*u.ppr:s[l(b,"firstChild")]+3*u.ppr,s[l(b,"mass")]=q[j(s[l(b,"node")],"mass")],s[l(b,"massCenterX")]=q[j(s[l(b,"node")],"x")],s[l(b,"massCenterY")]=q[j(s[l(b,"node")],"y")],s[l(E,"node")]=s[l(b,"node")],s[l(b,"node")]=-1,F=q[j(c,"x")]<s[l(b,"centerX")]?q[j(c,"y")]<s[l(b,"centerY")]?s[l(b,"firstChild")]:s[l(b,"firstChild")]+u.ppr:q[j(c,"y")]<s[l(b,"centerY")]?s[l(b,"firstChild")]+2*u.ppr:s[l(b,"firstChild")]+3*u.ppr,E!==F){s[l(F,"node")]=c;break}b=E}}if(u.settings.barnesHutOptimize)for(w=u.settings.scalingRatio,c=0;c<u.nodesLength;c+=u.ppn)for(b=0;;)if(s[l(b,"firstChild")]>=0){if(C=Math.sqrt((q[j(c,"x")]-s[l(b,"massCenterX")])*(q[j(c,"x")]-s[l(b,"massCenterX")])+(q[j(c,"y")]-s[l(b,"massCenterY")])*(q[j(c,"y")]-s[l(b,"massCenterY")])),2*s[l(b,"size")]/C<u.settings.barnesHutTheta){if(x=q[j(c,"x")]-s[l(b,"massCenterX")],y=q[j(c,"y")]-s[l(b,"massCenterY")],u.settings.adjustSize?C>0?(D=w*q[j(c,"mass")]*s[l(b,"mass")]/C/C,q[j(c,"dx")]+=x*D,q[j(c,"dy")]+=y*D):0>C&&(D=-w*q[j(c,"mass")]*s[l(b,"mass")]/C,q[j(c,"dx")]+=x*D,q[j(c,"dy")]+=y*D):C>0&&(D=w*q[j(c,"mass")]*s[l(b,"mass")]/C/C,q[j(c,"dx")]+=x*D,q[j(c,"dy")]+=y*D),s[l(b,"nextSibling")]<0)break;b=s[l(b,"nextSibling")];continue}b=s[l(b,"firstChild")]}else{if(s[l(b,"node")]>=0&&s[l(b,"node")]!==c&&(x=q[j(c,"x")]-q[j(s[l(b,"node")],"x")],y=q[j(c,"y")]-q[j(s[l(b,"node")],"y")],C=Math.sqrt(x*x+y*y),u.settings.adjustSize?C>0?(D=w*q[j(c,"mass")]*q[j(s[l(b,"node")],"mass")]/C/C,q[j(c,"dx")]+=x*D,q[j(c,"dy")]+=y*D):0>C&&(D=-w*q[j(c,"mass")]*q[j(s[l(b,"node")],"mass")]/C,q[j(c,"dx")]+=x*D,q[j(c,"dy")]+=y*D):C>0&&(D=w*q[j(c,"mass")]*q[j(s[l(b,"node")],"mass")]/C/C,q[j(c,"dx")]+=x*D,q[j(c,"dy")]+=y*D)),s[l(b,"nextSibling")]<0)break;b=s[l(b,"nextSibling")]}else for(w=u.settings.scalingRatio,m=0;m<u.nodesLength;m+=u.ppn)for(n=0;m>n;n+=u.ppn)x=q[j(m,"x")]-q[j(n,"x")],y=q[j(m,"y")]-q[j(n,"y")],u.settings.adjustSize?(C=Math.sqrt(x*x+y*y)-q[j(m,"size")]-q[j(n,"size")],C>0?(D=w*q[j(m,"mass")]*q[j(n,"mass")]/C/C,q[j(m,"dx")]+=x*D,q[j(m,"dy")]+=y*D,q[j(n,"dx")]+=x*D,q[j(n,"dy")]+=y*D):0>C&&(D=100*w*q[j(m,"mass")]*q[j(n,"mass")],q[j(m,"dx")]+=x*D,q[j(m,"dy")]+=y*D,q[j(n,"dx")]-=x*D,q[j(n,"dy")]-=y*D)):(C=Math.sqrt(x*x+y*y),C>0&&(D=w*q[j(m,"mass")]*q[j(n,"mass")]/C/C,q[j(m,"dx")]+=x*D,q[j(m,"dy")]+=y*D,q[j(n,"dx")]-=x*D,q[j(n,"dy")]-=y*D));for(t=u.settings.gravity/u.settings.scalingRatio,w=u.settings.scalingRatio,c=0;c<u.nodesLength;c+=u.ppn)D=0,x=q[j(c,"x")],y=q[j(c,"y")],C=Math.sqrt(x*x+y*y),u.settings.strongGravityMode?C>0&&(D=w*q[j(c,"mass")]*t):C>0&&(D=w*q[j(c,"mass")]*t/C),q[j(c,"dx")]-=x*D,q[j(c,"dy")]-=y*D;for(w=1*(u.settings.outboundAttractionDistribution?v:1),o=0;o<u.edgesLength;o+=u.ppe)m=r[k(o,"source")],n=r[k(o,"target")],p=r[k(o,"weight")],B=Math.pow(p,u.settings.edgeWeightInfluence),x=q[j(m,"x")]-q[j(n,"x")],y=q[j(m,"y")]-q[j(n,"y")],u.settings.adjustSizes?(C=Math.sqrt(x*x+y*y-q[j(m,"size")]-q[j(n,"size")]),u.settings.linLogMode?u.settings.outboundAttractionDistribution?C>0&&(D=-w*B*Math.log(1+C)/C/q[j(m,"mass")]):C>0&&(D=-w*B*Math.log(1+C)/C):u.settings.outboundAttractionDistribution?C>0&&(D=-w*B/q[j(m,"mass")]):C>0&&(D=-w*B)):(C=Math.sqrt(x*x+y*y),u.settings.linLogMode?u.settings.outboundAttractionDistribution?C>0&&(D=-w*B*Math.log(1+C)/C/q[j(m,"mass")]):C>0&&(D=-w*B*Math.log(1+C)/C):u.settings.outboundAttractionDistribution?(C=1,D=-w*B/q[j(m,"mass")]):(C=1,D=-w*B)),C>0&&(q[j(m,"dx")]+=x*D,q[j(m,"dy")]+=y*D,q[j(n,"dx")]-=x*D,q[j(n,"dy")]-=y*D);var K,L,M,N,O=0;if(u.settings.adjustSizes)for(c=0;c<u.nodesLength;c+=u.ppn)q[j(c,"fixed")]||(K=Math.sqrt(q[j(c,"dx")]*q[j(c,"dx")]+q[j(c,"dy")]*q[j(c,"dy")]),K>u.maxForce&&(q[j(c,"dx")]=q[j(c,"dx")]*u.maxForce/K,q[j(c,"dy")]=q[j(c,"dy")]*u.maxForce/K),L=q[j(c,"mass")]*Math.sqrt((q[j(c,"old_dx")]-q[j(c,"dx")])*(q[j(c,"old_dx")]-q[j(c,"dx")])+(q[j(c,"old_dy")]-q[j(c,"dy")])*(q[j(c,"old_dy")]-q[j(c,"dy")])),M=Math.sqrt((q[j(c,"old_dx")]+q[j(c,"dx")])*(q[j(c,"old_dx")]+q[j(c,"dx")])+(q[j(c,"old_dy")]+q[j(c,"dy")])*(q[j(c,"old_dy")]+q[j(c,"dy")]))/2,N=.1*Math.log(1+M)/(1+Math.sqrt(L)),z=q[j(c,"x")],A=q[j(c,"y")],q[j(c,"x")]=q[j(c,"x")]+q[j(c,"dx")]*(N/u.settings.slowDown),q[j(c,"y")]=q[j(c,"y")]+q[j(c,"dy")]*(N/u.settings.slowDown),x=q[j(c,"x")],y=q[j(c,"y")],C=Math.sqrt((x-z)*(x-z)+(y-A)*(y-A)),O+=C);else for(c=0;c<u.nodesLength;c+=u.ppn)q[j(c,"fixed")]||(L=q[j(c,"mass")]*Math.sqrt((q[j(c,"old_dx")]-q[j(c,"dx")])*(q[j(c,"old_dx")]-q[j(c,"dx")])+(q[j(c,"old_dy")]-q[j(c,"dy")])*(q[j(c,"old_dy")]-q[j(c,"dy")])),M=Math.sqrt((q[j(c,"old_dx")]+q[j(c,"dx")])*(q[j(c,"old_dx")]+q[j(c,"dx")])+(q[j(c,"old_dy")]+q[j(c,"dy")])*(q[j(c,"old_dy")]+q[j(c,"dy")]))/2,N=q[j(c,"convergence")]*Math.log(1+M)/(1+Math.sqrt(L)),q[j(c,"convergence")]=Math.min(1,Math.sqrt(N*(q[j(c,"dx")]*q[j(c,"dx")]+q[j(c,"dy")]*q[j(c,"dy")])/(1+Math.sqrt(L)))),z=q[j(c,"x")],A=q[j(c,"y")],q[j(c,"x")]=q[j(c,"x")]+q[j(c,"dx")]*(N/u.settings.slowDown),q[j(c,"y")]=q[j(c,"y")]+q[j(c,"dy")]*(N/u.settings.slowDown),x=q[j(c,"x")],y=q[j(c,"y")],C=Math.sqrt((x-z)*(x-z)+(y-A)*(y-A)),O+=C);if(u.iterations++,u.settings.autoStop&&(u.converged=u.iterations>u.settings.maxIterations||O/u.nodesLength<u.settings.avgDistanceThreshold,u.converged&&u.settings.alignNodeSiblings)){var P,Q,R={},S={};for(o=0;o<u.edgesLength;o+=u.ppe)m=r[k(o,"source")],n=r[k(o,"target")],m!==n&&(R[m]=R[m]||{},R[n]=R[n]||{},R[m][n]=!0,R[n][m]=!0);Object.keys(R).forEach(function(a){a=~~a,Q=Object.keys(R[a]),2==Q.length&&(P=Q[0]+";"+Q[1],P in S?S[P].push(a):(P=Q[1]+";"+Q[0],S[P]||(S[P]=[~~Q[1],~~Q[0]]),S[P].push(a)))});var T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da,ea,fa,ga=u.settings.nodeSiblingsAngleMin;Object.keys(S).forEach(function(a){if(U=S[a].shift(),V=S[a].shift(),T=S[a],Y=q[j(U,"x")],Z=q[j(U,"y")],$=q[j(V,"x")],_=q[j(V,"y")],1!=T.length){if(W=Object.keys(R[U]).length,X=Object.keys(R[V]).length,aa=e(W/(W+X),0,1,.25,.75),ca=i(Y,Z,$,_,aa),da=g(Y,Z,$,_),ba=d(Y,Z,$,_),ea=h(da,ba),fa=f(ea),2*ga>Math.PI)throw new Error("ForceLink.Worker - Invalid parameter: angleMin must be smaller than 2 PI.");ga>0&&(ga>fa||fa>Math.PI-ga&&fa<=Math.PI?ea={x:2*Math.cos(Math.PI-ga),y:2*Math.sin(Math.PI-ga)}:(fa>2*Math.PI-ga||fa>=Math.PI&&fa<Math.PI+ga)&&(ea={x:2*Math.cos(ga),y:2*Math.sin(ga)}));var b=0,c=1,k=1;T.length%2==1&&(k=0,b=1);for(var l=0;l<T.length;l++)q[j(T[l],"x")]=ca.x+c*ea.x*k*(b||l>=2?u.settings.nodeSiblingsScale:2*u.settings.nodeSiblingsScale/3),q[j(T[l],"y")]=ca.y+c*ea.y*k*(b||l>=2?u.settings.nodeSiblingsScale:2*u.settings.nodeSiblingsScale/3),c=-c,k+=(l+b)%2}})}}function p(a){for(var b=0;a>b;b++)o();t()}var q,r,s,t,u={ppn:10,ppe:3,ppr:9,maxForce:10,iterations:0,converged:!1,settings:{linLogMode:!1,outboundAttractionDistribution:!1,adjustSizes:!1,edgeWeightInfluence:0,scalingRatio:1,strongGravityMode:!1,gravity:1,slowDown:1,barnesHutOptimize:!1,barnesHutTheta:.5,startingIterations:1,iterationsPerRender:1,maxIterations:1e3,avgDistanceThreshold:.01,autoStop:!1,alignNodeSiblings:!1,nodeSiblingsScale:1,nodeSiblingsAngleMin:0}},v={x:0,y:1,dx:2,dy:3,old_dx:4,old_dy:5,mass:6,convergence:7,size:8,fixed:9},w={source:0,target:1,weight:2},x={node:0,centerX:1,centerY:2,size:3,nextSibling:4,firstChild:5,mass:6,massCenterX:7,massCenterY:8};t="undefined"!=typeof window&&window.document?function(){if(!u.autoStop||u.converged){var a;document.createEvent?(a=document.createEvent("Event"),a.initEvent("newCoords",!0,!1)):(a=document.createEventObject(),a.eventType="newCoords"),a.eventName="newCoords",a.data={nodes:q.buffer,converged:u.converged},requestAnimationFrame(function(){document.dispatchEvent(a)})}}:function(){(!u.autoStop||u.converged)&&self.postMessage({nodes:q.buffer,converged:u.converged},[q.buffer])};var y=function(a){switch(a.data.action){case"start":m(new Float32Array(a.data.nodes),new Float32Array(a.data.edges),a.data.config),p(u.settings.startingIterations);break;case"loop":q=new Float32Array(a.data.nodes),p(u.settings.iterationsPerRender);break;case"config":n(a.data.config);break;case"kill":c(u),q=null,r=null,s=null,self.removeEventListener("message",y)}};self.addEventListener("message",y)};if(inWebWorker)eval(getWorkerFn());else{if("undefined"==typeof sigma)throw new Error("sigma is not declared");sigma.layouts.getForceLinkWorker=getWorkerFn}}.call(this);
//# sourceMappingURL=sigma.layout.forceLink.min.js.map
(function(a){"use strict";function b(){var a=this;this.init=function(a,b){if(b=b||{},this.sigInst=a,this.config=sigma.utils.extend(b,c),this.easing=b.easing,this.duration=b.duration,!sigma.plugins||"undefined"==typeof sigma.plugins.animate)throw new Error("sigma.plugins.animate is not declared");this.running=!1},this.atomicGo=function(){if(!this.running||this.iterCount<1)return!1;var b,c,d,e,f,g,h,i,j,k=this.sigInst.graph.nodes(),l=this.sigInst.graph.edges(),m=k.length,n=l.length;this.config.area=this.config.autoArea?m*m:this.config.area,this.iterCount--,this.running=this.iterCount>0;var o=Math.sqrt(this.config.area)/10,p=Math.sqrt(this.config.area/(1+m));for(b=0;m>b;b++)for(d=k[b],d.fr||(d.fr_x=d.x,d.fr_y=d.y,d.fr={dx:0,dy:0}),c=0;m>c;c++)e=k[c],d.id!=e.id&&(g=d.fr_x-e.fr_x,h=d.fr_y-e.fr_y,i=Math.sqrt(g*g+h*h)+.01,i>0&&(j=p*p/i,d.fr.dx+=g/i*j,d.fr.dy+=h/i*j));var q,r,s;for(b=0;n>b;b++)f=l[b],q=a.sigInst.graph.nodes(f.source),r=a.sigInst.graph.nodes(f.target),g=q.fr_x-r.fr_x,h=q.fr_y-r.fr_y,i=Math.sqrt(g*g+h*h)+.01,s=i*i/p,i>0&&(q.fr.dx-=g/i*s,q.fr.dy-=h/i*s,r.fr.dx+=g/i*s,r.fr.dy+=h/i*s);var t,u,v;for(b=0;m>b;b++)d=k[b],t=Math.sqrt(d.fr_x*d.fr_x+d.fr_y*d.fr_y),u=.01*p*a.config.gravity*t,d.fr.dx-=u*d.fr_x/t,d.fr.dy-=u*d.fr_y/t,d.fr.dx*=a.config.speed,d.fr.dy*=a.config.speed,d.fixed||(g=d.fr.dx,h=d.fr.dy,i=Math.sqrt(g*g+h*h),i>0&&(v=Math.min(o*a.config.speed,i),d.fr_x+=g/i*v,d.fr_y+=h/i*v));return this.running},this.go=function(){for(this.iterCount=this.config.iterations;this.running;)this.atomicGo();this.stop()},this.start=function(){if(!this.running){var b=this.sigInst.graph.nodes();this.running=!0;for(var c=0;c<b.length;c++)b[c].fr_x=b[c].x,b[c].fr_y=b[c].y,b[c].fr={dx:0,dy:0};e[a.sigInst.id].dispatchEvent("start"),this.go()}},this.stop=function(){var b=this.sigInst.graph.nodes();if(this.running=!1,this.easing)e[a.sigInst.id].dispatchEvent("interpolate"),sigma.plugins.animate(a.sigInst,{x:"fr_x",y:"fr_y"},{easing:a.easing,onComplete:function(){a.sigInst.refresh();for(var c=0;c<b.length;c++)b[c].fr=null,b[c].fr_x=null,b[c].fr_y=null;e[a.sigInst.id].dispatchEvent("stop")},duration:a.duration});else{for(var c=0;c<b.length;c++)b[c].x=b[c].fr_x,b[c].y=b[c].fr_y;this.sigInst.refresh();for(var c=0;c<b.length;c++)b[c].fr=null,b[c].fr_x=null,b[c].fr_y=null;e[a.sigInst.id].dispatchEvent("stop")}},this.kill=function(){this.sigInst=null,this.config=null,this.easing=null}}if("undefined"==typeof sigma)throw new Error("sigma is not declared");sigma.utils.pkg("sigma.layouts.fruchtermanReingold");var c={autoArea:!0,area:1,gravity:10,speed:.1,iterations:1e3},d={},e={};sigma.layouts.fruchtermanReingold.configure=function(a,c){if(!a)throw new Error('Missing argument: "sigInst"');if(!c)throw new Error('Missing argument: "config"');return d[a.id]||(d[a.id]=new b,e[a.id]={},sigma.classes.dispatcher.extend(e[a.id]),a.bind("kill",function(){d[a.id].kill(),d[a.id]=null,e[a.id]=null})),d[a.id].init(a,c),e[a.id]},sigma.layouts.fruchtermanReingold.start=function(a,b){if(!a)throw new Error('Missing argument: "sigInst"');return b&&this.configure(a,b),d[a.id].start(),e[a.id]},sigma.layouts.fruchtermanReingold.isRunning=function(a){if(!a)throw new Error('Missing argument: "sigInst"');return!!d[a.id]&&d[a.id].running},sigma.layouts.fruchtermanReingold.progress=function(a){if(!a)throw new Error('Missing argument: "sigInst"');return(d[a.id].config.iterations-d[a.id].iterCount)/d[a.id].config.iterations}}).call(this);
//# sourceMappingURL=sigma.layout.fruchtermanReingold.min.js.map
(function(a){"use strict";if("undefined"==typeof sigma)throw new Error("sigma not in scope.");sigma.utils.pkg("sigma.settings");var b={nodeHaloColor:"#fff",nodeHaloStroke:!1,nodeHaloStrokeColor:"#000",nodeHaloStrokeWidth:.5,nodeHaloSize:50,nodeHaloClustering:!1,nodeHaloClusteringMaxRadius:1e3,edgeHaloColor:"#fff",edgeHaloSize:10,drawHalo:!0};sigma.settings=sigma.utils.extend(sigma.settings||{},b)}).call(this),function(a){"use strict";function b(){for(var a=[],b=-1,c=arguments.length;++b<c;){var d=arguments[b];a.push(d)}var e=a[0],f=-1,g=e?e.length:0,h=[];a:for(;++f<g;)if(d=e[f],h.indexOf(d)<0){for(var b=c;--b;)if(a[b].indexOf(d)<0)continue a;h.push(d)}return h}function c(a,b,c){for(var d=0;d<a.length;d++)null!=a[d]&&(b.beginPath(),b.arc(a[d].x,a[d].y,a[d].radius,0,2*Math.PI,!0),b.closePath(),c?b.stroke():b.fill())}function d(a,b,c){if(c=c||Number.POSITIVE_INFINITY,a.length>1)for(var d,e,f,g=!0;g;){g=!1;for(var h=0;h<a.length;h++)if(null!==a[h])for(var i=h+1;i<a.length;i++)if(null!==a[i]&&(e=sigma.utils.getDistance(a[h].x,a[h].y,a[i].x,a[i].y),c>e&&e<a[h].radius+a[i].radius)){g=!0,f=[{x:a[h].x,y:a[h].y,radius:a[h].radius},{x:a[i].x,y:a[i].y,radius:a[i].radius}],a[h].points&&(f=f.concat(a[h].points)),a[i].points&&(f=f.concat(a[i].points)),d={x:0,y:0};for(var j=0;j<f.length;j++)d.x+=f[j].x,d.y+=f[j].y;d.x/=f.length,d.y/=f.length,d.radius=Math.max.apply(null,f.map(function(a){return b+sigma.utils.getDistance(d.x,d.y,a.x,a.y)})),a.push({x:d.x,y:d.y,radius:d.radius,points:f}),a[h]=a[i]=null;break}}return a}function e(a){a=a||{};var e=sigma.utils.getPixelRatio();this.domElements.background||(this.initDOM("canvas","background"),this.domElements.background.width=this.container.offsetWidth*e,this.domElements.background.height=this.container.offsetHeight*e,this.container.insertBefore(this.domElements.background,this.container.firstChild));var f,g,h,i,j,k,l,m,n,o,p=this,q=p.contexts.background,r=this instanceof sigma.renderers.webgl,s=p.options.prefix,t=r?s.substr(5):s,u=a.nodeHaloClustering||p.settings("nodeHaloClustering"),v=a.nodeHaloClusteringMaxRadius||p.settings("nodeHaloClusteringMaxRadius"),w=a.nodeHaloColor||p.settings("nodeHaloColor"),x=a.nodeHaloSize||p.settings("nodeHaloSize"),y=a.nodeHaloStroke||p.settings("nodeHaloStroke"),z=a.nodeHaloStrokeColor||p.settings("nodeHaloStrokeColor"),A=a.nodeHaloStrokeWidth||p.settings("nodeHaloStrokeWidth"),B=p.settings("borderSize")||0,C=p.settings("outerBorderSize")||0,D=a.edgeHaloColor||p.settings("edgeHaloColor"),E=a.edgeHaloSize||p.settings("edgeHaloSize"),F=a.drawHalo||p.settings("drawHalo"),G=a.nodes||[],H=a.edges||[];F&&(G=r?G:b(a.nodes,p.nodesOnScreen),H=r?H:b(a.edges,p.edgesOnScreen),q.clearRect(0,0,q.canvas.width,q.canvas.height),q.save(),q.strokeStyle=D,H.forEach(function(a){f=p.graph.nodes(a.source),g=p.graph.nodes(a.target),q.lineWidth=(a[s+"size"]||1)+E,q.beginPath(),h={},i=f[t+"size"],j=f[t+"x"],k=f[t+"y"],l=g[t+"x"],m=g[t+"y"],q.moveTo(j,k),"curve"===a.type||"curvedArrow"===a.type?a.source===a.target?(h=sigma.utils.getSelfLoopControlPoints(j,k,i),q.bezierCurveTo(h.x1,h.y1,h.x2,h.y2,l,m)):(h=sigma.utils.getQuadraticControlPoint(j,k,l,m),q.quadraticCurveTo(h.x,h.y,l,m)):(q.moveTo(j,k),q.lineTo(l,m)),q.stroke(),q.closePath()}),q.fillStyle=w,y&&(q.lineWidth=A,q.strokeStyle=z),n=B+C+x,o=G.filter(function(a){return!a.hidden}).map(function(a){return{x:a[t+"x"],y:a[t+"y"],radius:a[t+"size"]+n}}),u&&(o=d(o,n,v)),y&&c(o,q,!0),c(o,q),q.restore())}if("undefined"==typeof sigma)throw new Error("sigma not in scope.");sigma.renderers.canvas.prototype.halo=e,sigma.renderers.webgl.prototype.halo=e}.call(this);
//# sourceMappingURL=sigma.renderers.halo.min.js.map
!function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.arrow=function(a,b,c,d,e){var f=a.active?a.active_color||e("defaultEdgeActiveColor"):a.color,g=e("prefix")||"",h=e("edgeColor"),i=e("defaultNodeColor"),j=e("defaultEdgeColor"),k=e("edgeHoverLevel"),l=a[g+"size"]||1,m=c[g+"size"],n=b[g+"x"],o=b[g+"y"],p=c[g+"x"],q=c[g+"y"];l=a.hover?e("edgeHoverSizeRatio")*l:l;var r=2.5*l,s=Math.sqrt(Math.pow(p-n,2)+Math.pow(q-o,2)),t=n+(p-n)*(s-r-m)/s,u=o+(q-o)*(s-r-m)/s,v=(p-n)*r/s,w=(q-o)*r/s;if(k)switch(d.shadowOffsetX=0,k){case 1:d.shadowOffsetY=1.5,d.shadowBlur=4,d.shadowColor="rgba(0,0,0,0.36)";break;case 2:d.shadowOffsetY=3,d.shadowBlur=12,d.shadowColor="rgba(0,0,0,0.39)";break;case 3:d.shadowOffsetY=6,d.shadowBlur=12,d.shadowColor="rgba(0,0,0,0.42)";break;case 4:d.shadowOffsetY=10,d.shadowBlur=20,d.shadowColor="rgba(0,0,0,0.47)";break;case 5:d.shadowOffsetY=15,d.shadowBlur=24,d.shadowColor="rgba(0,0,0,0.52)"}if(!f)switch(h){case"source":f=b.color||i;break;case"target":f=c.color||i;break;default:f=j}f="edge"===e("edgeHoverColor")?a.hover_color||f:a.hover_color||e("defaultEdgeHoverColor")||f,d.strokeStyle=f,d.lineWidth=l,d.beginPath(),d.moveTo(n,o),d.lineTo(t,u),d.stroke(),d.fillStyle=f,d.beginPath(),d.moveTo(t+v,u+w),d.lineTo(t+.6*w,u-.6*v),d.lineTo(t-.6*w,u+.6*v),d.lineTo(t+v,u+w),d.closePath(),d.fill(),k&&(d.shadowOffsetY=0,d.shadowBlur=0,d.shadowColor="#000000"),sigma.canvas.edges.labels.arrow&&(a.hover=!0,sigma.canvas.edges.labels.arrow(a,b,c,d,e),a.hover=!1)}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.curve=function(a,b,c,d,e){var f=a.active?a.active_color||e("defaultEdgeActiveColor"):a.color,g=e("prefix")||"",h=e("edgeHoverSizeRatio")*(a[g+"size"]||1),i=e("edgeColor"),j=e("defaultNodeColor"),k=e("defaultEdgeColor"),l=e("edgeHoverLevel"),m={},n=b[g+"size"],o=b[g+"x"],p=b[g+"y"],q=c[g+"x"],r=c[g+"y"];if(m=b.id===c.id?sigma.utils.getSelfLoopControlPoints(o,p,n):sigma.utils.getQuadraticControlPoint(o,p,q,r),l)switch(d.shadowOffsetX=0,l){case 1:d.shadowOffsetY=1.5,d.shadowBlur=4,d.shadowColor="rgba(0,0,0,0.36)";break;case 2:d.shadowOffsetY=3,d.shadowBlur=12,d.shadowColor="rgba(0,0,0,0.39)";break;case 3:d.shadowOffsetY=6,d.shadowBlur=12,d.shadowColor="rgba(0,0,0,0.42)";break;case 4:d.shadowOffsetY=10,d.shadowBlur=20,d.shadowColor="rgba(0,0,0,0.47)";break;case 5:d.shadowOffsetY=15,d.shadowBlur=24,d.shadowColor="rgba(0,0,0,0.52)"}if(!f)switch(i){case"source":f=b.color||j;break;case"target":f=c.color||j;break;default:f=k}f="edge"===e("edgeHoverColor")?a.hover_color||f:a.hover_color||e("defaultEdgeHoverColor")||f,d.strokeStyle=f,d.lineWidth=h,d.beginPath(),d.moveTo(o,p),b.id===c.id?d.bezierCurveTo(m.x1,m.y1,m.x2,m.y2,q,r):d.quadraticCurveTo(m.x,m.y,q,r),d.stroke(),l&&(d.shadowOffsetY=0,d.shadowBlur=0,d.shadowColor="#000000"),sigma.canvas.edges.labels.curve&&(a.hover=!0,sigma.canvas.edges.labels.curve(a,b,c,d,e),a.hover=!1)}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.curvedArrow=function(a,b,c,d,e){var f,g,h,i,j,k,l=a.active?a.active_color||e("defaultEdgeActiveColor"):a.color,m=e("prefix")||"",n=e("edgeColor"),o=e("defaultNodeColor"),p=e("defaultEdgeColor"),q=e("edgeHoverLevel"),r={},s=e("edgeHoverSizeRatio")*(a[m+"size"]||1),t=c[m+"size"],u=b[m+"x"],v=b[m+"y"],w=c[m+"x"],x=c[m+"y"];if(r=b.id===c.id?sigma.utils.getSelfLoopControlPoints(u,v,t):sigma.utils.getQuadraticControlPoint(u,v,w,x),b.id===c.id?(f=Math.sqrt(Math.pow(w-r.x1,2)+Math.pow(x-r.y1,2)),g=2.5*s,h=r.x1+(w-r.x1)*(f-g-t)/f,i=r.y1+(x-r.y1)*(f-g-t)/f,j=(w-r.x1)*g/f,k=(x-r.y1)*g/f):(f=Math.sqrt(Math.pow(w-r.x,2)+Math.pow(x-r.y,2)),g=2.5*s,h=r.x+(w-r.x)*(f-g-t)/f,i=r.y+(x-r.y)*(f-g-t)/f,j=(w-r.x)*g/f,k=(x-r.y)*g/f),q)switch(d.shadowOffsetX=0,q){case 1:d.shadowOffsetY=1.5,d.shadowBlur=4,d.shadowColor="rgba(0,0,0,0.36)";break;case 2:d.shadowOffsetY=3,d.shadowBlur=12,d.shadowColor="rgba(0,0,0,0.39)";break;case 3:d.shadowOffsetY=6,d.shadowBlur=12,d.shadowColor="rgba(0,0,0,0.42)";break;case 4:d.shadowOffsetY=10,d.shadowBlur=20,d.shadowColor="rgba(0,0,0,0.47)";break;case 5:d.shadowOffsetY=15,d.shadowBlur=24,d.shadowColor="rgba(0,0,0,0.52)"}if(!l)switch(n){case"source":l=b.color||o;break;case"target":l=c.color||o;break;default:l=p}if(l="edge"===e("edgeHoverColor")?a.hover_color||l:a.hover_color||e("defaultEdgeHoverColor")||l,d.strokeStyle=l,d.lineWidth=s,d.beginPath(),d.moveTo(u,v),b.id===c.id?d.bezierCurveTo(r.x2,r.y2,r.x1,r.y1,h,i):d.quadraticCurveTo(r.x,r.y,h,i),d.stroke(),d.fillStyle=l,d.beginPath(),d.moveTo(h+j,i+k),d.lineTo(h+.6*k,i-.6*j),d.lineTo(h-.6*k,i+.6*j),d.lineTo(h+j,i+k),d.closePath(),d.fill(),q&&(d.shadowOffsetY=0,d.shadowBlur=0,d.shadowColor="#000000"),sigma.canvas.edges.labels.curvedArrow){a.hover=!0;var y=sigma.canvas.edges.labels.curvedArrow;(y.render||y)(a,b,c,d,e),a.hover=!1}}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.dashed=function(a,b,c,d,e){var f=a.active?a.active_color||e("defaultEdgeActiveColor"):a.color,g=e("prefix")||"",h=a[g+"size"]||1,i=e("edgeColor"),j=e("defaultNodeColor"),k=e("defaultEdgeColor"),l=e("edgeHoverLevel");if(!f)switch(i){case"source":f=b.color||j;break;case"target":f=c.color||j;break;default:f=k}if(f="edge"===e("edgeHoverColor")?a.hover_color||f:a.hover_color||e("defaultEdgeHoverColor")||f,h*=e("edgeHoverSizeRatio"),d.save(),l)switch(d.shadowOffsetX=0,l){case 1:d.shadowOffsetY=1.5,d.shadowBlur=4,d.shadowColor="rgba(0,0,0,0.36)";break;case 2:d.shadowOffsetY=3,d.shadowBlur=12,d.shadowColor="rgba(0,0,0,0.39)";break;case 3:d.shadowOffsetY=6,d.shadowBlur=12,d.shadowColor="rgba(0,0,0,0.42)";break;case 4:d.shadowOffsetY=10,d.shadowBlur=20,d.shadowColor="rgba(0,0,0,0.47)";break;case 5:d.shadowOffsetY=15,d.shadowBlur=24,d.shadowColor="rgba(0,0,0,0.52)"}d.setLineDash([8,3]),d.strokeStyle=f,d.lineWidth=h,d.beginPath(),d.moveTo(b[g+"x"],b[g+"y"]),d.lineTo(c[g+"x"],c[g+"y"]),d.stroke(),l&&(d.shadowOffsetY=0,d.shadowBlur=0,d.shadowColor="#000000"),d.restore(),sigma.canvas.edges.labels&&(a.hover=!0,sigma.canvas.edges.labels.def(a,b,c,d,e),a.hover=!1)}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.def=function(a,b,c,d,e){var f=a.active?a.active_color||e("defaultEdgeActiveColor"):a.color,g=e("prefix")||"",h=a[g+"size"]||1,i=e("edgeColor"),j=e("defaultNodeColor"),k=e("defaultEdgeColor"),l=e("edgeHoverLevel");if(l)switch(d.shadowOffsetX=0,l){case 1:d.shadowOffsetY=1.5,d.shadowBlur=4,d.shadowColor="rgba(0,0,0,0.36)";break;case 2:d.shadowOffsetY=3,d.shadowBlur=12,d.shadowColor="rgba(0,0,0,0.39)";break;case 3:d.shadowOffsetY=6,d.shadowBlur=12,d.shadowColor="rgba(0,0,0,0.42)";break;case 4:d.shadowOffsetY=10,d.shadowBlur=20,d.shadowColor="rgba(0,0,0,0.47)";break;case 5:d.shadowOffsetY=15,d.shadowBlur=24,d.shadowColor="rgba(0,0,0,0.52)"}if(!f)switch(i){case"source":f=b.color||j;break;case"target":f=c.color||j;break;default:f=k}f="edge"===e("edgeHoverColor")?a.hover_color||f:a.hover_color||e("defaultEdgeHoverColor")||f,h*=e("edgeHoverSizeRatio"),d.strokeStyle=f,d.lineWidth=h,d.beginPath(),d.moveTo(b[g+"x"],b[g+"y"]),d.lineTo(c[g+"x"],c[g+"y"]),d.stroke(),l&&(d.shadowOffsetY=0,d.shadowBlur=0,d.shadowColor="#000000"),sigma.canvas.edges.labels.def&&(a.hover=!0,sigma.canvas.edges.labels.def(a,b,c,d,e),a.hover=!1)}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.dotted=function(a,b,c,d,e){var f=a.active?a.active_color||e("defaultEdgeActiveColor"):a.color,g=e("prefix")||"",h=a[g+"size"]||1,i=e("edgeColor"),j=e("defaultNodeColor"),k=e("defaultEdgeColor"),l=e("edgeHoverLevel");if(!f)switch(i){case"source":f=b.color||j;break;case"target":f=c.color||j;break;default:f=k}if(f="edge"===e("edgeHoverColor")?a.hover_color||f:a.hover_color||e("defaultEdgeHoverColor")||f,h*=e("edgeHoverSizeRatio"),d.save(),l)switch(d.shadowOffsetX=0,l){case 1:d.shadowOffsetY=1.5,d.shadowBlur=4,d.shadowColor="rgba(0,0,0,0.36)";break;case 2:d.shadowOffsetY=3,d.shadowBlur=12,d.shadowColor="rgba(0,0,0,0.39)";break;case 3:d.shadowOffsetY=6,d.shadowBlur=12,d.shadowColor="rgba(0,0,0,0.42)";break;case 4:d.shadowOffsetY=10,d.shadowBlur=20,d.shadowColor="rgba(0,0,0,0.47)";break;case 5:d.shadowOffsetY=15,d.shadowBlur=24,d.shadowColor="rgba(0,0,0,0.52)"}if(d.setLineDash([2]),d.strokeStyle=f,d.lineWidth=h,d.beginPath(),d.moveTo(b[g+"x"],b[g+"y"]),d.lineTo(c[g+"x"],c[g+"y"]),d.stroke(),l&&(d.shadowOffsetY=0,d.shadowBlur=0,d.shadowColor="#000000"),d.restore(),sigma.canvas.edges.labels){a.hover=!0;var m=sigma.canvas.edges.labels.def;(m.render||m)(a,b,c,d,e),a.hover=!1}}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.parallel=function(a,b,c,d,e){var f,g,h=a.active?a.active_color||e("defaultEdgeActiveColor"):a.color,i=e("prefix")||"",j=a[i+"size"]||1,k=e("edgeColor"),l=e("defaultNodeColor"),m=e("defaultEdgeColor"),n=e("edgeHoverLevel"),o=b[i+"x"],p=b[i+"y"],q=c[i+"x"],r=c[i+"y"],s=sigma.utils.getDistance(o,p,q,r);if(!h)switch(k){case"source":h=b.color||l;break;case"target":h=c.color||l;break;default:h=m}if(h="edge"===e("edgeHoverColor")?a.hover_color||h:a.hover_color||e("defaultEdgeHoverColor")||h,j*=e("edgeHoverSizeRatio"),f=sigma.utils.getCircleIntersection(o,p,j,q,r,s),g=sigma.utils.getCircleIntersection(q,r,j,o,p,s),d.save(),n)switch(d.shadowOffsetX=0,n){case 1:d.shadowOffsetY=1.5,d.shadowBlur=4,d.shadowColor="rgba(0,0,0,0.36)";break;case 2:d.shadowOffsetY=3,d.shadowBlur=12,d.shadowColor="rgba(0,0,0,0.39)";break;case 3:d.shadowOffsetY=6,d.shadowBlur=12,d.shadowColor="rgba(0,0,0,0.42)";break;case 4:d.shadowOffsetY=10,d.shadowBlur=20,d.shadowColor="rgba(0,0,0,0.47)";break;case 5:d.shadowOffsetY=15,d.shadowBlur=24,d.shadowColor="rgba(0,0,0,0.52)"}d.strokeStyle=h,d.lineWidth=j,d.beginPath(),d.moveTo(f.xi,f.yi),d.lineTo(g.xi_prime,g.yi_prime),d.closePath(),d.stroke(),d.beginPath(),d.moveTo(f.xi_prime,f.yi_prime),d.lineTo(g.xi,g.yi),d.closePath(),d.stroke(),n&&(d.shadowOffsetY=0,d.shadowBlur=0,d.shadowColor="#000000"),d.restore(),sigma.canvas.edges.labels&&(a.hover=!0,sigma.canvas.edges.labels.def(a,b,c,d,e),a.hover=!1)}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.tapered=function(a,b,c,d,e){var f=a.active?a.active_color||e("defaultEdgeActiveColor"):a.color,g=e("prefix")||"",h=a[g+"size"]||1,i=e("edgeColor"),g=e("prefix")||"",j=e("defaultNodeColor"),k=e("defaultEdgeColor"),l=e("edgeHoverLevel"),m=b[g+"x"],n=b[g+"y"],o=c[g+"x"],p=c[g+"y"],q=sigma.utils.getDistance(m,n,o,p);if(!f)switch(i){case"source":f=b.color||j;break;case"target":f=c.color||j;break;default:f=k}f="edge"===e("edgeHoverColor")?a.hover_color||f:a.hover_color||e("defaultEdgeHoverColor")||f,h*=e("edgeHoverSizeRatio");var r=sigma.utils.getCircleIntersection(m,n,h,o,p,q);if(d.save(),l)switch(d.shadowOffsetX=0,l){case 1:d.shadowOffsetY=1.5,d.shadowBlur=4,d.shadowColor="rgba(0,0,0,0.36)";break;case 2:d.shadowOffsetY=3,d.shadowBlur=12,d.shadowColor="rgba(0,0,0,0.39)";break;case 3:d.shadowOffsetY=6,d.shadowBlur=12,d.shadowColor="rgba(0,0,0,0.42)";break;case 4:d.shadowOffsetY=10,d.shadowBlur=20,d.shadowColor="rgba(0,0,0,0.47)";break;case 5:d.shadowOffsetY=15,d.shadowBlur=24,d.shadowColor="rgba(0,0,0,0.52)"}d.globalAlpha=.65,d.fillStyle=f,d.beginPath(),d.moveTo(o,p),d.lineTo(r.xi,r.yi),d.lineTo(r.xi_prime,r.yi_prime),d.closePath(),d.fill(),l&&(d.shadowOffsetY=0,d.shadowBlur=0,d.shadowColor="#000000"),d.restore(),sigma.canvas.edges.labels&&(a.hover=!0,sigma.canvas.edges.labels.def(a,b,c,d,e),a.hover=!1)}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.arrow=function(a,b,c,d,e){var f=a.active?a.active_color||e("defaultEdgeActiveColor"):a.color,g=e("prefix")||"",h=e("edgeColor"),i=e("defaultNodeColor"),j=e("defaultEdgeColor"),k=a.active?e("edgeActiveLevel"):a.level,l=a[g+"size"]||1,m=c[g+"size"],n=b[g+"x"],o=b[g+"y"],p=c[g+"x"],q=c[g+"y"],r=2.5*l,s=Math.sqrt(Math.pow(p-n,2)+Math.pow(q-o,2)),t=n+(p-n)*(s-r-m)/s,u=o+(q-o)*(s-r-m)/s,v=(p-n)*r/s,w=(q-o)*r/s;if(k)switch(d.shadowOffsetX=0,k){case 1:d.shadowOffsetY=1.5,d.shadowBlur=4,d.shadowColor="rgba(0,0,0,0.36)";break;case 2:d.shadowOffsetY=3,d.shadowBlur=12,d.shadowColor="rgba(0,0,0,0.39)";break;case 3:d.shadowOffsetY=6,d.shadowBlur=12,d.shadowColor="rgba(0,0,0,0.42)";break;case 4:d.shadowOffsetY=10,d.shadowBlur=20,d.shadowColor="rgba(0,0,0,0.47)";break;case 5:d.shadowOffsetY=15,d.shadowBlur=24,d.shadowColor="rgba(0,0,0,0.52)"}if(!f)switch(h){case"source":f=b.color||i;break;case"target":f=c.color||i;break;default:f=j}a.active?d.strokeStyle="edge"===e("edgeActiveColor")?f||j:e("defaultEdgeActiveColor"):d.strokeStyle=f,d.lineWidth=l,d.beginPath(),d.moveTo(n,o),d.lineTo(t,u),d.stroke(),d.fillStyle=f,d.beginPath(),d.moveTo(t+v,u+w),d.lineTo(t+.6*w,u-.6*v),d.lineTo(t-.6*w,u+.6*v),d.lineTo(t+v,u+w),d.closePath(),d.fill(),k&&(d.shadowOffsetY=0,d.shadowBlur=0,d.shadowColor="#000000")}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.curve=function(a,b,c,d,e){var f=a.active?a.active_color||e("defaultEdgeActiveColor"):a.color,g=e("prefix")||"",h=a[g+"size"]||1,i=e("edgeColor"),j=e("defaultNodeColor"),k=e("defaultEdgeColor"),l=a.active?e("edgeActiveLevel"):a.level,m={},n=b[g+"size"],o=b[g+"x"],p=b[g+"y"],q=c[g+"x"],r=c[g+"y"];if(m=b.id===c.id?sigma.utils.getSelfLoopControlPoints(o,p,n):sigma.utils.getQuadraticControlPoint(o,p,q,r),l)switch(d.shadowOffsetX=0,l){case 1:d.shadowOffsetY=1.5,d.shadowBlur=4,d.shadowColor="rgba(0,0,0,0.36)";break;case 2:d.shadowOffsetY=3,d.shadowBlur=12,d.shadowColor="rgba(0,0,0,0.39)";break;case 3:d.shadowOffsetY=6,d.shadowBlur=12,d.shadowColor="rgba(0,0,0,0.42)";break;case 4:d.shadowOffsetY=10,d.shadowBlur=20,d.shadowColor="rgba(0,0,0,0.47)";break;case 5:d.shadowOffsetY=15,d.shadowBlur=24,d.shadowColor="rgba(0,0,0,0.52)"}if(!f)switch(i){case"source":f=b.color||j;break;case"target":f=c.color||j;break;default:f=k}a.active?d.strokeStyle="edge"===e("edgeActiveColor")?f||k:e("defaultEdgeActiveColor"):d.strokeStyle=f,d.lineWidth=h,d.beginPath(),d.moveTo(o,p),b.id===c.id?d.bezierCurveTo(m.x1,m.y1,m.x2,m.y2,q,r):d.quadraticCurveTo(m.x,m.y,q,r),d.stroke(),l&&(d.shadowOffsetY=0,d.shadowBlur=0,d.shadowColor="#000000")}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.curvedArrow=function(a,b,c,d,e){var f,g,h,i,j,k,l=a.active?a.active_color||e("defaultEdgeActiveColor"):a.color,m=e("prefix")||"",n=e("edgeColor"),o=e("defaultNodeColor"),p=e("defaultEdgeColor"),q=a.active?e("edgeActiveLevel"):a.level,r={},s=a[m+"size"]||1,t=c[m+"size"],u=b[m+"x"],v=b[m+"y"],w=c[m+"x"],x=c[m+"y"];if(r=b.id===c.id?sigma.utils.getSelfLoopControlPoints(u,v,t):sigma.utils.getQuadraticControlPoint(u,v,w,x),b.id===c.id?(f=Math.sqrt(Math.pow(w-r.x1,2)+Math.pow(x-r.y1,2)),g=2.5*s,h=r.x1+(w-r.x1)*(f-g-t)/f,i=r.y1+(x-r.y1)*(f-g-t)/f,j=(w-r.x1)*g/f,k=(x-r.y1)*g/f):(f=Math.sqrt(Math.pow(w-r.x,2)+Math.pow(x-r.y,2)),g=2.5*s,h=r.x+(w-r.x)*(f-g-t)/f,i=r.y+(x-r.y)*(f-g-t)/f,j=(w-r.x)*g/f,k=(x-r.y)*g/f),q)switch(d.shadowOffsetX=0,q){case 1:d.shadowOffsetY=1.5,d.shadowBlur=4,d.shadowColor="rgba(0,0,0,0.36)";break;case 2:d.shadowOffsetY=3,d.shadowBlur=12,d.shadowColor="rgba(0,0,0,0.39)";break;case 3:d.shadowOffsetY=6,d.shadowBlur=12,d.shadowColor="rgba(0,0,0,0.42)";break;case 4:d.shadowOffsetY=10,d.shadowBlur=20,d.shadowColor="rgba(0,0,0,0.47)";break;case 5:d.shadowOffsetY=15,d.shadowBlur=24,d.shadowColor="rgba(0,0,0,0.52)"}if(!l)switch(n){case"source":l=b.color||o;break;case"target":l=c.color||o;break;default:l=p}a.active?d.strokeStyle="edge"===e("edgeActiveColor")?l||p:e("defaultEdgeActiveColor"):d.strokeStyle=l,d.lineWidth=s,d.beginPath(),d.moveTo(u,v),b.id===c.id?d.bezierCurveTo(r.x2,r.y2,r.x1,r.y1,h,i):d.quadraticCurveTo(r.x,r.y,h,i),d.stroke(),d.fillStyle=l,d.beginPath(),d.moveTo(h+j,i+k),d.lineTo(h+.6*k,i-.6*j),d.lineTo(h-.6*k,i+.6*j),d.lineTo(h+j,i+k),d.closePath(),d.fill(),q&&(d.shadowOffsetY=0,d.shadowBlur=0,d.shadowColor="#000000")}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.dashed=function(a,b,c,d,e){var f=a.active?a.active_color||e("defaultEdgeActiveColor"):a.color,g=e("prefix")||"",h=a[g+"size"]||1,i=e("edgeColor"),j=e("defaultNodeColor"),k=e("defaultEdgeColor"),l=a.active?e("edgeActiveLevel"):a.level;if(!f)switch(i){case"source":f=b.color||j;break;case"target":f=c.color||j;break;default:f=k}if(d.save(),l)switch(d.shadowOffsetX=0,l){case 1:d.shadowOffsetY=1.5,d.shadowBlur=4,d.shadowColor="rgba(0,0,0,0.36)";break;case 2:d.shadowOffsetY=3,d.shadowBlur=12,d.shadowColor="rgba(0,0,0,0.39)";break;case 3:d.shadowOffsetY=6,d.shadowBlur=12,d.shadowColor="rgba(0,0,0,0.42)";break;case 4:d.shadowOffsetY=10,d.shadowBlur=20,d.shadowColor="rgba(0,0,0,0.47)";break;case 5:d.shadowOffsetY=15,d.shadowBlur=24,d.shadowColor="rgba(0,0,0,0.52)"}a.active?d.strokeStyle="edge"===e("edgeActiveColor")?f||k:e("defaultEdgeActiveColor"):d.strokeStyle=f,d.setLineDash([8,3]),d.lineWidth=h,d.beginPath(),d.moveTo(b[g+"x"],b[g+"y"]),d.lineTo(c[g+"x"],c[g+"y"]),d.stroke(),l&&(d.shadowOffsetY=0,d.shadowBlur=0,d.shadowColor="#000000"),d.restore()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.def=function(a,b,c,d,e){var f=a.active?a.active_color||e("defaultEdgeActiveColor"):a.color,g=e("prefix")||"",h=a[g+"size"]||1,i=e("edgeColor"),j=e("defaultNodeColor"),k=e("defaultEdgeColor"),l=a.active?e("edgeActiveLevel"):a.level;if(l)switch(d.shadowOffsetX=0,l){case 1:d.shadowOffsetY=1.5,d.shadowBlur=4,d.shadowColor="rgba(0,0,0,0.36)";break;case 2:d.shadowOffsetY=3,d.shadowBlur=12,d.shadowColor="rgba(0,0,0,0.39)";break;case 3:d.shadowOffsetY=6,d.shadowBlur=12,d.shadowColor="rgba(0,0,0,0.42)";break;case 4:d.shadowOffsetY=10,d.shadowBlur=20,d.shadowColor="rgba(0,0,0,0.47)";break;case 5:d.shadowOffsetY=15,d.shadowBlur=24,d.shadowColor="rgba(0,0,0,0.52)"}if(!f)switch(i){case"source":f=b.color||j;break;case"target":f=c.color||j;break;default:f=k}a.active?d.strokeStyle="edge"===e("edgeActiveColor")?f||k:e("defaultEdgeActiveColor"):d.strokeStyle=f,d.lineWidth=h,d.beginPath(),d.moveTo(b[g+"x"],b[g+"y"]),d.lineTo(c[g+"x"],c[g+"y"]),d.stroke(),l&&(d.shadowOffsetY=0,d.shadowBlur=0,d.shadowColor="#000000")}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.dotted=function(a,b,c,d,e){var f=a.active?a.active_color||e("defaultEdgeActiveColor"):a.color,g=e("prefix")||"",h=a[g+"size"]||1,i=e("edgeColor"),j=e("defaultNodeColor"),k=e("defaultEdgeColor"),l=a.active?e("edgeActiveLevel"):a.level;if(!f)switch(i){case"source":f=b.color||j;break;case"target":f=c.color||j;break;default:f=k}if(d.save(),l)switch(d.shadowOffsetX=0,l){case 1:d.shadowOffsetY=1.5,d.shadowBlur=4,d.shadowColor="rgba(0,0,0,0.36)";break;case 2:d.shadowOffsetY=3,d.shadowBlur=12,d.shadowColor="rgba(0,0,0,0.39)";break;case 3:d.shadowOffsetY=6,d.shadowBlur=12,d.shadowColor="rgba(0,0,0,0.42)";break;case 4:d.shadowOffsetY=10,d.shadowBlur=20,d.shadowColor="rgba(0,0,0,0.47)";break;case 5:d.shadowOffsetY=15,d.shadowBlur=24,d.shadowColor="rgba(0,0,0,0.52)"}a.active?d.strokeStyle="edge"===e("edgeActiveColor")?f||k:e("defaultEdgeActiveColor"):d.strokeStyle=f,d.setLineDash([2]),d.lineWidth=h,d.beginPath(),d.moveTo(b[g+"x"],b[g+"y"]),d.lineTo(c[g+"x"],c[g+"y"]),d.stroke(),l&&(d.shadowOffsetY=0,d.shadowBlur=0,d.shadowColor="#000000"),d.restore()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.parallel=function(a,b,c,d,e){var f,g,h=a.active?a.active_color||e("defaultEdgeActiveColor"):a.color,i=e("prefix")||"",j=a[i+"size"]||1,k=e("edgeColor"),l=e("defaultNodeColor"),m=e("defaultEdgeColor"),n=a.active?e("edgeActiveLevel"):a.level,o=b[i+"x"],p=b[i+"y"],q=c[i+"x"],r=c[i+"y"],s=sigma.utils.getDistance(o,p,q,r);if(!h)switch(k){case"source":h=b.color||l;break;case"target":h=c.color||l;break;default:h=m}if(f=sigma.utils.getCircleIntersection(o,p,j,q,r,s),g=sigma.utils.getCircleIntersection(q,r,j,o,p,s),d.save(),n)switch(d.shadowOffsetX=0,n){case 1:d.shadowOffsetY=1.5,d.shadowBlur=4,d.shadowColor="rgba(0,0,0,0.36)";break;case 2:d.shadowOffsetY=3,d.shadowBlur=12,d.shadowColor="rgba(0,0,0,0.39)";break;case 3:d.shadowOffsetY=6,d.shadowBlur=12,d.shadowColor="rgba(0,0,0,0.42)";break;case 4:d.shadowOffsetY=10,d.shadowBlur=20,d.shadowColor="rgba(0,0,0,0.47)";break;case 5:d.shadowOffsetY=15,d.shadowBlur=24,d.shadowColor="rgba(0,0,0,0.52)"}a.active?d.strokeStyle="edge"===e("edgeActiveColor")?h||m:e("defaultEdgeActiveColor"):d.strokeStyle=h,d.lineWidth=j,d.beginPath(),d.moveTo(f.xi,f.yi),d.lineTo(g.xi_prime,g.yi_prime),d.closePath(),d.stroke(),d.beginPath(),d.moveTo(f.xi_prime,f.yi_prime),d.lineTo(g.xi,g.yi),d.closePath(),d.stroke(),n&&(d.shadowOffsetY=0,d.shadowBlur=0,d.shadowColor="#000000"),d.restore()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.tapered=function(a,b,c,d,e){var f=a.active?a.active_color||e("defaultEdgeActiveColor"):a.color,g=e("prefix")||"",h=a[g+"size"]||1,i=e("edgeColor"),g=e("prefix")||"",j=e("defaultNodeColor"),k=e("defaultEdgeColor"),l=a.active?e("edgeActiveLevel"):a.level,m=b[g+"x"],n=b[g+"y"],o=c[g+"x"],p=c[g+"y"],q=sigma.utils.getDistance(m,n,o,p);if(!f)switch(i){case"source":f=b.color||j;break;case"target":f=c.color||j;break;default:f=k}var r=sigma.utils.getCircleIntersection(m,n,h,o,p,q);if(d.save(),l)switch(d.shadowOffsetX=0,l){case 1:d.shadowOffsetY=1.5,d.shadowBlur=4,d.shadowColor="rgba(0,0,0,0.36)";break;case 2:d.shadowOffsetY=3,d.shadowBlur=12,d.shadowColor="rgba(0,0,0,0.39)";break;case 3:d.shadowOffsetY=6,d.shadowBlur=12,d.shadowColor="rgba(0,0,0,0.42)";break;case 4:d.shadowOffsetY=10,d.shadowBlur=20,d.shadowColor="rgba(0,0,0,0.47)";break;case 5:d.shadowOffsetY=15,d.shadowBlur=24,d.shadowColor="rgba(0,0,0,0.52)"}a.active?d.fillStyle="edge"===e("edgeActiveColor")?f||k:e("defaultEdgeActiveColor"):d.fillStyle=f,d.globalAlpha=.65,d.beginPath(),d.moveTo(o,p),d.lineTo(r.xi,r.yi),d.lineTo(r.xi_prime,r.yi_prime),d.closePath(),d.fill(),l&&(d.shadowOffsetY=0,d.shadowBlur=0,d.shadowColor="#000000"),d.restore()}}(),function(a){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.canvas.extremities"),sigma.canvas.extremities.def=function(a,b,c,d,e){(sigma.canvas.hovers[b.type]||sigma.canvas.hovers.def)(b,d,e),(sigma.canvas.hovers[c.type]||sigma.canvas.hovers.def)(c,d,e)}}.call(this),function(a){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.canvas.hovers"),sigma.canvas.hovers.def=function(a,b,c){function d(b){b.font=(f?f+" ":"")+l+"px "+(c("hoverFont")||c("font")),b.beginPath(),b.fillStyle="node"===c("labelHoverBGColor")?a.color||i:c("defaultHoverLabelBGColor"),a.label&&c("labelHoverShadow")&&(b.shadowOffsetX=0,b.shadowOffsetY=0,b.shadowBlur=8,b.shadowColor=c("labelHoverShadowColor"))}function e(a,b,d,e){var f=Math.round(e[g+"x"]),i=Math.round(e[g+"y"]),k=sigma.utils.canvas.getTextWidth(b,c("approximateLabelWidth"),d,e.label),l=Math.round(k+4),m=d+4,n=Math.round(h+.25*d);if(e.label&&"string"==typeof e.label)switch(a){case"center":i=Math.round(e[g+"y"]-.5*d-2),b.rect(f-.5*l,i,l,m);break;case"left":f=Math.round(e[g+"x"]+.5*d+2),i=Math.round(e[g+"y"]-.5*d-2),l+=.5*h+.5*d,b.moveTo(f,i+n),b.arcTo(f,i,f-n,i,n),b.lineTo(f-l-j-n,i),b.lineTo(f-l-j-n,i+m),b.lineTo(f-n,i+m),b.arcTo(f,i+m,f,i+m-n,n),b.lineTo(f,i+n);break;case"top":b.rect(f-.5*l,i-n-m,l,m);break;case"bottom":b.rect(f-.5*l,i+n,l,m);break;case"inside":if(2*n>=k)break;case"right":default:f=Math.round(e[g+"x"]-.5*d-2),i=Math.round(e[g+"y"]-.5*d-2),l+=.5*h+.5*d,b.moveTo(f,i+n),b.arcTo(f,i,f+n,i,n),b.lineTo(f+l+j+n,i),b.lineTo(f+l+j+n,i+m),b.lineTo(f+n,i+m),b.arcTo(f,i+m,f,i+m-n,n),b.lineTo(f,i+n)}b.closePath(),b.fill(),b.shadowOffsetY=0,b.shadowBlur=0}var f=c("hoverFontStyle")||c("fontStyle"),g=c("prefix")||"",h=a[g+"size"]||1,i=c("defaultNodeColor"),j=c("borderSize"),k=c("labelAlignment"),l="fixed"===c("labelSize")?c("defaultLabelSize"):c("labelSizeRatio")*h,m="node"===c("nodeHoverColor")?a.color||i:c("defaultNodeHoverColor"),n=c("nodeHoverLevel");if("center"!==k&&(d(b),e(k,b,l,a)),n)switch(b.shadowOffsetX=0,n){case 1:b.shadowOffsetY=1.5,b.shadowBlur=4,b.shadowColor="rgba(0,0,0,0.36)";break;case 2:b.shadowOffsetY=3,b.shadowBlur=12,b.shadowColor="rgba(0,0,0,0.39)";break;case 3:b.shadowOffsetY=6,b.shadowBlur=12,b.shadowColor="rgba(0,0,0,0.42)";break;case 4:b.shadowOffsetY=10,b.shadowBlur=20,b.shadowColor="rgba(0,0,0,0.47)";break;case 5:b.shadowOffsetY=15,b.shadowBlur=24,b.shadowColor="rgba(0,0,0,0.52)"}j>0&&(b.beginPath(),b.fillStyle="node"===c("nodeBorderColor")?a.color||i:c("defaultNodeBorderColor"),b.arc(a[g+"x"],a[g+"y"],h+j,0,2*Math.PI,!0),b.closePath(),b.fill());var o=sigma.canvas.nodes[a.type]||sigma.canvas.nodes.def;if(o(a,b,c,{color:m}),n&&(b.shadowOffsetY=0,b.shadowBlur=0),"center"===k&&(d(b),e(k,b,l,a)),"string"==typeof a.label){b.fillStyle="node"===c("labelHoverColor")?a.color||i:c("defaultLabelHoverColor");var p,q=0,r=l/3;switch(b.textAlign="center",k){case"bottom":r=+h+4*l/3;break;case"center":break;case"left":b.textAlign="right",q=-h-j-c("outerBorderSize")-3-p;break;case"top":r=-h-2*l/3;break;case"inside":if(p=getTextWidth(a.label),2*(h+l/3)>=p)break;case"right":default:q=h+j+c("outerBorderSize")+3,b.textAlign="left"}b.fillText(a.label,Math.round(a[g+"x"]+q),Math.round(a[g+"y"]+r))}}}.call(this),function(a){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.canvas.labels"),sigma.canvas.labels.def=function(a,b,c,d){var e,f,g,h,i=c("prefix")||"",j=a[i+"size"]||1,k=c(a.active?"activeFontStyle":"fontStyle"),l=a.active?c("borderSize")+c("outerBorderSize"):0,m=c("labelAlignment");if(!(j<c("labelThreshold"))&&a.label&&"string"==typeof a.label){e="fixed"===c("labelSize")?c("defaultLabelSize"):c("labelSizeRatio")*j;var n=(k?k+" ":"")+e+"px "+(a.active?c("activeFont")||c("font"):c("font"));switch(d&&d.ctx.font!=n?(b.font=n,d.ctx.font=n):b.font=n,a.active?b.fillStyle="node"===c("labelActiveColor")?a.active_color||c("defaultNodeActiveColor"):c("defaultLabelActiveColor"):b.fillStyle="node"===c("labelColor")?a.color||c("defaultNodeColor"):c("defaultLabelColor"),g=0,h=e/3,b.textAlign="center",m){case"bottom":h=+j+4*e/3;break;case"center":break;case"left":b.textAlign="right",g=-j-l-3;break;case"top":h=-j-2*e/3;break;case"inside":if(f=sigma.utils.canvas.getTextWidth(b,c("approximateLabelWidth"),e,a.label),2*(j+e/3)>=f)break;case"right":default:g=j+l+3,b.textAlign="left"}b.fillText(a.label,Math.round(a[i+"x"]+g),Math.round(a[i+"y"]+h))}}}.call(this),function(){"use strict";sigma.utils.pkg("sigma.canvas.nodes");var a={},b=function(a,b,c,d,e){var f=a.cross&&a.cross.lineWeight||1;e.moveTo(b-d,c-f),e.lineTo(b-d,c+f),e.lineTo(b-f,c+f),e.lineTo(b-f,c+d),e.lineTo(b+f,c+d),e.lineTo(b+f,c+f),e.lineTo(b+d,c+f),e.lineTo(b+d,c-f),e.lineTo(b+f,c-f),e.lineTo(b+f,c-d),e.lineTo(b-f,c-d),e.lineTo(b-f,c-f)},c=function(c,d,e,f,g,h,i){if(c.image&&c.image.url&&!(i>f)){var j=c.image.url,k=c.image.h||1,l=c.image.w||1,m=c.image.scale||1,n=(c.image.clip||1,a[j]);n||(n=document.createElement("IMG"),n.setAttribute("crossOrigin",h),n.src=j,n.onload=function(){window.dispatchEvent(new Event("resize"))},a[j]=n);var o=k>l?l/k:1,p=l>k?k/l:1,q=f*m;g.save(),g.beginPath(),b(c,d,e,f,g),g.closePath(),g.clip(),g.drawImage(n,d+Math.sin(-0.7855)*q*o,e-Math.cos(-0.7855)*q*p,q*o*2*Math.sin(-0.7855)*-1,q*p*2*Math.cos(-0.7855)),g.restore()}},d=function(a,b,c,d,e,f){if(a.icon&&!(f>d)){var g=a.icon.font||"Arial",h=a.icon.color||"#F00",i=a.icon.content||"?",j=(a.icon.x||.5,a.icon.y||.5,d),k=.7;"number"==typeof a.icon.scale&&(k=Math.abs(Math.max(.01,a.icon.scale)));var l=Math.round(k*j);e.save(),e.fillStyle=h,e.font=""+l+"px "+g,e.textAlign="center",e.textBaseline="middle",e.fillText(i,b,c),e.restore()}};sigma.canvas.nodes.cross=function(a,e,f,g){var h=g||{},i=f("prefix")||"",j=a[i+"size"]||1,k=a[i+"x"],l=a[i+"y"],m=f("defaultNodeColor"),n=f("imgCrossOrigin")||"anonymous",o=f("borderSize"),p=f("outerBorderSize"),q=h.color||a.color||m,r=a.active?f("nodeActiveLevel"):a.level;if(r)switch(e.shadowOffsetX=0,r){case 1:e.shadowOffsetY=1.5,e.shadowBlur=4,e.shadowColor="rgba(0,0,0,0.36)";break;case 2:e.shadowOffsetY=3,e.shadowBlur=12,e.shadowColor="rgba(0,0,0,0.39)";break;case 3:e.shadowOffsetY=6,e.shadowBlur=12,e.shadowColor="rgba(0,0,0,0.42)";break;case 4:e.shadowOffsetY=10,e.shadowBlur=20,e.shadowColor="rgba(0,0,0,0.47)";break;case 5:e.shadowOffsetY=15,e.shadowBlur=24,e.shadowColor="rgba(0,0,0,0.52)"}a.active&&(q="node"===f("nodeActiveColor")?a.active_color||q:f("defaultNodeActiveColor")||q),a.active&&(p>0&&(e.beginPath(),e.fillStyle="node"===f("nodeOuterBorderColor")?q||m:f("defaultNodeOuterBorderColor"),b(a,k,l,j+o+p,e),e.closePath(),e.fill()),o>0&&(e.beginPath(),e.fillStyle="node"===f("nodeBorderColor")?q||m:f("defaultNodeBorderColor"),b(a,k,l,j+o,e),e.closePath(),e.fill())),e.fillStyle=q,e.beginPath(),b(a,k,l,j,e),e.closePath(),e.fill(),r&&(e.shadowOffsetY=0,e.shadowBlur=0,e.shadowColor="#000000"),a.image&&c(a,k,l,j,e,n,f("imageThreshold")),a.icon&&d(a,k,l,j,e,f("iconThreshold"))}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.nodes");var a={},b=function(b,c,d,e,f,g,h){if(b.image&&b.image.url&&!(h>e)){var i=b.image.url,j=b.image.h||1,k=b.image.w||1,l=b.image.scale||1,m=b.image.clip||1,n=a[i];n||(n=document.createElement("IMG"),n.setAttribute("crossOrigin",g),n.src=i,n.onload=function(){window.dispatchEvent(new Event("resize"))},a[i]=n);var o=j>k?k/j:1,p=k>j?j/k:1,q=e*l;f.save(),f.beginPath(),f.arc(c,d,e*m,0,2*Math.PI,!0),f.closePath(),f.clip(),f.drawImage(n,c+Math.sin(-0.7855)*q*o,d-Math.cos(-0.7855)*q*p,q*o*2*Math.sin(-0.7855)*-1,q*p*2*Math.cos(-0.7855)),f.restore()}},c=function(a,b,c,d,e,f){if(a.icon&&!(f>d)){var g=a.icon.font||"Arial",h=a.icon.color||"#F00",i=a.icon.content||"?",j=(a.icon.x||.5,a.icon.y||.5,d),k=.7;"number"==typeof a.icon.scale&&(k=Math.abs(Math.max(.01,a.icon.scale)));var l=Math.round(k*j);e.save(),e.fillStyle=h,e.font=""+l+"px "+g,e.textAlign="center",e.textBaseline="middle",e.fillText(i,b,c),e.restore()}};sigma.canvas.nodes.def=function(a,d,e,f){var g=f||{},h=e("prefix")||"",i=a[h+"size"]||1,j=a[h+"x"],k=a[h+"y"],l=e("defaultNodeColor"),m=e("imgCrossOrigin")||"anonymous",n=e("borderSize"),o=e("outerBorderSize"),p=g.color||a.color||l,q=a.active?e("nodeActiveLevel"):a.level;if(q)switch(d.shadowOffsetX=0,q){case 1:d.shadowOffsetY=1.5,d.shadowBlur=4,d.shadowColor="rgba(0,0,0,0.36)";break;case 2:d.shadowOffsetY=3,d.shadowBlur=12,d.shadowColor="rgba(0,0,0,0.39)";break;case 3:d.shadowOffsetY=6,d.shadowBlur=12,d.shadowColor="rgba(0,0,0,0.42)";break;case 4:d.shadowOffsetY=10,d.shadowBlur=20,d.shadowColor="rgba(0,0,0,0.47)";break;case 5:d.shadowOffsetY=15,d.shadowBlur=24,d.shadowColor="rgba(0,0,0,0.52)"}if(a.active&&(p="node"===e("nodeActiveColor")?a.active_color||p:e("defaultNodeActiveColor")||p,o>0&&(d.beginPath(),d.fillStyle="node"===e("nodeOuterBorderColor")?p||l:e("defaultNodeOuterBorderColor"),d.arc(j,k,i+n+o,0,2*Math.PI,!0),d.closePath(),d.fill()),n>0&&(d.beginPath(),d.fillStyle="node"===e("nodeBorderColor")?p||l:e("defaultNodeBorderColor"),d.arc(j,k,i+n,0,2*Math.PI,!0),d.closePath(),d.fill())),(!a.active||a.active&&"node"===e("nodeActiveColor"))&&a.colors&&a.colors.length){var r,s=a.colors.length,t=1/s,u=0;for(r=0;s>r;r++)d.fillStyle=a.colors[r],d.beginPath(),d.moveTo(j,k),d.arc(j,k,i,u,u+2*Math.PI*t,!1),d.lineTo(j,k),d.closePath(),d.fill(),u+=2*Math.PI*t}else d.fillStyle=p,d.beginPath(),d.arc(j,k,i,0,2*Math.PI,!0),d.closePath(),d.fill();q&&(d.shadowOffsetY=0,d.shadowBlur=0,d.shadowColor="#000000"),a.image&&b(a,j,k,i,d,m,e("imageThreshold")),a.icon&&c(a,j,k,i,d,e("iconThreshold"))}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.nodes");var a={},b=function(a,b,c,d,e){e.moveTo(b-d,c),e.lineTo(b,c-d),e.lineTo(b+d,c),e.lineTo(b,c+d)},c=function(c,d,e,f,g,h,i){if(c.image&&c.image.url&&!(i>f)){var j=c.image.url,k=c.image.h||1,l=c.image.w||1,m=c.image.scale||1,n=(c.image.clip||1,a[j]);
n||(n=document.createElement("IMG"),n.setAttribute("crossOrigin",h),n.src=j,n.onload=function(){window.dispatchEvent(new Event("resize"))},a[j]=n);var o=k>l?l/k:1,p=l>k?k/l:1,q=f*m;g.save(),g.beginPath(),b(c,d,e,f,g),g.closePath(),g.clip(),g.drawImage(n,d+Math.sin(-0.7855)*q*o,e-Math.cos(-0.7855)*q*p,q*o*2*Math.sin(-0.7855)*-1,q*p*2*Math.cos(-0.7855)),g.restore()}},d=function(a,b,c,d,e,f){if(a.icon&&!(f>d)){var g=a.icon.font||"Arial",h=a.icon.color||"#F00",i=a.icon.content||"?",j=(a.icon.x||.5,a.icon.y||.5,d),k=.7;"number"==typeof a.icon.scale&&(k=Math.abs(Math.max(.01,a.icon.scale)));var l=Math.round(k*j);e.save(),e.fillStyle=h,e.font=""+l+"px "+g,e.textAlign="center",e.textBaseline="middle",e.fillText(i,b,c),e.restore()}};sigma.canvas.nodes.diamond=function(a,e,f,g){var h=g||{},i=f("prefix")||"",j=a[i+"size"]||1,k=a[i+"x"],l=a[i+"y"],m=f("defaultNodeColor"),n=f("imgCrossOrigin")||"anonymous",o=f("borderSize"),p=f("outerBorderSize"),q=h.color||a.color||m,r=a.active?f("nodeActiveLevel"):a.level;if(r)switch(e.shadowOffsetX=0,r){case 1:e.shadowOffsetY=1.5,e.shadowBlur=4,e.shadowColor="rgba(0,0,0,0.36)";break;case 2:e.shadowOffsetY=3,e.shadowBlur=12,e.shadowColor="rgba(0,0,0,0.39)";break;case 3:e.shadowOffsetY=6,e.shadowBlur=12,e.shadowColor="rgba(0,0,0,0.42)";break;case 4:e.shadowOffsetY=10,e.shadowBlur=20,e.shadowColor="rgba(0,0,0,0.47)";break;case 5:e.shadowOffsetY=15,e.shadowBlur=24,e.shadowColor="rgba(0,0,0,0.52)"}a.active&&(q="node"===f("nodeActiveColor")?a.active_color||q:f("defaultNodeActiveColor")||q,p>0&&(e.beginPath(),e.fillStyle="node"===f("nodeOuterBorderColor")?q||m:f("defaultNodeOuterBorderColor"),b(a,k,l,j+o+p,e),e.closePath(),e.fill()),o>0&&(e.beginPath(),e.fillStyle="node"===f("nodeBorderColor")?q||m:f("defaultNodeBorderColor"),b(a,k,l,j+o,e),e.closePath(),e.fill())),e.fillStyle=q,e.beginPath(),b(a,k,l,j,e),e.closePath(),e.fill(),r&&(e.shadowOffsetY=0,e.shadowBlur=0,e.shadowColor="#000000"),a.image&&c(a,k,l,j,e,n,f("imageThreshold")),a.icon&&d(a,k,l,j,e,f("iconThreshold"))}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.nodes");var a={},b=function(a,b,c,d,e){var f=a.equilateral&&a.equilateral.numPoints||5,g=a.equilateral&&a.equilateral.rotate||0,h=d;g+=Math.PI/f,e.moveTo(b+h*Math.sin(g),c-h*Math.cos(g));for(var i=1;f>i;i++)e.lineTo(b+Math.sin(g+2*Math.PI*i/f)*h,c-Math.cos(g+2*Math.PI*i/f)*h)},c=function(c,d,e,f,g,h,i){if(c.image&&c.image.url&&!(i>f)){var j=c.image.url,k=c.image.h||1,l=c.image.w||1,m=c.image.scale||1,n=(c.image.clip||1,a[j]);n||(n=document.createElement("IMG"),n.setAttribute("crossOrigin",h),n.src=j,n.onload=function(){window.dispatchEvent(new Event("resize"))},a[j]=n);var o=k>l?l/k:1,p=l>k?k/l:1,q=f*m;g.save(),g.beginPath(),b(c,d,e,f,g),g.closePath(),g.clip(),g.drawImage(n,d+Math.sin(-0.7855)*q*o,e-Math.cos(-0.7855)*q*p,q*o*2*Math.sin(-0.7855)*-1,q*p*2*Math.cos(-0.7855)),g.restore()}},d=function(a,b,c,d,e,f){if(a.icon&&!(f>d)){var g=a.icon.font||"Arial",h=a.icon.color||"#F00",i=a.icon.content||"?",j=(a.icon.x||.5,a.icon.y||.5,d),k=.7;"number"==typeof a.icon.scale&&(k=Math.abs(Math.max(.01,a.icon.scale)));var l=Math.round(k*j);e.save(),e.fillStyle=h,e.font=""+l+"px "+g,e.textAlign="center",e.textBaseline="middle",e.fillText(i,b,c),e.restore()}};sigma.canvas.nodes.equilateral=function(a,e,f,g){var h=g||{},i=f("prefix")||"",j=a[i+"size"]||1,k=a[i+"x"],l=a[i+"y"],m=f("defaultNodeColor"),n=f("imgCrossOrigin")||"anonymous",o=f("borderSize"),p=f("outerBorderSize"),q=h.color||a.color||m,r=a.active?f("nodeActiveLevel"):a.level;if(r)switch(e.shadowOffsetX=0,r){case 1:e.shadowOffsetY=1.5,e.shadowBlur=4,e.shadowColor="rgba(0,0,0,0.36)";break;case 2:e.shadowOffsetY=3,e.shadowBlur=12,e.shadowColor="rgba(0,0,0,0.39)";break;case 3:e.shadowOffsetY=6,e.shadowBlur=12,e.shadowColor="rgba(0,0,0,0.42)";break;case 4:e.shadowOffsetY=10,e.shadowBlur=20,e.shadowColor="rgba(0,0,0,0.47)";break;case 5:e.shadowOffsetY=15,e.shadowBlur=24,e.shadowColor="rgba(0,0,0,0.52)"}a.active&&(q="node"===f("nodeActiveColor")?a.active_color||q:f("defaultNodeActiveColor")||q,p>0&&(e.beginPath(),e.fillStyle="node"===f("nodeOuterBorderColor")?q||m:f("defaultNodeOuterBorderColor"),b(a,k,l,j+o+p,e),e.closePath(),e.fill()),o>0&&(e.beginPath(),e.fillStyle="node"===f("nodeBorderColor")?q||m:f("defaultNodeBorderColor"),b(a,k,l,j+o,e),e.closePath(),e.fill())),e.fillStyle=q,e.beginPath(),b(a,k,l,j,e),e.closePath(),e.fill(),r&&(e.shadowOffsetY=0,e.shadowBlur=0,e.shadowColor="#000000"),a.image&&c(a,k,l,j,e,n,f("imageThreshold")),a.icon&&d(a,k,l,j,e,f("iconThreshold"))}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.nodes");var a={},b=function(a,b,c,d,e){var f=45*Math.PI/180;e.moveTo(b+d*Math.sin(f),c-d*Math.cos(f));for(var g=1;4>g;g++)e.lineTo(b+Math.sin(f+2*Math.PI*g/4)*d,c-Math.cos(f+2*Math.PI*g/4)*d)},c=function(c,d,e,f,g,h,i){if(c.image&&c.image.url&&!(i>f)){var j=c.image.url,k=c.image.h||1,l=c.image.w||1,m=c.image.scale||1,n=(c.image.clip||1,a[j]);n||(n=document.createElement("IMG"),n.setAttribute("crossOrigin",h),n.src=j,n.onload=function(){window.dispatchEvent(new Event("resize"))},a[j]=n);var o=k>l?l/k:1,p=l>k?k/l:1,q=f*m;g.save(),g.beginPath(),b(c,d,e,f,g),g.closePath(),g.clip(),g.drawImage(n,d+Math.sin(-0.7855)*q*o,e-Math.cos(-0.7855)*q*p,q*o*2*Math.sin(-0.7855)*-1,q*p*2*Math.cos(-0.7855)),g.restore()}},d=function(a,b,c,d,e,f){if(a.icon&&!(f>d)){var g=a.icon.font||"Arial",h=a.icon.color||"#F00",i=a.icon.content||"?",j=(a.icon.x||.5,a.icon.y||.5,d),k=.7;"number"==typeof a.icon.scale&&(k=Math.abs(Math.max(.01,a.icon.scale)));var l=Math.round(k*j);e.save(),e.fillStyle=h,e.font=""+l+"px "+g,e.textAlign="center",e.textBaseline="middle",e.fillText(i,b,c),e.restore()}};sigma.canvas.nodes.square=function(a,e,f,g){var h=g||{},i=f("prefix")||"",j=a[i+"size"]||1,k=a[i+"x"],l=a[i+"y"],m=f("defaultNodeColor"),n=f("imgCrossOrigin")||"anonymous",o=f("borderSize"),p=f("outerBorderSize"),q=h.color||a.color||m,r=a.active?f("nodeActiveLevel"):a.level;if(r)switch(e.shadowOffsetX=0,r){case 1:e.shadowOffsetY=1.5,e.shadowBlur=4,e.shadowColor="rgba(0,0,0,0.36)";break;case 2:e.shadowOffsetY=3,e.shadowBlur=12,e.shadowColor="rgba(0,0,0,0.39)";break;case 3:e.shadowOffsetY=6,e.shadowBlur=12,e.shadowColor="rgba(0,0,0,0.42)";break;case 4:e.shadowOffsetY=10,e.shadowBlur=20,e.shadowColor="rgba(0,0,0,0.47)";break;case 5:e.shadowOffsetY=15,e.shadowBlur=24,e.shadowColor="rgba(0,0,0,0.52)"}a.active&&(q="node"===f("nodeActiveColor")?a.active_color||q:f("defaultNodeActiveColor")||q,p>0&&(e.beginPath(),e.fillStyle="node"===f("nodeOuterBorderColor")?q||m:f("defaultNodeOuterBorderColor"),b(a,k,l,j+o+p,e),e.closePath(),e.fill()),o>0&&(e.beginPath(),e.fillStyle="node"===f("nodeBorderColor")?q||m:f("defaultNodeBorderColor"),b(a,k,l,j+o,e),e.closePath(),e.fill())),e.fillStyle=q,e.beginPath(),b(a,k,l,j,e),e.closePath(),e.fill(),r&&(e.shadowOffsetY=0,e.shadowBlur=0,e.shadowColor="#000000"),a.image&&c(a,k,l,j,e,n,f("imageThreshold")),a.icon&&d(a,k,l,j,e,f("iconThreshold"))}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.nodes");var a={},b=function(a,b,c,d,e){var f=a.star&&a.star.numPoints||5,g=a.star&&a.star.innerRatio||.5,h=d,i=d*g,j=Math.PI/f;e.moveTo(b,c-d);for(var k=0;f>k;k++)e.lineTo(b+Math.sin(j+2*Math.PI*k/f)*i,c-Math.cos(j+2*Math.PI*k/f)*i),e.lineTo(b+Math.sin(2*Math.PI*(k+1)/f)*h,c-Math.cos(2*Math.PI*(k+1)/f)*h)},c=function(c,d,e,f,g,h,i){if(c.image&&c.image.url&&!(i>f)){var j=c.image.url,k=c.image.h||1,l=c.image.w||1,m=c.image.scale||1,n=(c.image.clip||1,a[j]);n||(n=document.createElement("IMG"),n.setAttribute("crossOrigin",h),n.src=j,n.onload=function(){window.dispatchEvent(new Event("resize"))},a[j]=n);var o=k>l?l/k:1,p=l>k?k/l:1,q=f*m;g.save(),g.beginPath(),b(c,d,e,f,g),g.closePath(),g.clip(),g.drawImage(n,d+Math.sin(-0.7855)*q*o,e-Math.cos(-0.7855)*q*p,q*o*2*Math.sin(-0.7855)*-1,q*p*2*Math.cos(-0.7855)),g.restore()}},d=function(a,b,c,d,e,f){if(a.icon&&!(f>d)){var g=a.icon.font||"Arial",h=a.icon.color||"#F00",i=a.icon.content||"?",j=(a.icon.x||.5,a.icon.y||.5,d),k=.7;"number"==typeof a.icon.scale&&(k=Math.abs(Math.max(.01,a.icon.scale)));var l=Math.round(k*j);e.save(),e.fillStyle=h,e.font=""+l+"px "+g,e.textAlign="center",e.textBaseline="middle",e.fillText(i,b,c),e.restore()}};sigma.canvas.nodes.star=function(a,e,f,g){var h=g||{},i=f("prefix")||"",j=a[i+"size"]||1,k=a[i+"x"],l=a[i+"y"],m=f("defaultNodeColor"),n=f("imgCrossOrigin")||"anonymous",o=f("borderSize"),p=f("outerBorderSize"),q=h.color||a.color||m,r=a.active?f("nodeActiveLevel"):a.level;if(r)switch(e.shadowOffsetX=0,r){case 1:e.shadowOffsetY=1.5,e.shadowBlur=4,e.shadowColor="rgba(0,0,0,0.36)";break;case 2:e.shadowOffsetY=3,e.shadowBlur=12,e.shadowColor="rgba(0,0,0,0.39)";break;case 3:e.shadowOffsetY=6,e.shadowBlur=12,e.shadowColor="rgba(0,0,0,0.42)";break;case 4:e.shadowOffsetY=10,e.shadowBlur=20,e.shadowColor="rgba(0,0,0,0.47)";break;case 5:e.shadowOffsetY=15,e.shadowBlur=24,e.shadowColor="rgba(0,0,0,0.52)"}a.active&&(q="node"===f("nodeActiveColor")?a.active_color||q:f("defaultNodeActiveColor")||q,p>0&&(e.beginPath(),e.fillStyle="node"===f("nodeOuterBorderColor")?q||m:f("defaultNodeOuterBorderColor"),b(a,k,l,j+o+2*p,e),e.closePath(),e.fill()),o>0&&(e.beginPath(),e.fillStyle="node"===f("nodeBorderColor")?q||m:f("defaultNodeBorderColor"),b(a,k,l,j+o,e),e.closePath(),e.fill())),e.fillStyle=q,e.beginPath(),b(a,k,l,j,e),e.closePath(),e.fill(),r&&(e.shadowOffsetY=0,e.shadowBlur=0,e.shadowColor="#000000"),a.image&&c(a,k,l,j,e,n,f("imageThreshold")),a.icon&&d(a,k,l,j,e,f("iconThreshold"))}}(),function(a){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.settings");var b={defaultLabelActiveColor:"#000",activeFont:"",activeFontStyle:"",labelActiveColor:"default",nodeActiveColor:"node",defaultNodeActiveColor:"rgb(236, 81, 72)",edgeActiveColor:"edge",defaultEdgeActiveColor:"rgb(236, 81, 72)",nodeBorderColor:"node,",nodeOuterBorderColor:"",outerBorderSize:0,defaultNodeOuterBorderColor:"#000",nodeActiveLevel:0,nodeHoverLevel:0,edgeActiveLevel:0,edgeHoverLevel:0,iconThreshold:8,imageThreshold:8,imgCrossOrigin:"anonymous"};sigma.settings=sigma.utils.extend(sigma.settings||{},b)}.call(this),function(){"use strict";sigma.utils.pkg("sigma.webgl.edges"),sigma.webgl.edges.arrow={POINTS:9,ATTRIBUTES:11,addEdge:function(a,b,c,d,e,f,g){var h=(a[f+"size"]||1)/2,i=b[f+"x"],j=b[f+"y"],k=c[f+"x"],l=c[f+"y"],m=c[f+"size"],n=a.active?a.active_color||g("defaultEdgeActiveColor"):a.color;if(!n)switch(g("edgeColor")){case"source":n=b.color||g("defaultNodeColor");break;case"target":n=c.color||g("defaultNodeColor");break;default:n=g("defaultEdgeColor")}a.active&&(n="edge"===g("edgeActiveColor")?n||defaultEdgeColor:g("defaultEdgeActiveColor")),n=sigma.utils.floatColor(n),d[e++]=i,d[e++]=j,d[e++]=k,d[e++]=l,d[e++]=h,d[e++]=m,d[e++]=0,d[e++]=0,d[e++]=0,d[e++]=0,d[e++]=n,d[e++]=k,d[e++]=l,d[e++]=i,d[e++]=j,d[e++]=h,d[e++]=m,d[e++]=1,d[e++]=1,d[e++]=0,d[e++]=0,d[e++]=n,d[e++]=k,d[e++]=l,d[e++]=i,d[e++]=j,d[e++]=h,d[e++]=m,d[e++]=1,d[e++]=0,d[e++]=0,d[e++]=0,d[e++]=n,d[e++]=k,d[e++]=l,d[e++]=i,d[e++]=j,d[e++]=h,d[e++]=m,d[e++]=1,d[e++]=0,d[e++]=0,d[e++]=0,d[e++]=n,d[e++]=i,d[e++]=j,d[e++]=k,d[e++]=l,d[e++]=h,d[e++]=m,d[e++]=0,d[e++]=1,d[e++]=0,d[e++]=0,d[e++]=n,d[e++]=i,d[e++]=j,d[e++]=k,d[e++]=l,d[e++]=h,d[e++]=m,d[e++]=0,d[e++]=0,d[e++]=0,d[e++]=0,d[e++]=n,d[e++]=k,d[e++]=l,d[e++]=i,d[e++]=j,d[e++]=h,d[e++]=m,d[e++]=1,d[e++]=0,d[e++]=1,d[e++]=-1,d[e++]=n,d[e++]=k,d[e++]=l,d[e++]=i,d[e++]=j,d[e++]=h,d[e++]=m,d[e++]=1,d[e++]=0,d[e++]=1,d[e++]=0,d[e++]=n,d[e++]=k,d[e++]=l,d[e++]=i,d[e++]=j,d[e++]=h,d[e++]=m,d[e++]=1,d[e++]=0,d[e++]=1,d[e++]=1,d[e++]=n},render:function(a,b,c,d){var e,f=a.getAttribLocation(b,"a_pos1"),g=a.getAttribLocation(b,"a_pos2"),h=a.getAttribLocation(b,"a_thickness"),i=a.getAttribLocation(b,"a_tSize"),j=a.getAttribLocation(b,"a_delay"),k=a.getAttribLocation(b,"a_minus"),l=a.getAttribLocation(b,"a_head"),m=a.getAttribLocation(b,"a_headPosition"),n=a.getAttribLocation(b,"a_color"),o=a.getUniformLocation(b,"u_resolution"),p=a.getUniformLocation(b,"u_matrix"),q=a.getUniformLocation(b,"u_matrixHalfPi"),r=a.getUniformLocation(b,"u_matrixHalfPiMinus"),s=a.getUniformLocation(b,"u_ratio"),t=a.getUniformLocation(b,"u_nodeRatio"),u=a.getUniformLocation(b,"u_arrowHead"),v=a.getUniformLocation(b,"u_scale");e=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,e),a.bufferData(a.ARRAY_BUFFER,c,a.STATIC_DRAW),a.uniform2f(o,d.width,d.height),a.uniform1f(s,d.ratio/Math.pow(d.ratio,d.settings("edgesPowRatio"))),a.uniform1f(t,Math.pow(d.ratio,d.settings("nodesPowRatio"))/d.ratio),a.uniform1f(u,5),a.uniform1f(v,d.scalingRatio),a.uniformMatrix3fv(p,!1,d.matrix),a.uniformMatrix2fv(q,!1,sigma.utils.matrices.rotation(Math.PI/2,!0)),a.uniformMatrix2fv(r,!1,sigma.utils.matrices.rotation(-Math.PI/2,!0)),a.enableVertexAttribArray(f),a.enableVertexAttribArray(g),a.enableVertexAttribArray(h),a.enableVertexAttribArray(i),a.enableVertexAttribArray(j),a.enableVertexAttribArray(k),a.enableVertexAttribArray(l),a.enableVertexAttribArray(m),a.enableVertexAttribArray(n),a.vertexAttribPointer(f,2,a.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),a.vertexAttribPointer(g,2,a.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),a.vertexAttribPointer(h,1,a.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,16),a.vertexAttribPointer(i,1,a.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,20),a.vertexAttribPointer(j,1,a.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,24),a.vertexAttribPointer(k,1,a.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,28),a.vertexAttribPointer(l,1,a.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,32),a.vertexAttribPointer(m,1,a.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,36),a.vertexAttribPointer(n,1,a.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,40),a.drawArrays(a.TRIANGLES,d.start||0,d.count||c.length/this.ATTRIBUTES)},initProgram:function(a){var b,c,d;return b=sigma.utils.loadShader(a,["attribute vec2 a_pos1;","attribute vec2 a_pos2;","attribute float a_thickness;","attribute float a_tSize;","attribute float a_delay;","attribute float a_minus;","attribute float a_head;","attribute float a_headPosition;","attribute float a_color;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform float u_nodeRatio;","uniform float u_arrowHead;","uniform float u_scale;","uniform mat3 u_matrix;","uniform mat2 u_matrixHalfPi;","uniform mat2 u_matrixHalfPiMinus;","varying vec4 color;","void main() {","vec2 pos = normalize(a_pos2 - a_pos1);","mat2 matrix = (1.0 - a_head) *","(","a_minus * u_matrixHalfPiMinus +","(1.0 - a_minus) * u_matrixHalfPi",") + a_head * (","a_headPosition * u_matrixHalfPiMinus * 0.6 +","(a_headPosition * a_headPosition - 1.0) * mat2(1.0)",");","pos = a_pos1 + (","(1.0 - a_head) * a_thickness * u_ratio * matrix * pos +","a_head * u_arrowHead * a_thickness * u_ratio * matrix * pos +","a_delay * pos * (","a_tSize / u_nodeRatio +","u_arrowHead * a_thickness * u_ratio",")",");","gl_Position = vec4(","((u_matrix * vec3(pos, 1)).xy /","u_resolution * 2.0 - 1.0) * vec2(1, -1),","0,","1",");","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),a.VERTEX_SHADER),c=sigma.utils.loadShader(a,["precision mediump float;","varying vec4 color;","void main(void) {","gl_FragColor = color;","}"].join("\n"),a.FRAGMENT_SHADER),d=sigma.utils.loadProgram(a,[b,c])}}}(),function(){"use strict";sigma.utils.pkg("sigma.webgl.edges"),sigma.webgl.edges.def={POINTS:6,ATTRIBUTES:7,addEdge:function(a,b,c,d,e,f,g){var h=(a[f+"size"]||1)/2,i=b[f+"x"],j=b[f+"y"],k=c[f+"x"],l=c[f+"y"],m=a.active?a.active_color||g("defaultEdgeActiveColor"):a.color;if(!m)switch(g("edgeColor")){case"source":m=b.color||g("defaultNodeColor");break;case"target":m=c.color||g("defaultNodeColor");break;default:m=g("defaultEdgeColor")}a.active&&(m="edge"===g("edgeActiveColor")?m||defaultEdgeColor:g("defaultEdgeActiveColor")),m=sigma.utils.floatColor(m),d[e++]=i,d[e++]=j,d[e++]=k,d[e++]=l,d[e++]=h,d[e++]=0,d[e++]=m,d[e++]=k,d[e++]=l,d[e++]=i,d[e++]=j,d[e++]=h,d[e++]=1,d[e++]=m,d[e++]=k,d[e++]=l,d[e++]=i,d[e++]=j,d[e++]=h,d[e++]=0,d[e++]=m,d[e++]=k,d[e++]=l,d[e++]=i,d[e++]=j,d[e++]=h,d[e++]=0,d[e++]=m,d[e++]=i,d[e++]=j,d[e++]=k,d[e++]=l,d[e++]=h,d[e++]=1,d[e++]=m,d[e++]=i,d[e++]=j,d[e++]=k,d[e++]=l,d[e++]=h,d[e++]=0,d[e++]=m},render:function(a,b,c,d){var e,f=a.getAttribLocation(b,"a_color"),g=a.getAttribLocation(b,"a_position1"),h=a.getAttribLocation(b,"a_position2"),i=a.getAttribLocation(b,"a_thickness"),j=a.getAttribLocation(b,"a_minus"),k=a.getUniformLocation(b,"u_resolution"),l=a.getUniformLocation(b,"u_matrix"),m=a.getUniformLocation(b,"u_matrixHalfPi"),n=a.getUniformLocation(b,"u_matrixHalfPiMinus"),o=a.getUniformLocation(b,"u_ratio"),p=a.getUniformLocation(b,"u_scale");e=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,e),a.bufferData(a.ARRAY_BUFFER,c,a.STATIC_DRAW),a.uniform2f(k,d.width,d.height),a.uniform1f(o,d.ratio/Math.pow(d.ratio,d.settings("edgesPowRatio"))),a.uniform1f(p,d.scalingRatio),a.uniformMatrix3fv(l,!1,d.matrix),a.uniformMatrix2fv(m,!1,sigma.utils.matrices.rotation(Math.PI/2,!0)),a.uniformMatrix2fv(n,!1,sigma.utils.matrices.rotation(-Math.PI/2,!0)),a.enableVertexAttribArray(f),a.enableVertexAttribArray(g),a.enableVertexAttribArray(h),a.enableVertexAttribArray(i),a.enableVertexAttribArray(j),a.vertexAttribPointer(g,2,a.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),a.vertexAttribPointer(h,2,a.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),a.vertexAttribPointer(i,1,a.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,16),a.vertexAttribPointer(j,1,a.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,20),a.vertexAttribPointer(f,1,a.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,24),a.drawArrays(a.TRIANGLES,d.start||0,d.count||c.length/this.ATTRIBUTES)},initProgram:function(a){var b,c,d;return b=sigma.utils.loadShader(a,["attribute vec2 a_position1;","attribute vec2 a_position2;","attribute float a_thickness;","attribute float a_minus;","attribute float a_color;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform float u_scale;","uniform mat3 u_matrix;","uniform mat2 u_matrixHalfPi;","uniform mat2 u_matrixHalfPiMinus;","varying vec4 color;","void main() {","vec2 position = a_thickness * u_ratio *","normalize(a_position2 - a_position1);","mat2 matrix = a_minus * u_matrixHalfPiMinus +","(1.0 - a_minus) * u_matrixHalfPi;","position = matrix * position + a_position1;","gl_Position = vec4(","((u_matrix * vec3(position, 1)).xy /","u_resolution * 2.0 - 1.0) * vec2(1, -1),","0,","1",");","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),a.VERTEX_SHADER),c=sigma.utils.loadShader(a,["precision mediump float;","varying vec4 color;","void main(void) {","gl_FragColor = color;","}"].join("\n"),a.FRAGMENT_SHADER),d=sigma.utils.loadProgram(a,[b,c])}}}(),function(){"use strict";sigma.utils.pkg("sigma.webgl.edges"),sigma.webgl.edges.fast={POINTS:2,ATTRIBUTES:3,addEdge:function(a,b,c,d,e,f,g){var h=((a[f+"size"]||1)/2,b[f+"x"]),i=b[f+"y"],j=c[f+"x"],k=c[f+"y"],l=a.active?a.active_color||g("defaultEdgeActiveColor"):a.color;if(!l)switch(g("edgeColor")){case"source":l=b.color||g("defaultNodeColor");break;case"target":l=c.color||g("defaultNodeColor");break;default:l=g("defaultEdgeColor")}a.active&&(l="edge"===g("edgeActiveColor")?l||defaultEdgeColor:g("defaultEdgeActiveColor")),l=sigma.utils.floatColor(l),d[e++]=h,d[e++]=i,d[e++]=l,d[e++]=j,d[e++]=k,d[e++]=l},render:function(a,b,c,d){var e,f=a.getAttribLocation(b,"a_color"),g=a.getAttribLocation(b,"a_position"),h=a.getUniformLocation(b,"u_resolution"),i=a.getUniformLocation(b,"u_matrix");e=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,e),a.bufferData(a.ARRAY_BUFFER,c,a.DYNAMIC_DRAW),a.uniform2f(h,d.width,d.height),a.uniformMatrix3fv(i,!1,d.matrix),a.enableVertexAttribArray(g),a.enableVertexAttribArray(f),a.vertexAttribPointer(g,2,a.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),a.vertexAttribPointer(f,1,a.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),a.lineWidth(3),a.drawArrays(a.LINES,d.start||0,d.count||c.length/this.ATTRIBUTES)},initProgram:function(a){var b,c,d;return b=sigma.utils.loadShader(a,["attribute vec2 a_position;","attribute float a_color;","uniform vec2 u_resolution;","uniform mat3 u_matrix;","varying vec4 color;","void main() {","gl_Position = vec4(","((u_matrix * vec3(a_position, 1)).xy /","u_resolution * 2.0 - 1.0) * vec2(1, -1),","0,","1",");","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),a.VERTEX_SHADER),c=sigma.utils.loadShader(a,["precision mediump float;","varying vec4 color;","void main(void) {","gl_FragColor = color;","}"].join("\n"),a.FRAGMENT_SHADER),d=sigma.utils.loadProgram(a,[b,c])}}}(),function(){"use strict";sigma.utils.pkg("sigma.webgl.nodes"),sigma.webgl.nodes.def={POINTS:3,ATTRIBUTES:12,addNode:function(a,b,c,d,e){var f=this,g=a.color||e("defaultNodeColor"),h=e("imgCrossOrigin")||"anonymous";a.active&&(g="node"===e("nodeActiveColor")?a.active_color||g:e("defaultNodeActiveColor")||g);var i=sigma.utils.floatColor(g||e("defaultNodeColor"));"undefined"==typeof f.spriteSheet&&f.createSpriteSheet(e);var j=-1,k=.7,l=999,m=1,n=1,o=1,p=0;switch(a.type||"circle"){case"circle":case"disc":case"disk":o=1,l=999,k=1;break;case"square":o=0,l=4,k=.7,"undefined"!=typeof a.square&&"number"==typeof a.square.rotate&&(p=a.square.rotate);break;case"diamond":o=0,l=4,k=.7,p=45*Math.PI/180,"undefined"!=typeof a.diamond&&"number"==typeof a.diamond.rotate&&(p=a.diamond.rotate);break;case"triangle":o=0,l=3,k=.5,p=Math.PI,"undefined"!=typeof a.triangle&&"number"==typeof a.triangle.rotate&&(p=a.triangle.rotate);break;case"star":o=1,k=.7,l=5,"undefined"!=typeof a.star&&("number"==typeof a.star.numPoints&&(l=a.star.numPoints),"number"==typeof a.star.rotate&&(p=a.star.rotate));break;case"seastar":o=2,k=.5,l=5,"undefined"!=typeof a.seastar&&("number"==typeof a.seastar.numPoints&&(l=a.seastar.numPoints),"number"==typeof a.seastar.rotate&&(p=a.seastar.rotate));break;case"equilateral":o=0,l=7,k=.7,p=0,"undefined"!=typeof a.equilateral&&("number"==typeof a.equilateral.numPoints&&(l=a.equilateral.numPoints),"number"==typeof a.equilateral.rotate&&(p=a.equilateral.rotate));break;case"hexagon":o=0,l=6,k=.7,"undefined"!=typeof a.hexagon&&"number"==typeof a.hexagon.rotate&&(p=a.hexagon.rotate);break;case"polygon":o=1,l=5,k=.5,p=0,"undefined"!=typeof a.polygon&&("string"==typeof a.polygon.type&&(o="convex"==a.polygon.type?1:0),"number"==typeof a.polygon.angles&&(l=Math.round(Math.max(3,Math.min(8,a.polygon.angles)))),"number"==typeof a.polygon.scale&&(k=a.polygon.scale||(o?.5:.7)),"number"==typeof a.polygon.rotate&&(p=a.polygon.rotate));break;case"cross":o=0,l=9,k=.1,"undefined"!=typeof a.cross&&("number"==typeof a.cross.lineWeight&&(k=Math.max(.1,Math.min(.5,.1*a.cross.lineWeight))),"number"==typeof a.rotate&&(p=a.cross.rotate))}if("undefined"!=typeof a.image){var q=a.image.url||"";q.length>0&&(j=f.getImage(q,h),m=a.image.w||1,n=a.image.h||1)}if("undefined"!=typeof a.icon){var r="Arial";"string"==typeof a.icon.font&&(r=a.icon.font);var s="";"string"==typeof a.icon.content&&(s=a.icon.content);var t=.7;"number"==typeof a.icon.scale&&(t=.5*Math.abs(Math.max(.01,a.icon.scale)));var u=a.icon.color||g,v=a.color||g,w=.5,x=.5;"number"==typeof a.icon.x&&(w=a.icon.x),"number"==typeof a.icon.y&&(x=a.icon.y),j=f.getText(r,v,u,t,w,x,s)}b[c++]=a[d+"x"],b[c++]=a[d+"y"],b[c++]=a[d+"size"],b[c++]=i,b[c++]=0,b[c++]=o,b[c++]=l,b[c++]=k,b[c++]=p,b[c++]=j,b[c++]=m,b[c++]=n,b[c++]=a[d+"x"],b[c++]=a[d+"y"],b[c++]=a[d+"size"],b[c++]=i,b[c++]=2*Math.PI/3,b[c++]=o,b[c++]=l,b[c++]=k,b[c++]=p,b[c++]=j,b[c++]=m,b[c++]=n,b[c++]=a[d+"x"],b[c++]=a[d+"y"],b[c++]=a[d+"size"],b[c++]=i,b[c++]=4*Math.PI/3,b[c++]=o,b[c++]=l,b[c++]=k,b[c++]=p,b[c++]=j,b[c++]=m,b[c++]=n},render:function(a,b,c,d){var e,f=this;arguments;"undefined"==typeof f.spriteSheet&&f.createSpriteSheet();var g=a.getAttribLocation(b,"a_position"),h=a.getAttribLocation(b,"a_size"),i=a.getAttribLocation(b,"a_color"),j=a.getAttribLocation(b,"a_angle"),k=a.getAttribLocation(b,"a_image"),l=a.getAttribLocation(b,"a_shape"),m=a.getUniformLocation(b,"u_resolution"),n=a.getUniformLocation(b,"u_matrix"),o=a.getUniformLocation(b,"u_ratio"),p=a.getUniformLocation(b,"u_scale"),q=a.getUniformLocation(b,"u_sprite_dim"),r=a.getUniformLocation(b,"u_texture_dim");a.getUniformLocation(b,"u_sampler");e=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,e),a.bufferData(a.ARRAY_BUFFER,c,a.DYNAMIC_DRAW),a.uniform2f(m,d.width,d.height),a.uniform1f(o,1/Math.pow(d.ratio,d.settings("nodesPowRatio"))),a.uniform1f(p,d.scalingRatio),a.uniformMatrix3fv(n,!1,d.matrix),a.uniform2f(q,f.spriteSheet.spriteWidth,f.spriteSheet.spriteHeight),a.uniform2f(r,f.spriteSheet.maxWidth,f.spriteSheet.maxHeight),a.enableVertexAttribArray(g),a.enableVertexAttribArray(h),a.enableVertexAttribArray(i),a.enableVertexAttribArray(j),a.enableVertexAttribArray(l),a.enableVertexAttribArray(k),a.vertexAttribPointer(g,2,a.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),a.vertexAttribPointer(h,1,a.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),a.vertexAttribPointer(i,1,a.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,12),a.vertexAttribPointer(j,1,a.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,16),a.vertexAttribPointer(l,4,a.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,20),a.vertexAttribPointer(k,3,a.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,36),"undefined"==typeof f.texture&&(f.texture=a.createTexture(),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,f.texture),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,f.spriteSheet.canvas),a.blendFunc(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA),a.enable(a.BLEND),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.generateMipmap(a.TEXTURE_2D)),"undefined"!=typeof f.texture&&(a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,f.texture),f.updateNeeded&&(f.updateNeeded=!1,a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,f.spriteSheet.canvas)),a.uniform1i(a.getUniformLocation(b,"u_sampler"),0)),a.drawArrays(a.TRIANGLES,d.start||0,d.count||c.length/this.ATTRIBUTES)},initProgram:function(a){var b,c,d;return b=sigma.utils.loadShader(a,["attribute vec2 a_position;","attribute float a_size;","attribute float a_color;","attribute float a_angle;","attribute vec4 a_shape;","attribute vec3 a_image;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform float u_scale;","uniform mat3 u_matrix;","uniform vec2 u_sprite_dim;","uniform vec2 u_texture_dim;","varying vec4 shape;","varying highp vec4 v_sprite;","varying vec4 color;","varying vec2 center;","varying float radius;","varying vec3 image;","void main() {","radius = a_size * u_ratio;","vec2 position = (u_matrix * vec3(a_position, 1)).xy;","center = position * u_scale;","center = vec2(center.x, u_scale * u_resolution.y - center.y);","position = position +","2.0 * radius * vec2(cos(a_angle), sin(a_angle));","position = (position / u_resolution * 2.0 - 1.0) * vec2(1, -1);","radius = radius * u_scale;","shape = a_shape;","image = a_image;","highp vec2 sp = ","vec2(mod((a_image.s * u_sprite_dim.x), u_texture_dim.x),","floor((a_image.s * u_sprite_dim.x) / u_texture_dim.y) * u_sprite_dim.y);","sp = vec2(sp.x + (u_sprite_dim.x * 0.5),"," sp.y + (u_sprite_dim.y * 0.5));","v_sprite = vec4(","sp.x / u_texture_dim.x,","sp.y / u_texture_dim.y,","u_sprite_dim.x / u_texture_dim.x,","- u_sprite_dim.y / u_texture_dim.y",");","gl_Position = vec4(position, 0, 1);","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),a.VERTEX_SHADER),c=sigma.utils.loadShader(a,["#ifdef GL_ES","precision mediump float;","#endif","#define PI_2 6.283185307179586","#define MAX_ANGLES 8","varying vec4 shape;","varying highp vec4 v_sprite;","varying vec4 color;","varying vec2 center;","varying float radius;","varying vec3 image;","uniform sampler2D u_sampler;","void main(void) {","int angles = int(shape.t);","int convex = int(shape.s);","vec2 m = gl_FragCoord.xy - center;","vec2 p = m.xy/radius;","float theta = atan(p.y,p.x);","vec4 color0 = vec4(0.0, 0.0, 0.0, 0.0);","vec4 color1 = (image.s >= 0.0) ?"," texture2D(u_sampler, ","vec2(","(v_sprite.s + v_sprite.p * p.x * 0.5 * image.t),","(v_sprite.t + v_sprite.q * p.y * 0.5 * image.p)","))"," : color",";","mat2 shapeRot = mat2(cos(shape.q),sin(shape.q),-sin(shape.q),cos(shape.q));","p = p * shapeRot;","if (angles > 9) {","gl_FragColor = ","((radius - sqrt(m.x * m.x + m.y * m.y)) > 0.0)","? color1 : color0;","} else if (angles > 8){","gl_FragColor = (","(abs(p.x) > 0.0 && abs(p.x) < (1.0 - sin(shape.p)) && abs(p.y) < shape.p)","|| (abs(p.y) > 0.0 && abs(p.y) < (1.0 - sin(shape.p)) && abs(p.x) < shape.p)",") ? color1 : color0;","} else {","float scale = (convex > 0) ? shape.p * 0.5 : shape.p;","float angle = PI_2 / shape.t;","mat2 t = mat2(cos(angle),sin(angle),-sin(angle),cos(angle));","int q = 0;","for (int i=0;i<MAX_ANGLES;i++) {","if (i >= angles) break;","if (p.y < scale) q++;","p *= t;","}","gl_FragColor =","((convex > 0)","? (q > angles - (angles - 1) / 2)",": (q > angles - 1))","? color1 : color0;","}","}"].join("\n"),a.FRAGMENT_SHADER),d=sigma.utils.loadProgram(a,[b,c])},createSpriteSheet:function(a){var b=this,c={maxWidth:a("spriteSheetResolution")||2048,maxHeight:a("spriteSheetResolution")||2048,maxSprites:a("spriteSheetMaxSprites")||256},d=c.maxWidth/Math.sqrt(c.maxSprites),e=c.maxHeight/Math.sqrt(c.maxSprites),f=document.createElement("canvas");f.width=c.maxWidth,f.height=c.maxHeight;f.getContext("2d");b.spriteSheet={canvas:f,maxWidth:c.maxWidth,maxHeight:c.maxHeight,maxSprites:c.maxSprite,spriteWidth:d,spriteHeight:e,currentIndex:1,urlToIndex:{}}},getText:function(a,b,c,d,e,f,g){var h=this,i=Math.round(d*h.spriteSheet.spriteHeight),j=e*h.spriteSheet.spriteWidth,k=f*h.spriteSheet.spriteHeight,l=a+":"+b+":"+c+":"+i+":"+g+":"+j+":"+k;if(l in h.spriteSheet.urlToIndex)return h.spriteSheet.urlToIndex[l];var m=h.spriteSheet.currentIndex;h.spriteSheet.currentIndex+=1,h.spriteSheet.urlToIndex[l]=m;var n=m*h.spriteSheet.spriteWidth%h.spriteSheet.maxWidth,o=Math.floor(m*h.spriteSheet.spriteWidth/h.spriteSheet.maxWidth)*h.spriteSheet.spriteHeight,p=h.spriteSheet.canvas.getContext("2d");return p.beginPath(),p.rect(n,o,h.spriteSheet.spriteWidth,h.spriteSheet.spriteHeight),p.fillStyle=b,p.fill(),p.beginPath(),p.fillStyle=c,p.font=""+i+"px "+a,p.textAlign="center",p.textBaseline="middle",p.fillText(g,n+j,o+k),h.updateNeeded=!0,m},getImage:function(a,b){var c=this,d=c.spriteSheet.canvas.getContext("2d");if(a.length<1)return-1;if(a in c.spriteSheet.urlToIndex)return c.spriteSheet.urlToIndex[a];var e=c.spriteSheet.currentIndex;if(e>c.spriteSheet.maxSprites)return-1;c.spriteSheet.currentIndex+=1,c.spriteSheet.urlToIndex[a]=e;var f=new Image;return f.setAttribute("crossOrigin",b),f.onload=function(){var a=e*c.spriteSheet.spriteWidth%c.spriteSheet.maxWidth,b=Math.floor(e*c.spriteSheet.spriteWidth/c.spriteSheet.maxWidth)*c.spriteSheet.spriteHeight;d.drawImage(f,0,0,f.width,f.height,a,b,c.spriteSheet.spriteWidth,c.spriteSheet.spriteHeight),c.updateNeeded=!0},f.src=a,e}}}(),function(){"use strict";
sigma.utils.pkg("sigma.webgl.nodes"),sigma.webgl.nodes.fast={POINTS:1,ATTRIBUTES:4,addNode:function(a,b,c,d,e){var f=a.color||e("defaultNodeColor");a.active&&(f="node"===e("nodeActiveColor")?a.active_color||f:e("defaultNodeActiveColor")||f),f=sigma.utils.floatColor(f||e("defaultNodeColor")),b[c++]=a[d+"x"],b[c++]=a[d+"y"],b[c++]=a[d+"size"]||1,b[c++]=sigma.utils.floatColor(f||e("defaultNodeColor"))},render:function(a,b,c,d){var e,f=a.getAttribLocation(b,"a_position"),g=a.getAttribLocation(b,"a_size"),h=a.getAttribLocation(b,"a_color"),i=a.getUniformLocation(b,"u_resolution"),j=a.getUniformLocation(b,"u_matrix"),k=a.getUniformLocation(b,"u_ratio"),l=a.getUniformLocation(b,"u_scale");e=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,e),a.bufferData(a.ARRAY_BUFFER,c,a.DYNAMIC_DRAW),a.uniform2f(i,d.width,d.height),a.uniform1f(k,1/Math.pow(d.ratio,d.settings("nodesPowRatio"))),a.uniform1f(l,d.scalingRatio),a.uniformMatrix3fv(j,!1,d.matrix),a.enableVertexAttribArray(f),a.enableVertexAttribArray(g),a.enableVertexAttribArray(h),a.vertexAttribPointer(f,2,a.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),a.vertexAttribPointer(g,1,a.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),a.vertexAttribPointer(h,1,a.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,12),a.drawArrays(a.POINTS,d.start||0,d.count||c.length/this.ATTRIBUTES)},initProgram:function(a){var b,c,d;return b=sigma.utils.loadShader(a,["attribute vec2 a_position;","attribute float a_size;","attribute float a_color;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform float u_scale;","uniform mat3 u_matrix;","varying vec4 color;","void main() {","gl_Position = vec4(","((u_matrix * vec3(a_position, 1)).xy /","u_resolution * 2.0 - 1.0) * vec2(1, -1),","0,","1",");","gl_PointSize = a_size * u_ratio * u_scale * 2.0;","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),a.VERTEX_SHADER),c=sigma.utils.loadShader(a,["precision mediump float;","varying vec4 color;","void main(void) {","gl_FragColor = color;","}"].join("\n"),a.FRAGMENT_SHADER),d=sigma.utils.loadProgram(a,[b,c])}}}();
//# sourceMappingURL=sigma.renderers.linkurious.min.js.map
!function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.curve=function(a,b,c,d,e){var f=a.color,g=e("prefix")||"",h=e("edgeHoverSizeRatio")*(a[g+"size"]||1),i=a.count||0,j=e("edgeColor"),k=e("defaultNodeColor"),l=e("defaultEdgeColor"),m={},n=b[g+"size"],o=b[g+"x"],p=b[g+"y"],q=c[g+"x"],r=c[g+"y"];if(m=b.id===c.id?sigma.utils.getSelfLoopControlPoints(o,p,n,i):sigma.utils.getQuadraticControlPoint(o,p,q,r,i),!f)switch(j){case"source":f=b.color||k;break;case"target":f=c.color||k;break;default:f=l}f="edge"===e("edgeHoverColor")?a.hover_color||f:a.hover_color||e("defaultEdgeHoverColor")||f,d.strokeStyle=f,d.lineWidth=h,d.beginPath(),d.moveTo(o,p),b.id===c.id?d.bezierCurveTo(m.x1,m.y1,m.x2,m.y2,q,r):d.quadraticCurveTo(m.x,m.y,q,r),d.stroke()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.curvedArrow=function(a,b,c,d,e){var f,g,h,i,j,k,l=a.color,m=e("prefix")||"",n=e("edgeColor"),o=e("defaultNodeColor"),p=e("defaultEdgeColor"),q={},r=e("edgeHoverSizeRatio")*(a[m+"size"]||1),s=a.count||0,t=c[m+"size"],u=b[m+"x"],v=b[m+"y"],w=c[m+"x"],x=c[m+"y"];if(q=b.id===c.id?sigma.utils.getSelfLoopControlPoints(u,v,t,s):sigma.utils.getQuadraticControlPoint(u,v,w,x,s),b.id===c.id?(f=Math.sqrt(Math.pow(w-q.x1,2)+Math.pow(x-q.y1,2)),g=2.5*r,h=q.x1+(w-q.x1)*(f-g-t)/f,i=q.y1+(x-q.y1)*(f-g-t)/f,j=(w-q.x1)*g/f,k=(x-q.y1)*g/f):(f=Math.sqrt(Math.pow(w-q.x,2)+Math.pow(x-q.y,2)),g=2.5*r,h=q.x+(w-q.x)*(f-g-t)/f,i=q.y+(x-q.y)*(f-g-t)/f,j=(w-q.x)*g/f,k=(x-q.y)*g/f),!l)switch(n){case"source":l=b.color||o;break;case"target":l=c.color||o;break;default:l=p}l="edge"===e("edgeHoverColor")?a.hover_color||l:a.hover_color||e("defaultEdgeHoverColor")||l,d.strokeStyle=l,d.lineWidth=r,d.beginPath(),d.moveTo(u,v),b.id===c.id?d.bezierCurveTo(q.x2,q.y2,q.x1,q.y1,h,i):d.quadraticCurveTo(q.x,q.y,h,i),d.stroke(),d.fillStyle=l,d.beginPath(),d.moveTo(h+j,i+k),d.lineTo(h+.6*k,i-.6*j),d.lineTo(h-.6*k,i+.6*j),d.lineTo(h+j,i+k),d.closePath(),d.fill()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.curve=function(a,b,c,d,e){var f=a.color,g=e("prefix")||"",h=a[g+"size"]||1,i=a.count||0,j=e("edgeColor"),k=e("defaultNodeColor"),l=e("defaultEdgeColor"),m={},n=b[g+"size"],o=b[g+"x"],p=b[g+"y"],q=c[g+"x"],r=c[g+"y"];if(m=b.id===c.id?sigma.utils.getSelfLoopControlPoints(o,p,n,i):sigma.utils.getQuadraticControlPoint(o,p,q,r,i),!f)switch(j){case"source":f=b.color||k;break;case"target":f=c.color||k;break;default:f=l}d.strokeStyle=f,d.lineWidth=h,d.beginPath(),d.moveTo(o,p),b.id===c.id?d.bezierCurveTo(m.x1,m.y1,m.x2,m.y2,q,r):d.quadraticCurveTo(m.x,m.y,q,r),d.stroke()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.curvedArrow=function(a,b,c,d,e){var f,g,h,i,j,k=a.color,l=e("prefix")||"",m=e("edgeColor"),n=e("defaultNodeColor"),o=e("defaultEdgeColor"),p={},q=a[l+"size"]||1,r=a.count||0,s=c[l+"size"],t=b[l+"x"],u=b[l+"y"],v=c[l+"x"],w=c[l+"y"],x=Math.max(2.5*q,e("minArrowSize"));if(p=b.id===c.id?sigma.utils.getSelfLoopControlPoints(t,u,s,r):sigma.utils.getQuadraticControlPoint(t,u,v,w,r),b.id===c.id?(f=Math.sqrt(Math.pow(v-p.x1,2)+Math.pow(w-p.y1,2)),g=p.x1+(v-p.x1)*(f-x-s)/f,h=p.y1+(w-p.y1)*(f-x-s)/f,i=(v-p.x1)*x/f,j=(w-p.y1)*x/f):(f=Math.sqrt(Math.pow(v-p.x,2)+Math.pow(w-p.y,2)),g=p.x+(v-p.x)*(f-x-s)/f,h=p.y+(w-p.y)*(f-x-s)/f,i=(v-p.x)*x/f,j=(w-p.y)*x/f),!k)switch(m){case"source":k=b.color||n;break;case"target":k=c.color||n;break;default:k=o}d.strokeStyle=k,d.lineWidth=q,d.beginPath(),d.moveTo(t,u),b.id===c.id?d.bezierCurveTo(p.x2,p.y2,p.x1,p.y1,g,h):d.quadraticCurveTo(p.x,p.y,g,h),d.stroke(),d.fillStyle=k,d.beginPath(),d.moveTo(g+i,h+j),d.lineTo(g+.6*j,h-.6*i),d.lineTo(g-.6*j,h+.6*i),d.lineTo(g+i,h+j),d.closePath(),d.fill()}}(),function(a){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.canvas.edges.labels"),sigma.canvas.edges.labels.curve=function(a,b,c,d,e){if("string"==typeof a.label){var f=e("prefix")||"",g=a[f+"size"]||1;if(!(g<e("edgeLabelThreshold"))){var h,i,j,k=b[f+"size"],l=a.count||0,m=b[f+"x"],n=b[f+"y"],o=c[f+"x"],p=c[f+"y"],q=o-m,r=p-n,s=o>m?1:-1,t={},u=.5;b.id===c.id?(t=sigma.utils.getSelfLoopControlPoints(m,n,k,l),i=sigma.utils.getPointOnBezierCurve(u,m,n,o,p,t.x1,t.y1,t.x2,t.y2),j=Math.atan2(1,1)):(t=sigma.utils.getQuadraticControlPoint(m,n,o,p,l),i=sigma.utils.getPointOnQuadraticCurve(u,m,n,o,p,t.x,t.y),j=Math.atan2(r*s,q*s)),h="fixed"===e("edgeLabelSize")?e("defaultEdgeLabelSize"):e("defaultEdgeLabelSize")*g*Math.pow(g,-1/e("edgeLabelSizePowRatio")),d.save(),a.active?(d.font=[e("activeFontStyle"),h+"px",e("activeFont")||e("font")].join(" "),d.fillStyle="edge"===e("edgeActiveColor")?a.active_color||e("defaultEdgeActiveColor"):e("defaultEdgeLabelActiveColor")):(d.font=[e("fontStyle"),h+"px",e("font")].join(" "),d.fillStyle="edge"===e("edgeLabelColor")?a.color||e("defaultEdgeColor"):e("defaultEdgeLabelColor")),d.textAlign="center",d.textBaseline="alphabetic",d.translate(i.x,i.y),d.rotate(j),d.fillText(a.label,0,-g/2-3),d.restore()}}}}.call(this),function(a){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils=sigma.utils||{},sigma.utils.getQuadraticControlPoint=function(a,b,c,d,e){return e=e||0,{x:(a+c)/2+(d-b)/(60/(15+e)),y:(b+d)/2+(a-c)/(60/(15+e))}},sigma.utils.getSelfLoopControlPoints=function(a,b,c,d){return d=d||0,{x1:a-7*(c+d),y1:b,x2:a,y2:b+7*(c+d)}}}.call(this);
//# sourceMappingURL=sigma.renderers.parallelEdges.min.js.map
(function(a){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.parsers"),sigma.utils.pkg("sigma.utils"),sigma.utils.xhr=function(){if(window.XMLHttpRequest)return new XMLHttpRequest;var a,b;if(window.ActiveXObject){a=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Msxml2.XMLHTTP","Microsoft.XMLHTTP"];for(b in a)try{return new ActiveXObject(a[b])}catch(c){}}return null},sigma.parsers.json=function(a,b,c){var d,e=sigma.utils.xhr();if(!e)throw"XMLHttpRequest not supported, cannot load the file.";e.open("GET",a,!0),e.onreadystatechange=function(){4===e.readyState&&(d=JSON.parse(e.responseText),b instanceof sigma?(b.graph.clear(),b.graph.read(d)):"object"==typeof b?(b.graph=d,b=new sigma(b)):"function"==typeof b&&(c=b,b=null),c&&c(b||d))},e.send()}}).call(this);
//# sourceMappingURL=sigma.parsers.json.min.js.map
(function(){"use strict";function a(a,c,d){function e(a){a.preventDefault()}function f(){i&&i.parentNode&&(i.parentNode.removeChild(i),i=null)}function g(){clearTimeout(j),clearTimeout(k),j=!1,k=!1,f()}function h(a){clearTimeout(j),clearTimeout(k),j=!1,k=setTimeout(function(){p||f()},a)}var i,j,k,l=this,m=sigma.utils.extend(d.stage,b.stage),n=sigma.utils.extend(d.node,b.node),o=sigma.utils.extend(d.edge,b.edge),p=!1,q=!1;if(sigma.classes.dispatcher.extend(this),a.bind("kill",function(){sigma.plugins.killTooltips(a)}),this.open=function(b,d,e,g){if(f(),i=document.createElement("div"),d.renderer){var h,j,k,l=Object.create(null);for(k in b)l[k]=b[k];if(h=d.renderer.call(a.graph,l,d.template),j=typeof h,"undefined"===j)return;"string"===j?i.innerHTML=h:i.appendChild(h)}else i.innerHTML=d.template;var m=window.getComputedStyle(c.container).position;if("static"!==m){i.style.position="absolute";var n=c.container.getBoundingClientRect();e=~~(e-n.left),g=~~(g-n.top)}i.className=d.cssClass,"css"!==d.position&&("static"===m&&(i.style.position="absolute"),i.style.left=e+"px",i.style.top=g+"px"),i.addEventListener("mouseenter",function(){p=!0},!1),i.addEventListener("mouseleave",function(){p=!1},!1),setTimeout(function(){if(i){c.container.appendChild(i);var a=document.body.getBoundingClientRect(),b=i.getBoundingClientRect(),f=b.top-a.top,h=a.bottom-b.bottom,j=b.left-a.left,k=a.right-b.right;"top"===d.position?(i.className=d.cssClass+" top",i.style.left=e-b.width/2+"px",i.style.top=g-b.height+"px"):"bottom"===d.position?(i.className=d.cssClass+" bottom",i.style.left=e-b.width/2+"px",i.style.top=g+"px"):"left"===d.position?(i.className=d.cssClass+" left",i.style.left=e-b.width+"px",i.style.top=g-b.height/2+"px"):"right"===d.position&&(i.className=d.cssClass+" right",i.style.left=e+"px",i.style.top=g-b.height/2+"px"),d.autoadjust&&(b=i.getBoundingClientRect(),f=b.top-a.top,h=a.bottom-b.bottom,j=b.left-a.left,k=a.right-b.right,0>h?(i.className=d.cssClass,("top"===d.position||"bottom"===d.position)&&(i.className=d.cssClass+" top"),i.style.top=g-b.height+"px"):0>f&&(i.className=d.cssClass,("top"===d.position||"bottom"===d.position)&&(i.className=d.cssClass+" bottom"),i.style.top=g+"px"),0>k?(i.className=d.cssClass,("left"===d.position||"right"===d.position)&&(i.className=d.cssClass+" left"),i.style.left=e-b.width+"px"):0>j&&(i.className=d.cssClass,("left"===d.position||"right"===d.position)&&(i.className=d.cssClass+" right"),i.style.left=e+"px"))}},0)},this.close=function(){return g(),this.dispatchEvent("hidden"),this},this.kill=function(){this.unbindEvents(),clearTimeout(j),clearTimeout(k),i=null,j=null,k=null,q=!1},this.unbindEvents=function(){d.stage&&(a.unbind(m.show),a.unbind(m.hide),"doubleClickStage"!==m.show&&a.unbind("doubleClickStage")),d.node&&(a.unbind(n.show),a.unbind(n.hide),"doubleClickNode"!==n.show&&a.unbind("doubleClickNode")),d.edge&&(a.unbind(o.show),a.unbind(o.hide),"doubleClickEdge"!==o.show&&a.unbind("doubleClickEdge")),("rightClickNode"===n.show||"rightClickEdge"===o.show)&&c.container.removeEventListener("contextmenu",e)},d.stage){if(void 0!==d.stage.renderer&&"function"!=typeof d.stage.renderer)throw new TypeError('"options.stage.renderer" is not a function, was '+d.stage.renderer);if(void 0!==d.stage.position&&"top"!==d.stage.position&&"bottom"!==d.stage.position&&"left"!==d.stage.position&&"right"!==d.stage.position&&"css"!==d.stage.position)throw new Error('"options.position" is not "top", "bottom", "left", "right", or "css", was '+d.position);a.bind(m.show,function(a){if("doubleClickStage"===m.show||!q){var b=a.data.captor.clientX,c=a.data.captor.clientY;clearTimeout(j),j=setTimeout(function(){l.open(null,m,b,c),l.dispatchEvent("shown",a.data)},m.delay)}}),a.bind(m.hide,function(a){var c=i;h(b.stage.hideDelay),c&&l.dispatchEvent("hidden",a.data)}),"doubleClickStage"!==m.show&&a.bind("doubleClickStage",function(a){g(),q=!0,l.dispatchEvent("hidden",a.data),setTimeout(function(){q=!1},b.doubleClickDelay)})}if(d.node){if(void 0!==d.node.renderer&&"function"!=typeof d.node.renderer)throw new TypeError('"options.node.renderer" is not a function, was '+d.node.renderer);if(void 0!==d.node.position&&"top"!==d.node.position&&"bottom"!==d.node.position&&"left"!==d.node.position&&"right"!==d.node.position&&"css"!==d.node.position)throw new Error('"options.position" is not "top", "bottom", "left", "right", or "css", was '+d.position);a.bind(n.show,function(a){if("doubleClickNode"===n.show||!q){var b=a.data.node;if(!b&&a.data.enter&&(b=a.data.enter.nodes[0]),void 0!=b){var c=a.data.captor.clientX,d=a.data.captor.clientY;clearTimeout(j),j=setTimeout(function(){l.open(b,n,c,d),l.dispatchEvent("shown",a.data)},n.delay)}}}),a.bind(n.hide,function(a){if(!a.data.leave||0!=a.data.leave.nodes.length){var c=i;h(b.node.hideDelay),c&&l.dispatchEvent("hidden",a.data)}}),"doubleClickNode"!==n.show&&a.bind("doubleClickNode",function(a){g(),q=!0,l.dispatchEvent("hidden",a.data),setTimeout(function(){q=!1},b.doubleClickDelay)})}if(d.edge){if(void 0!==d.edge.renderer&&"function"!=typeof d.edge.renderer)throw new TypeError('"options.edge.renderer" is not a function, was '+d.edge.renderer);if(void 0!==d.edge.position&&"top"!==d.edge.position&&"bottom"!==d.edge.position&&"left"!==d.edge.position&&"right"!==d.edge.position&&"css"!==d.edge.position)throw new Error('"options.position" is not "top", "bottom", "left", "right", or "css", was '+d.position);a.bind(o.show,function(a){if("doubleClickEdge"===o.show||!q){var b=a.data.edge;if(!b&&a.data.enter&&(b=a.data.enter.edges[0]),void 0!=b){var c=a.data.captor.clientX,d=a.data.captor.clientY;clearTimeout(j),j=setTimeout(function(){l.open(b,o,c,d),l.dispatchEvent("shown",a.data)},o.delay)}}}),a.bind(o.hide,function(a){if(!a.data.leave||0!=a.data.leave.edges.length){var c=i;h(b.edge.hideDelay),c&&l.dispatchEvent("hidden",a.data)}}),"doubleClickEdge"!==o.show&&a.bind("doubleClickEdge",function(a){g(),q=!0,l.dispatchEvent("hidden",a.data),setTimeout(function(){q=!1},b.doubleClickDelay)})}("rightClickNode"===n.show||"rightClickEdge"===o.show)&&c.container.addEventListener("contextmenu",e)}if("undefined"==typeof sigma)throw new Error("sigma is not declared");sigma.utils.pkg("sigma.plugins");var b={stage:{show:"rightClickStage",hide:"clickStage",cssClass:"sigma-tooltip",position:"",autoadjust:!1,delay:0,hideDelay:0,template:"",renderer:null},node:{show:"clickNode",hide:"clickStage",cssClass:"sigma-tooltip",position:"",autoadjust:!1,delay:0,hideDelay:0,template:"",renderer:null},edge:{show:"clickEdge",hide:"clickStage",cssClass:"sigma-tooltip",position:"",autoadjust:!1,delay:0,hideDelay:0,template:"",renderer:null},doubleClickDelay:800},c={};sigma.plugins.tooltips=function(b,d,e){return c[b.id]||(c[b.id]=new a(b,d,e)),c[b.id]},sigma.plugins.killTooltips=function(b){c[b.id]instanceof a&&c[b.id].kill(),delete c[b.id]}}).call(window);
//# sourceMappingURL=sigma.plugins.tooltips.min.js.map
$(document).ready(function () {

    var body = $('body');

    body.on('click', '#validation a[href="#settings"]', function (evt) {
        evt.preventDefault();
        $(this).parent().parent().toggleClass('open');
    });

    body.on('click', '#validation a[href="#run-test"]', function (evt) {
        evt.preventDefault();
        var validation = $('#validation');
        $.ajax({
            url: Routing.generate('validation_test'),
            type: 'POST',
            dataType: 'text',
            data: {
                suite: $(this).attr('data-suite'),
                test: $(this).attr('data-test'),
                host: validation.find('.host-setting input').val().trim(),
                browser: validation.find('.browser-setting select').val().trim(),
                wait: validation.find('.wait-setting input').val().trim(),
                url: validation.find('.url-setting input').val().trim(),
                window_size: validation.find('.window_size select').val().trim()
            },
            success: function (response) {
                // TODO: update labels with new test results times
                validation.trigger('testended');
            }
        });
    });

    body.on('click', '#validation a[href^="#results-"]', function (evt) {
        evt.preventDefault();
        var id = $(this).attr('href').substring(9) + '',
            validation = $('#validation'),
            test = id.substring('TestResults-PASS-'.length, id.length - 10),
            result = $('[data-resultId="' + id + '"]');
        if(result.length > 0) {
            validation.find('.result.open').removeClass('open');
            result.addClass('open');
            return;
        }
        $.ajax({
            url: Routing.generate('validation_result'),
            type: 'POST',
            dataType: 'json',
            data: {
                result: id
            },
            success: function (response) {
                // TODO: update labels with new test results times
                var newResult = $('<div class="result" data-resultId="{{resultId}}"><div class="results-inner"><pre>{{status}}</pre>{{steps}}</div></div>'
                        .replace('{{resultId}}', id)
                        .replace('{{status}}', response[test].result)
                        .replace('{{steps}}', response[test].steps)
                ).appendTo(validation.find('.pane-content'));
                validation.find('.result.open').removeClass('open');
                newResult.addClass('open');
            }
        });
    });

    body.on('click', '#validation h3', function () {
        $(this).toggleClass('selected');
    });

    body.on('click', '#validation code', function () {
        var text = this;
        var range, selection;
        if (document.body.createTextRange) {
            range = document.body.createTextRange();
            range.moveToElementText(text);
            range.select();
        } else if (window.getSelection) {
            selection = window.getSelection();
            range = document.createRange();
            range.selectNodeContents(text);
            selection.removeAllRanges();
            selection.addRange(range);
        }
    });

    body.on('click', '#validation a[href="#run-all"]', function (evt) {
        evt.preventDefault();
        var validation = $('#validation'),
            suite = (/suite-(.*?)(\s|$)/ig).exec($(this).attr('class'))[1];
        $.ajax({
            url: Routing.generate('validation_test'),
            type: 'POST',
            dataType: 'text',
            data: {
                suite: suite,
                test: validation.find('tr:has(td:nth-child(3) input:checked)')
                    .map(function () { return (/test-id-(.*?)(\s|$)/ig).exec($(this).attr('class'))[1]; }).toArray()
                    .join('|'),
                host: validation.find('.host-setting input').val().trim(),
                browser: validation.find('.browser-setting select').val().trim(),
                wait: validation.find('.wait-setting input').val().trim(),
                url: validation.find('.url-setting input').val().trim(),
                window_size: validation.find('.window_size select').val().trim()
            },
            success: function (response) {
                var content = $(response),
                    first = (/test-id-(.*?)(\s|$)/ig).exec(content.filter('[class*="test-id-"]').first().attr('class'))[1];
                content.filter('[class*="test-id-"]').each(function () {
                    var test = (/test-id-(.*?)(\s|$)/ig).exec($(this).attr('class'))[1];
                    validation.find('tr.test-id-' + test + ' td:nth-child(2)').html('');
                    $(this).appendTo(validation.find('tr.test-id-' + test + ' td:nth-child(2)'));
                });
                content.not(content.filter('[class*="test-id-"]')).prependTo(validation.find('tr.test-id-' + first + ' td:nth-child(2)'));
            }
        });
    });

    function highlight() {
        var validation = $('#validation'),
            re = /depends-on-(.*?)(\s|$)/ig,
            match;
        while(match = re.exec($(this).attr('class'))) {
            validation.find('tr.test-id-' + match[1]).not('.dependency').addClass('dependency').each(highlight);
        }
        var ire = /includes-(.*?)(\s|$)/ig;
        while(match = ire.exec($(this).attr('class'))) {
            validation.find('tr.test-id-' + match[1]).not('.dependency').addClass('included').each(highlight);
        }
    }

    body.on('mouseover', '#validation tbody tr', highlight);

    function removeHighlight() {
        var validation = $('#validation'),
            re = /depends-on-(.*?)(\s|$)/ig,
            match;
        while(match = re.exec($(this).attr('class'))) {
            validation.find('tr.test-id-' + match[1]).filter('.dependency').removeClass('dependency').each(removeHighlight);
        }
        var ire = /includes-(.*?)(\s|$)/ig;
        while(match = ire.exec($(this).attr('class'))) {
            validation.find('tr.test-id-' + match[1]).filter('.included').removeClass('included').each(removeHighlight);
        }
    }

    body.on('mouseout', '#validation tbody tr', removeHighlight);

    var graphConfig = {
        container: 'sigma-container',
        type: 'canvas',
        settings: {
            labelThreshold: 0,
            nodeHaloColor: 'white',
            edgeHaloColor: 'white',
            nodeHaloSize: 3,
            edgeHaloSize: 3,
            defaultLabelSize: 20,
            scalingMode: 'inside',
            minArrowSize: 10,
            zoomingRatio: 1,
            mouseZoomDuration: 0,
            mouseWheelEnabled: false,
            doubleClickZoomingRatio: 1,
            doubleClickEnabled: false,
            zoomMin:.5,
            zoomMax:.5,
            nodePowRatio: 2,
            edgePowRatio: 2,
            labelSizeRatio: 1,
            labelHoverShadow: false,
            labelSize: 'fixed',
            minNodeSize: 5,
            maxNodeSize: 20,
            minEdgeSize: 5,
            defaultLabelColor: 'rgba(0,0,0,.66)',
            defaultLabelHoverColor: 'rgba(0,0,0,.66)',
            defaultHoverLabelBGColor: 'rgba(0,0,0,0)',
            maxEdgeSize: 10,
            sideMargin: 1
        }
    };

    function createGraph(s) {
        // We first need to save the original colors of our
        // nodes and edges, like this:
        s.graph.nodes().forEach(function(n) {
            n.originalColor = n.color;
        });
        s.graph.edges().forEach(function(e) {
            e.originalColor = e.color;
        });

        //var listener = sigma.layouts.fruchtermanReingold.configure(s, {});
// Bind all events:
        //listener.bind('start stop interpolate', function(event) {
        //    console.log(event.type);
        //});

        //s.startForceAtlas2({autoStop: true, labelAlignment: 'inside', scale: 2, barnesHutOptimize: false, edgeWeightInfluence: 1, adjustSizes: true});
        //sigma.layouts.fruchtermanReingold.start(s);
        //setTimeout(function () {
        //    s.stopForceAtlas2();
        //}, 200);

        // Configure the ForceLink algorithm:
        /*var fa = sigma.layouts.configForceLink(s, {
         worker: true,
         autoStop: true,
         background: true,
         scaleRatio: 10,
         gravity: 3,
         easing: 'cubicInOut'
         });
         // Bind the events:
         fa.bind('start stop', function(e) {
         console.log(e.type);
         if (e.type == 'start') {
         }
         });
         // Start the ForceLink algorithm:
         sigma.layouts.startForceLink();

         */

        var config = {
            node: {
                //show: 'clickNode',
                //hide: 'hovers',
                cssClass: 'sigma-tooltip',
                position: 'right',
                template: '<div class="arrow"></div>' +
                '<div class="previous"><a href="#results-{{resultId}}">{{prev}}</a></div>' +
                '<div class="sigma-tooltip-header">{{label}} <a href="#run-test" data-suite="{{suite}}" data-test="{{id}}">Run</a></div>' +
                '<div class="results">{{results}}</div>',
                renderer: function(node, template) {
                    // The function context is s.graph
                    node.degree = this.degree(node.id);
                    // Returns an HTML string:
                    return template.replace('{{label}}', node.label)
                        .replace('{{suite}}', node.suite)
                        .replace('{{id}}', node.id)
                        .replace('{{prev}}', typeof node.results != 'undefined' && node.results != null ? node.results[0].created : '')
                        .replace('{{resultId}}', typeof node.results != 'undefined' && node.results != null ? node.results[0].resultId : '');
                    // Returns a DOM Element:
                    //var el = document.createElement('div');
                    //return el.innerHTML = Mustache.render(template, node);
                }
            }
        };
        var tooltips = sigma.plugins.tooltips(s, s.renderers[0], config);

        //var listener = sigma.layouts.dagre.start(s, {rankDir: 'TB'});
        // When a node is clicked, we check for each node
        // if it is a neighbor of the clicked one. If not,
        // we set its color as grey, and else, it takes its
        // original color.
        // We do the same for the edges, and we only keep
        // edges that have both extremities colored.
        s.bind('hovers', function(e) {
            if(e.data.current.nodes.length == 0 ) {
                s.graph.nodes().forEach(function(n) {
                    n.color = n.originalColor;
                });

                s.graph.edges().forEach(function(e) {
                    e.color = e.originalColor;
                });

                // Same as in the previous event:
                s.refresh();
                return;
            }

            var node = e.data.current.nodes[0],
                nodeId = node.id,
                toKeep = s.graph.neighbors(nodeId);
            window.lastNode = node;
            toKeep[nodeId] = e.data.current.nodes[0];

            tooltips.open(node, config.node, node[s.renderers[0].options.prefix + 'x'], node[s.renderers[0].options.prefix + 'y']);


            s.graph.nodes().forEach(function(n) {
                if (toKeep[n.id])
                    n.color = n.originalColor;
                else
                    n.color = 'rgba(0,0,0,0)';
            });

            s.graph.edges().forEach(function(e) {
                if (e.source == node.id || e.target == node.id) {
                    if (typeof toKeep[e.source].depends != 'undefined' && toKeep[e.source].depends.indexOf(e.target) > -1) {
                        e.color = 'rgba(255,85,85,.66)';
                    }
                    else if (typeof toKeep[e.source].includes != 'undefined' && toKeep[e.source].includes.indexOf(e.target) > -1) {
                        e.color = 'rgba(85,85,255,.66)';
                    }
                    else {
                        e.color = 'rgba(85,85,85,.66)';
                    }
                }
                else
                    e.color = 'rgba(0,0,0,0)';
            });

            // Since the data has been modified, we need to
            // call the refresh method to make the colors
            // update effective.
            s.refresh();
        });

        $(window).resize(function () {
            setTimeout(function () {
                try {
                    s.refresh();
                }
                catch (e) {

                }
                if(typeof window.lastNode != 'undefined' && typeof s.renderers != 'undefined') {
                    tooltips.open(window.lastNode, config.node, window.lastNode[s.renderers[0].options.prefix + 'x'], window.lastNode[s.renderers[0].options.prefix + 'y']);
                }
            }, 13);
        });

        s.bind('clickNode', function (e) {

            var node = e.data.node;
            setTimeout(function () {
                tooltips.open(node, config.node, node[s.renderers[0].options.prefix + 'x'], node[s.renderers[0].options.prefix + 'y']);
            }, 13);

        });

        // When the stage is clicked, we just color each
        // node and edge with its original color.
        s.bind('clickStage', function(e) {
            s.graph.nodes().forEach(function(n) {
                n.color = n.originalColor;
            });

            s.graph.edges().forEach(function(e) {
                e.color = e.originalColor;
            });

            // Same as in the previous event:
            s.refresh();
        });

        body.one('testended', '#validation', function () {
            tooltips.close();
            sigma.plugins.killTooltips(s);
            s.kill();
            sigma.parsers.json(Routing.generate('validation_refresh'), graphConfig, createGraph);
        });

        /*
         function renderHalo() {
         s.renderers[0].halo({
         nodes: s.graph.nodes()
         });
         }

         renderHalo();

         s.renderers[0].bind('render', function(e) {
         renderHalo();
         });

         s.bind('clickStage', function(e) {
         renderHalo();
         });

         s.bind('hovers', function(e) {
         var adjacentNodes = [],
         adjacentEdges = [];

         if (!e.data.enter.nodes.length) return;

         // Get adjacent nodes:
         e.data.enter.nodes.forEach(function(node) {
         adjacentNodes = adjacentNodes.concat(s.graph.adjacentNodes(node.id));
         });

         // Add hovered nodes to the array and remove duplicates:
         adjacentNodes = arrayUnique(adjacentNodes.concat(e.data.enter.nodes));
         var dependsNodes = [], includesNodes = [];
         for(var i = 0; i < adjacentNodes.length; i++) {
         if(e.data.enter.nodes[0].depends.indexOf(adjacentNodes[i].id) > -1) {
         dependsNodes = dependsNodes.concat(adjacentNodes[i]);
         }
         else {
         includesNodes = includesNodes.concat(adjacentNodes[i]);
         }
         }

         // Get adjacent edges:
         e.data.enter.nodes.forEach(function(node) {
         adjacentEdges = adjacentEdges.concat(s.graph.adjacentEdges(node.id));
         });

         // Remove duplicates:
         adjacentEdges = arrayUnique(adjacentEdges);
         var dependsEdges = [], includesEdges = [];
         for(var j = 0; j < adjacentEdges.length; j++) {
         if(e.data.enter.nodes[0].depends.indexOf(adjacentEdges[j].source) > -1 ||
         e.data.enter.nodes[0].depends.indexOf(adjacentEdges[j].target) > -1) {
         dependsEdges = dependsEdges.concat(adjacentEdges[j]);
         }
         else {
         includesEdges = includesEdges.concat(adjacentEdges[j]);
         }
         }

         // Render halo:
         s.renderers[0].halo({
         nodes: adjacentNodes,
         edges: adjacentEdges
         });
         });
         */

    }

    body.on('show', '#validation', function () {
        if ($(this).is('.loaded')) {
            $(this).trigger('testended');
        }
        else {
            $(this).addClass('loaded');


            // Add a method to the graph model that returns an
            // object with every neighbors of a node inside:
            sigma.classes.graph.addMethod('neighbors', function(nodeId) {
                var k,
                    neighbors = {},
                    index = this.allNeighborsIndex[nodeId] || {};

                for (k in index) {
                    neighbors[k] = this.nodesIndex[k];
                }

                return neighbors;
            });

            sigma.renderers.def = sigma.renderers.canvas;

            sigma.parsers.json(
                Routing.generate('validation_refresh'), graphConfig, createGraph);
        }
    });

});